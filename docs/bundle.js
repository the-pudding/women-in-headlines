!function(){var e={221:function(e){var t;window,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=37)}([function(e,t,n){var r=n(1),o=n(6),a=n(7),i=n(16),s=n(18),l="prototype",c=function(e,t,n){var d,u,p,f,h=e&c.F,m=e&c.G,y=e&c.S,g=e&c.P,v=e&c.B,w=m?r:y?r[t]||(r[t]={}):(r[t]||{})[l],b=m?o:o[t]||(o[t]={}),_=b[l]||(b[l]={});for(d in m&&(n=t),n)p=((u=!h&&w&&void 0!==w[d])?w:n)[d],f=v&&u?s(p,r):g&&"function"==typeof p?s(Function.call,p):p,w&&i(w,d,p,e&c.U),b[d]!=p&&a(b,d,f),g&&_[d]!=p&&(_[d]=p)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(4)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";n.r(t),n.d(t,"h",(function(){return s})),n.d(t,"createElement",(function(){return s})),n.d(t,"cloneElement",(function(){return d})),n.d(t,"Component",(function(){return L})),n.d(t,"render",(function(){return F})),n.d(t,"rerender",(function(){return h})),n.d(t,"options",(function(){return o}));var r=function(){},o={},a=[],i=[];function s(e,t){var n,s,l,c,d=i;for(c=arguments.length;2<c--;)a.push(arguments[c]);for(t&&null!=t.children&&(a.length||a.push(t.children),delete t.children);a.length;)if((s=a.pop())&&void 0!==s.pop)for(c=s.length;c--;)a.push(s[c]);else"boolean"==typeof s&&(s=null),(l="function"!=typeof e)&&(null==s?s="":"number"==typeof s?s=String(s):"string"!=typeof s&&(l=!1)),l&&n?d[d.length-1]+=s:d===i?d=[s]:d.push(s),n=l;var u=new r;return u.nodeName=e,u.children=d,u.attributes=null==t?void 0:t,u.key=null==t?void 0:t.key,void 0!==o.vnode&&o.vnode(u),u}function l(e,t){for(var n in t)e[n]=t[n];return e}var c="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function d(e,t){return s(e.nodeName,l(l({},e.attributes),t),2<arguments.length?[].slice.call(arguments,2):e.children)}var u=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,p=[];function f(e){!e._dirty&&(e._dirty=!0)&&1==p.push(e)&&(o.debounceRendering||c)(h)}function h(){var e,t=p;for(p=[];e=t.pop();)e._dirty&&I(e)}function m(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function y(e){var t=l({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function g(e){var t=e.parentNode;t&&t.removeChild(e)}function v(e,t,n,r,o){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||o)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var a in n)a in r||(e.style[a]="");for(var a in r)e.style[a]="number"==typeof r[a]&&!1===u.test(a)?r[a]+"px":r[a]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var i=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,w,i):e.removeEventListener(t,w,i),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!o&&t in e){try{e[t]=null==r?"":r}catch(e){}null!=r&&!1!==r||"spellcheck"==t||e.removeAttribute(t)}else{var s=o&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function w(e){return this._listeners[e.type](o.event&&o.event(e)||e)}var b=[],_=0,x=!1,k=!1;function A(){for(var e;e=b.pop();)o.afterMount&&o.afterMount(e),e.componentDidMount&&e.componentDidMount()}function C(e,t,n,r,o){var a=e,i=x;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||o)?e.nodeValue!=t&&(e.nodeValue=t):(a=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(a,e),E(e,!0))),a.__preactattr_=!0,a;var s=t.nodeName;if("function"==typeof s)return function(e,t,n,r){for(var o=e&&e._component,a=o,i=e,s=o&&e._componentConstructor===t.nodeName,l=s,c=y(t);o&&!l&&(o=o._parentComponent);)l=o.constructor===t.nodeName;return o&&l&&(!r||o._component)?(D(o,c,3,n,r),e=o.base):(a&&!s&&(B(a),e=i=null),o=O(t.nodeName,c,n),e&&!o.nextBase&&(o.nextBase=e,i=null),D(o,c,1,n,r),e=o.base,i&&e!==i&&(i._component=null,E(i,!1))),e}(e,t,n,r);if(x="svg"===s||"foreignObject"!==s&&x,s=String(s),(!e||!m(e,s))&&(a=function(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}(s,x),e)){for(;e.firstChild;)a.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(a,e),E(e,!0)}var l=a.firstChild,c=a.__preactattr_,d=t.children;if(null==c){c=a.__preactattr_={};for(var u=a.attributes,p=u.length;p--;)c[u[p].name]=u[p].value}return!k&&d&&1===d.length&&"string"==typeof d[0]&&null!=l&&void 0!==l.splitText&&null==l.nextSibling?l.nodeValue!=d[0]&&(l.nodeValue=d[0]):(d&&d.length||null!=l)&&function(e,t,n,r,o){var a,i,s,l,c,d,u,p,f=e.childNodes,h=[],y={},v=0,w=0,b=f.length,_=0,x=t?t.length:0;if(0!==b)for(var k=0;k<b;k++){var A=f[k],S=A.__preactattr_;null!=(T=x&&S?A._component?A._component.__key:S.key:null)?(v++,y[T]=A):(S||(void 0!==A.splitText?!o||A.nodeValue.trim():o))&&(h[_++]=A)}if(0!==x)for(k=0;k<x;k++){var T;if(c=null,null!=(T=(l=t[k]).key))v&&void 0!==y[T]&&(c=y[T],y[T]=void 0,v--);else if(w<_)for(a=w;a<_;a++)if(void 0!==h[a]&&(d=i=h[a],p=o,"string"==typeof(u=l)||"number"==typeof u?void 0!==d.splitText:"string"==typeof u.nodeName?!d._componentConstructor&&m(d,u.nodeName):p||d._componentConstructor===u.nodeName)){c=i,h[a]=void 0,a===_-1&&_--,a===w&&w++;break}c=C(c,l,n,r),s=f[k],c&&c!==e&&c!==s&&(null==s?e.appendChild(c):c===s.nextSibling?g(s):e.insertBefore(c,s))}if(v)for(var k in y)void 0!==y[k]&&E(y[k],!1);for(;w<=_;)void 0!==(c=h[_--])&&E(c,!1)}(a,d,n,r,k||null!=c.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||v(e,r,n[r],n[r]=void 0,x);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||v(e,r,n[r],n[r]=t[r],x)}(a,t.attributes,c),x=i,a}function E(e,t){var n=e._component;n?B(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||g(e),S(e))}function S(e){for(e=e.lastChild;e;){var t=e.previousSibling;E(e,!0),e=t}}var T=[];function O(e,t,n){var r,o=T.length;for(e.prototype&&e.prototype.render?(r=new e(t,n),L.call(r,t,n)):((r=new L(t,n)).constructor=e,r.render=M);o--;)if(T[o].constructor===e)return r.nextBase=T[o].nextBase,T.splice(o,1),r;return r}function M(e,t,n){return this.constructor(e,n)}function D(e,t,n,r,a){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||a?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r)),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===o.syncComponentUpdates&&e.base?f(e):I(e,1,a)),e.__ref&&e.__ref(e))}function I(e,t,n,r){if(!e._disable){var a,i,s,c=e.props,d=e.state,u=e.context,p=e.prevProps||c,f=e.prevState||d,h=e.prevContext||u,m=e.base,g=e.nextBase,v=m||g,w=e._component,S=!1,T=h;if(e.constructor.getDerivedStateFromProps&&(d=l(l({},d),e.constructor.getDerivedStateFromProps(c,d)),e.state=d),m&&(e.props=p,e.state=f,e.context=h,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(c,d,u)?S=!0:e.componentWillUpdate&&e.componentWillUpdate(c,d,u),e.props=c,e.state=d,e.context=u),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!S){a=e.render(c,d,u),e.getChildContext&&(u=l(l({},u),e.getChildContext())),m&&e.getSnapshotBeforeUpdate&&(T=e.getSnapshotBeforeUpdate(p,f));var M,L,F=a&&a.nodeName;if("function"==typeof F){var N=y(a);(i=w)&&i.constructor===F&&N.key==i.__key?D(i,N,1,u,!1):(M=i,e._component=i=O(F,N,u),i.nextBase=i.nextBase||g,i._parentComponent=e,D(i,N,0,u,!1),I(i,1,n,!0)),L=i.base}else s=v,(M=w)&&(s=e._component=null),(v||1===t)&&(s&&(s._component=null),L=function(e,t,n,r,o,a){_++||(x=null!=o&&void 0!==o.ownerSVGElement,k=null!=e&&!("__preactattr_"in e));var i=C(e,t,n,r,true);return o&&i.parentNode!==o&&o.appendChild(i),--_||(k=!1),i}(s,a,u,n||!m,v&&v.parentNode));if(v&&L!==v&&i!==w){var R=v.parentNode;R&&L!==R&&(R.replaceChild(L,v),M||(v._component=null,E(v,!1)))}if(M&&B(M),(e.base=L)&&!r){for(var P=e,j=e;j=j._parentComponent;)(P=j).base=L;L._component=P,L._componentConstructor=P.constructor}}for(!m||n?b.unshift(e):S||(e.componentDidUpdate&&e.componentDidUpdate(p,f,T),o.afterUpdate&&o.afterUpdate(e));e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);_||r||A()}}function B(e){o.beforeUnmount&&o.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?B(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),g(e.nextBase=t),T.push(e),S(t)),e.__ref&&e.__ref(null)}function L(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}function F(e,t,n){return function(e,t,n,r,o,a){_++||(x=null!=o&&void 0!==o.ownerSVGElement,k=null!=e&&!("__preactattr_"in e));var i=C(e,t,{},!1,false);return o&&i.parentNode!==o&&o.appendChild(i),--_||(k=!1,A()),i}(n,e,0,0,t)}l(L.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=l(l({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),f(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),I(this,2)},render:function(){}});var N={h:s,createElement:s,cloneElement:d,Component:L,render:F,rerender:h,options:o};t.default=N},function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(8),o=n(40);e.exports=n(3)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(9),o=n(38),a=n(39),i=Object.defineProperty;t.f=n(3)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),o)try{return i(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(2);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(22);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var r=n(4);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(41)})},function(e,t,n){var r=n(2),o=n(1).document,a=r(o)&&r(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,n){var r=n(1),o=n(7),a=n(17),i=n(10)("src"),s="toString",l=Function[s],c=(""+l).split(s);n(6).inspectSource=function(e){return l.call(e)},(e.exports=function(e,t,n,s){var l="function"==typeof n;l&&(a(n,"name")||o(n,"name",t)),e[t]!==n&&(l&&(a(n,i)||o(n,i,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,s,(function(){return"function"==typeof this&&this[i]||l.call(this)}))},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(19);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(42),o=n(28);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(11),o=n(12);e.exports=function(e){return r(o(e))}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(21),o=n(24),a=n(43);e.exports=function(e){return function(t,n,i){var s,l=r(t),c=o(l.length),d=a(i,c);if(e&&n!=n){for(;d<c;)if((s=l[d++])!=s)return!0}else for(;d<c;d++)if((e||d in l)&&l[d]===n)return e||d||0;return!e&&-1}}},function(e,t,n){var r=n(25),o=Math.min;e.exports=function(e){return 0<e?o(r(e),9007199254740991):0}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?r:n)(e)}},function(e,t,n){var r=n(27)("keys"),o=n(10);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(6),o=n(1),a="__core-js_shared__",i=o[a]||(o[a]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(44)?"pure":"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(12);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(8).f,o=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in o||n(3)&&r(o,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(0),o=n(32)(1);r(r.P+r.F*!n(13)([].map,!0),"Array",{map:function(e){return o(this,e,arguments[1])}})},function(e,t,n){var r=n(18),o=n(11),a=n(29),i=n(24),s=n(47);e.exports=function(e,t){var n=1==e,l=2==e,c=3==e,d=4==e,u=6==e,p=5==e||u,f=t||s;return function(t,s,h){for(var m,y,g=a(t),v=o(g),w=r(s,h,3),b=i(v.length),_=0,x=n?f(t,b):l?f(t,0):void 0;_<b;_++)if((p||_ in v)&&(y=w(m=v[_],_,g),e))if(n)x[_]=y;else if(y)switch(e){case 3:return!0;case 5:return m;case 6:return _;case 2:x.push(m)}else if(d)return!1;return u?-1:c||d?d:x}}},function(e,t,n){var r=n(22);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(27)("wks"),o=n(10),a=n(1).Symbol,i="function"==typeof a;(e.exports=function(e){return r[e]||(r[e]=i&&a[e]||(i?a:o)("Symbol."+e))}).store=r},function(e,t,n){"use strict";var r=n(0),o=n(23)(!1),a=[].indexOf,i=!!a&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(i||!n(13)(a)),"Array",{indexOf:function(e){return i?a.apply(this,arguments)||0:o(this,e,arguments[1])}})},function(e,t,n){var r=n(0);r(r.S,"Object",{create:n(52)})},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,n(14),n(30),n(31),n(35),n(49),n(50);var r=n(5),o=function(e){return e&&e.__esModule?e:{default:e}}(n(51));function a(e){if(!e.element)throw new Error("element is not defined");if(!e.id)throw new Error("id is not defined");if(!e.source)throw new Error("source is not defined");Array.isArray(e.source)&&(e.source=i(e.source)),(0,r.render)((0,r.createElement)(o.default,e),e.element)}var i=function(e){return function(t,n){n(e.filter((function(e){return-1!==e.toLowerCase().indexOf(t.toLowerCase())})))}};a.enhanceSelectElement=function(e){if(!e.selectElement)throw new Error("selectElement is not defined");if(!e.source){var t=[].filter.call(e.selectElement.options,(function(t){return t.value||e.preserveNullOptions}));e.source=t.map((function(e){return e.textContent||e.innerText}))}if(e.onConfirm=e.onConfirm||function(t){var n=[].filter.call(e.selectElement.options,(function(e){return(e.textContent||e.innerText)===t}))[0];n&&(n.selected=!0)},e.selectElement.value||void 0===e.defaultValue){var n=e.selectElement.options[e.selectElement.options.selectedIndex];e.defaultValue=n.textContent||n.innerText}void 0===e.name&&(e.name=""),void 0===e.id&&(void 0===e.selectElement.id?e.id="":e.id=e.selectElement.id),void 0===e.autoselect&&(e.autoselect=!0);var r=document.createElement("div");e.selectElement.parentNode.insertBefore(r,e.selectElement),a(Object.assign({},e,{element:r})),e.selectElement.style.display="none",e.selectElement.id=e.selectElement.id+"-select"};var s=a;t.default=s},function(e,t,n){e.exports=!n(3)&&!n(4)((function(){return 7!=Object.defineProperty(n(15)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(2);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var r=n(20),o=n(45),a=n(46),i=n(29),s=n(11),l=Object.assign;e.exports=!l||n(4)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r}))?function(e,t){for(var n=i(e),l=arguments.length,c=1,d=o.f,u=a.f;c<l;)for(var p,f=s(arguments[c++]),h=d?r(f).concat(d(f)):r(f),m=h.length,y=0;y<m;)u.call(f,p=h[y++])&&(n[p]=f[p]);return n}:l},function(e,t,n){var r=n(17),o=n(21),a=n(23)(!1),i=n(26)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),l=0,c=[];for(n in s)n!=i&&r(s,n)&&c.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~a(c,n)||c.push(n));return c}},function(e,t,n){var r=n(25),o=Math.max,a=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):a(e,t)}},function(e,t){e.exports=!1},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(48);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(2),o=n(33),a=n(34)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(0),o=n(32)(2);r(r.P+r.F*!n(13)([].filter,!0),"Array",{filter:function(e){return o(this,e,arguments[1])}})},function(e,t,n){var r=n(0);r(r.S,"Array",{isArray:n(33)})},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,n(14),n(36),n(30),n(31),n(35),n(55),n(58);var r=n(5),o=i(n(60)),a=i(n(61));function i(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c={13:"enter",27:"escape",32:"space",38:"up",40:"down"};function d(){return"undefined"!=typeof navigator&&!(!navigator.userAgent.match(/(iPod|iPhone|iPad)/g)||!navigator.userAgent.match(/AppleWebKit/g))}var u=function(e){function t(t){var n;return(n=e.call(this,t)||this).elementReferences={},n.state={focused:null,hovered:null,menuOpen:!1,options:t.defaultValue?[t.defaultValue]:[],query:t.defaultValue,validChoiceMade:!1,selected:null,ariaHint:!0},n.handleComponentBlur=n.handleComponentBlur.bind(l(l(n))),n.handleKeyDown=n.handleKeyDown.bind(l(l(n))),n.handleUpArrow=n.handleUpArrow.bind(l(l(n))),n.handleDownArrow=n.handleDownArrow.bind(l(l(n))),n.handleEnter=n.handleEnter.bind(l(l(n))),n.handlePrintableKey=n.handlePrintableKey.bind(l(l(n))),n.handleListMouseLeave=n.handleListMouseLeave.bind(l(l(n))),n.handleOptionBlur=n.handleOptionBlur.bind(l(l(n))),n.handleOptionClick=n.handleOptionClick.bind(l(l(n))),n.handleOptionFocus=n.handleOptionFocus.bind(l(l(n))),n.handleOptionMouseDown=n.handleOptionMouseDown.bind(l(l(n))),n.handleOptionMouseEnter=n.handleOptionMouseEnter.bind(l(l(n))),n.handleInputBlur=n.handleInputBlur.bind(l(l(n))),n.handleInputChange=n.handleInputChange.bind(l(l(n))),n.handleInputFocus=n.handleInputFocus.bind(l(l(n))),n.pollInputElement=n.pollInputElement.bind(l(l(n))),n.getDirectInputChanges=n.getDirectInputChanges.bind(l(l(n))),n}!function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}(t,e);var n=t.prototype;return n.isQueryAnOption=function(e,t){var n=this;return-1!==t.map((function(e){return n.templateInputValue(e).toLowerCase()})).indexOf(e.toLowerCase())},n.componentDidMount=function(){this.pollInputElement()},n.componentWillUnmount=function(){clearTimeout(this.$pollInput)},n.pollInputElement=function(){var e=this;this.getDirectInputChanges(),this.$pollInput=setTimeout((function(){e.pollInputElement()}),100)},n.getDirectInputChanges=function(){var e=this.elementReferences[-1];e&&e.value!==this.state.query&&this.handleInputChange({target:{value:e.value}})},n.componentDidUpdate=function(e,t){var n=this.state.focused,r=null===n,o=t.focused!==n;o&&!r&&this.elementReferences[n].focus();var a=-1===n,i=o&&null===t.focused;if(a&&i){var s=this.elementReferences[n];s.setSelectionRange(0,s.value.length)}},n.hasAutoselect=function(){return!d()&&this.props.autoselect},n.templateInputValue=function(e){var t=this.props.templates&&this.props.templates.inputValue;return t?t(e):e},n.templateSuggestion=function(e){var t=this.props.templates&&this.props.templates.suggestion;return t?t(e):e},n.handleComponentBlur=function(e){var t,n=this.state,r=n.options,o=n.query,a=n.selected;this.props.confirmOnBlur?(t=e.query||o,this.props.onConfirm(r[a])):t=o,this.setState({focused:null,menuOpen:e.menuOpen||!1,query:t,selected:null,validChoiceMade:this.isQueryAnOption(t,r)})},n.handleListMouseLeave=function(e){this.setState({hovered:null})},n.handleOptionBlur=function(e,t){var n=this.state,r=n.focused,o=n.menuOpen,a=n.options,i=n.selected,s=null===e.relatedTarget,l=e.relatedTarget===this.elementReferences[-1],c=r!==t&&-1!==r;if(!c&&s||!c&&!l){var u=o&&d();this.handleComponentBlur({menuOpen:u,query:this.templateInputValue(a[i])})}},n.handleInputBlur=function(e){var t=this.state,n=t.focused,r=t.menuOpen,o=t.options,a=t.query,i=t.selected;if(-1===n){var s=r&&d(),l=d()?a:this.templateInputValue(o[i]);this.handleComponentBlur({menuOpen:s,query:l})}},n.handleInputChange=function(e){var t=this,n=this.props,r=n.minLength,o=n.source,a=n.showAllValues,i=this.hasAutoselect(),s=e.target.value,l=0===s.length,c=this.state.query.length!==s.length,d=s.length>=r;this.setState({query:s,ariaHint:l}),a||!l&&c&&d?o(s,(function(e){var n=0<e.length;t.setState({menuOpen:n,options:e,selected:i&&n?0:-1,validChoiceMade:!1})})):!l&&d||this.setState({menuOpen:!1,options:[]})},n.handleInputClick=function(e){this.handleInputChange(e)},n.handleInputFocus=function(e){var t=this.state,n=t.query,r=t.validChoiceMade,o=t.options,a=this.props.minLength,i=!r&&n.length>=a&&0<o.length;i?this.setState((function(e){var t=e.menuOpen;return{focused:-1,menuOpen:i||t,selected:-1}})):this.setState({focused:-1})},n.handleOptionFocus=function(e){this.setState({focused:e,hovered:null,selected:e})},n.handleOptionMouseEnter=function(e,t){d()||this.setState({hovered:t})},n.handleOptionClick=function(e,t){var n=this.state.options[t],r=this.templateInputValue(n);this.props.onConfirm(n),this.setState({focused:-1,hovered:null,menuOpen:!1,query:r,selected:-1,validChoiceMade:!0}),this.forceUpdate()},n.handleOptionMouseDown=function(e){e.preventDefault()},n.handleUpArrow=function(e){e.preventDefault();var t=this.state,n=t.menuOpen,r=t.selected;-1!==r&&n&&this.handleOptionFocus(r-1)},n.handleDownArrow=function(e){var t=this;if(e.preventDefault(),this.props.showAllValues&&!1===this.state.menuOpen)e.preventDefault(),this.props.source("",(function(e){t.setState({menuOpen:!0,options:e,selected:0,focused:0,hovered:null})}));else if(!0===this.state.menuOpen){var n=this.state,r=n.menuOpen,o=n.options,a=n.selected;a!==o.length-1&&r&&this.handleOptionFocus(a+1)}},n.handleSpace=function(e){var t=this;this.props.showAllValues&&!1===this.state.menuOpen&&""===this.state.query&&(e.preventDefault(),this.props.source("",(function(e){t.setState({menuOpen:!0,options:e})}))),-1!==this.state.focused&&(e.preventDefault(),this.handleOptionClick(e,this.state.focused))},n.handleEnter=function(e){this.state.menuOpen&&(e.preventDefault(),0<=this.state.selected&&this.handleOptionClick(e,this.state.selected))},n.handlePrintableKey=function(e){var t=this.elementReferences[-1];e.target===t||t.focus()},n.handleKeyDown=function(e){switch(c[e.keyCode]){case"up":this.handleUpArrow(e);break;case"down":this.handleDownArrow(e);break;case"space":this.handleSpace(e);break;case"enter":this.handleEnter(e);break;case"escape":this.handleComponentBlur({query:this.state.query});break;default:(function(e){return 47<e&&e<58||32===e||8===e||64<e&&e<91||95<e&&e<112||185<e&&e<193||218<e&&e<223})(e.keyCode)&&this.handlePrintableKey(e)}},n.render=function(){var e,t=this,n=this.props,a=n.cssNamespace,i=n.displayMenu,l=n.id,c=n.minLength,u=n.name,p=n.placeholder,f=n.required,h=n.showAllValues,m=n.tNoResults,y=n.tStatusQueryTooShort,g=n.tStatusNoResults,v=n.tStatusSelectedOption,w=n.tStatusResults,b=n.tAssistiveHint,_=n.dropdownArrow,x=this.state,k=x.focused,A=x.hovered,C=x.menuOpen,E=x.options,S=x.query,T=x.selected,O=x.ariaHint,M=x.validChoiceMade,D=this.hasAutoselect(),I=-1===k,B=0===E.length,L=0!==S.length,F=S.length>=c,N=this.props.showNoOptionsFound&&I&&B&&L&&F,R=a+"__wrapper",P=a+"__input",j=null!==k?" "+P+"--focused":"",q=this.props.showAllValues?" "+P+"--show-all-values":" "+P+"--default",U=a+"__dropdown-arrow-down",$=-1!==k&&null!==k,z=a+"__menu",H=z+"--"+i,V=z+"--"+(C||N?"visible":"hidden"),W=a+"__option",K=a+"__hint",G=this.templateInputValue(E[T]),Y=G&&0===G.toLowerCase().indexOf(S.toLowerCase())&&D?S+G.substr(S.length):"",J=l+"__assistiveHint",Q=O?{"aria-describedby":J}:null;return h&&"string"==typeof(e=_({className:U}))&&(e=(0,r.createElement)("div",{className:a+"__dropdown-arrow-down-wrapper",dangerouslySetInnerHTML:{__html:e}})),(0,r.createElement)("div",{className:R,onKeyDown:this.handleKeyDown},(0,r.createElement)(o.default,{id:l,length:E.length,queryLength:S.length,minQueryLength:c,selectedOption:this.templateInputValue(E[T]),selectedOptionIndex:T,validChoiceMade:M,isInFocus:null!==this.state.focused,tQueryTooShort:y,tNoResults:g,tSelectedOption:v,tResults:w}),Y&&(0,r.createElement)("span",null,(0,r.createElement)("input",{className:K,readonly:!0,tabIndex:"-1",value:Y})),(0,r.createElement)("input",s({"aria-expanded":C?"true":"false","aria-activedescendant":!!$&&l+"__option--"+k,"aria-owns":l+"__listbox","aria-autocomplete":this.hasAutoselect()?"both":"list"},Q,{autoComplete:"off",className:""+P+j+q,id:l,onClick:function(e){return t.handleInputClick(e)},onBlur:this.handleInputBlur},function(e){return{onInput:e}}(this.handleInputChange),{onFocus:this.handleInputFocus,name:u,placeholder:p,ref:function(e){t.elementReferences[-1]=e},type:"text",role:"combobox",required:f,value:S})),e,(0,r.createElement)("ul",{className:z+" "+H+" "+V,onMouseLeave:function(e){return t.handleListMouseLeave(e)},id:l+"__listbox",role:"listbox"},E.map((function(e,n){var o=(-1===k?T===n:k===n)&&null===A?" "+W+"--focused":"",a=n%2?" "+W+"--odd":"",i=d()?"<span id="+l+"__option-suffix--"+n+' style="border:0;clip:rect(0 0 0 0);height:1px;marginBottom:-1px;marginRight:-1px;overflow:hidden;padding:0;position:absolute;whiteSpace:nowrap;width:1px"> '+(n+1)+" of "+E.length+"</span>":"";return(0,r.createElement)("li",{"aria-selected":k===n?"true":"false",className:""+W+o+a,dangerouslySetInnerHTML:{__html:t.templateSuggestion(e)+i},id:l+"__option--"+n,key:n,onBlur:function(e){return t.handleOptionBlur(e,n)},onClick:function(e){return t.handleOptionClick(e,n)},onMouseDown:t.handleOptionMouseDown,onMouseEnter:function(e){return t.handleOptionMouseEnter(e,n)},ref:function(e){t.elementReferences[n]=e},role:"option",tabIndex:"-1","aria-posinset":n+1,"aria-setsize":E.length})})),N&&(0,r.createElement)("li",{className:W+" "+W+"--no-results"},m())),(0,r.createElement)("span",{id:J,style:{display:"none"}},b()))},t}(r.Component);(t.default=u).defaultProps={autoselect:!1,cssNamespace:"autocomplete",defaultValue:"",displayMenu:"inline",minLength:0,name:"input-autocomplete",placeholder:"",onConfirm:function(){},confirmOnBlur:!0,showNoOptionsFound:!0,showAllValues:!1,required:!1,tNoResults:function(){return"No results found"},tAssistiveHint:function(){return"When autocomplete results are available use up and down arrows to review and enter to select.  Touch device users, explore by touch or with swipe gestures."},dropdownArrow:a.default}},function(e,t,n){var r=n(9),o=n(53),a=n(28),i=n(26)("IE_PROTO"),s=function(){},l="prototype",c=function(){var e,t=n(15)("iframe"),r=a.length;for(t.style.display="none",n(54).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c[l][a[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[l]=r(e),n=new s,s[l]=null,n[i]=e):n=c(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(8),o=n(9),a=n(20);e.exports=n(3)?Object.defineProperties:function(e,t){o(e);for(var n,i=a(t),s=i.length,l=0;l<s;)r.f(e,n=i[l++],t[n]);return e}},function(e,t,n){var r=n(1).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(0);r(r.P,"Function",{bind:n(56)})},function(e,t,n){"use strict";var r=n(19),o=n(2),a=n(57),i=[].slice,s={};e.exports=Function.bind||function(e){var t=r(this),n=i.call(arguments,1),l=function(){var r=n.concat(i.call(arguments));return this instanceof l?function(e,t,n){if(!(t in s)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)}(t,r.length,r):a(t,r,e)};return o(t.prototype)&&(l.prototype=t.prototype),l}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){n(59)("match",1,(function(e,t,n){return[function(n){"use strict";var r=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},n]}))},function(e,t,n){"use strict";var r=n(7),o=n(16),a=n(4),i=n(12),s=n(34);e.exports=function(e,t,n){var l=s(e),c=n(i,l,""[e]),d=c[0],u=c[1];a((function(){var t={};return t[l]=function(){return 7},7!=""[e](t)}))&&(o(String.prototype,e,d),r(RegExp.prototype,l,2==t?function(e,t){return u.call(e,this,t)}:function(e){return u.call(e,this)}))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,n(36);var r=n(5),o=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={bump:!1,debounced:!1},t}!function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}(t,e);var n=t.prototype;return n.componentWillMount=function(){var e=this;this.debounceStatusUpdate=function(e,t,n){var r;return function(){var t=this,o=arguments,a=function(){r=null,e.apply(t,o)},i=n;clearTimeout(r),r=setTimeout(a,1400),i&&e.apply(t,o)}}((function(){if(!e.state.debounced){var t=!e.props.isInFocus||e.props.validChoiceMade;e.setState((function(e){return{bump:!e.bump,debounced:!0,silenced:t}}))}}))},n.componentWillReceiveProps=function(e){e.queryLength,this.setState({debounced:!1})},n.render=function(){var e,t=this.props,n=t.id,o=t.length,a=t.queryLength,i=t.minQueryLength,s=t.selectedOption,l=t.selectedOptionIndex,c=t.tQueryTooShort,d=t.tNoResults,u=t.tSelectedOption,p=t.tResults,f=this.state,h=f.bump,m=f.debounced,y=f.silenced,g=a<i,v=0===o,w=s?u(s,o,l):"";return e=g?c(i):v?d():p(o,w),this.debounceStatusUpdate(),(0,r.createElement)("div",{style:{border:"0",clip:"rect(0 0 0 0)",height:"1px",marginBottom:"-1px",marginRight:"-1px",overflow:"hidden",padding:"0",position:"absolute",whiteSpace:"nowrap",width:"1px"}},(0,r.createElement)("div",{id:n+"__status--A",role:"status","aria-atomic":"true","aria-live":"polite"},!y&&m&&h?e:""),(0,r.createElement)("div",{id:n+"__status--B",role:"status","aria-atomic":"true","aria-live":"polite"},y||!m||h?"":e))},t}(r.Component);(t.default=o).defaultProps={tQueryTooShort:function(e){return"Type in "+e+" or more characters for results"},tNoResults:function(){return"No search results"},tSelectedOption:function(e,t,n){return e+" "+(n+1)+" of "+t+" is highlighted"},tResults:function(e,t){return e+" "+(1===e?"result":"results")+" "+(1===e?"is":"are")+" available. "+t}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(5);t.default=function(e){var t=e.className;return(0,r.createElement)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:t,focusable:"false"},(0,r.createElement)("g",{stroke:"none",fill:"none","fill-rule":"evenodd"},(0,r.createElement)("polygon",{fill:"#000000",points:"0 0 22 0 11 17"})))}}]).default},e.exports=t()},633:function(e,t,n){var r,o;void 0===(o="function"==typeof(r=()=>({selector:e,enter:t=(()=>{}),exit:n=(()=>{}),progress:r=(()=>{}),offset:o=0,once:a=!1})=>{let i=null,s=!1,l=[],c=0;function d(){const e=document.documentElement.clientHeight,t=window.innerHeight||0;c=Math.max(e,t)}function u(){s=!1;const e=function(){if(o&&"number"==typeof o){const e=Math.min(Math.max(0,o),1);return c-e*c}return c}();l=l.filter((o=>{const{top:i,bottom:s,height:l}=o.getBoundingClientRect(),c=i<e,d=s<e;if(c&&!o.__ev_entered){if(t(o),o.__ev_progress=0,r(o,o.__ev_progress),a)return!1}else!c&&o.__ev_entered&&(o.__ev_progress=0,r(o,o.__ev_progress),n(o));if(c&&!d){const t=(e-i)/l;o.__ev_progress=Math.min(1,Math.max(0,t)),r(o,o.__ev_progress)}return c&&d&&1!==o.__ev_progress&&(o.__ev_progress=1,r(o,o.__ev_progress)),o.__ev_entered=c,!0})),l.length||(window.removeEventListener("scroll",p,!0),window.removeEventListener("resize",f,!0),window.removeEventListener("load",h,!0))}function p(){s||(s=!0,i(u))}function f(){d(),u()}function h(){d(),u()}function m(e){const t=e.length,n=[];for(let r=0;r<t;r+=1)n.push(e[r]);return n}function y(){l=function(e,t=document){return"string"==typeof e?m(t.querySelectorAll(e)):e instanceof NodeList?m(e):e instanceof Array?e:void 0}(e)}e?(y(),l&&l.length?(i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},window.addEventListener("resize",f,!0),window.addEventListener("scroll",p,!0),window.addEventListener("load",h,!0),f(),u()):console.error("no selector elements found")):console.error("must pass a selector")})?r.call(t,n,t,e):r)||(e.exports=o)},337:function(){!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=function(e){for(var t=window.document,n=o(t);n;)n=o(t=n.ownerDocument);return t}(),t=[],n=null,r=null;i.prototype.THROTTLE_TIMEOUT=100,i.prototype.POLL_INTERVAL=null,i.prototype.USE_MUTATION_OBSERVER=!0,i._setupCrossOriginUpdater=function(){return n||(n=function(e,n){r=e&&n?u(e,n):{top:0,bottom:0,left:0,right:0,width:0,height:0},t.forEach((function(e){e._checkForIntersections()}))}),n},i._resetCrossOriginUpdater=function(){n=null,r=null},i.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},i.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},i.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},i.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},i.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},i.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},i.prototype._monitorIntersections=function(t){var n=t.defaultView;if(n&&-1==this._monitoringDocuments.indexOf(t)){var r=this._checkForIntersections,a=null,i=null;this.POLL_INTERVAL?a=n.setInterval(r,this.POLL_INTERVAL):(s(n,"resize",r,!0),s(t,"scroll",r,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(i=new n.MutationObserver(r)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push((function(){var e=t.defaultView;e&&(a&&e.clearInterval(a),l(e,"resize",r,!0)),l(t,"scroll",r,!0),i&&i.disconnect()}));var c=this.root&&(this.root.ownerDocument||this.root)||e;if(t!=c){var d=o(t);d&&this._monitorIntersections(d.ownerDocument)}}},i.prototype._unmonitorIntersections=function(t){var n=this._monitoringDocuments.indexOf(t);if(-1!=n){var r=this.root&&(this.root.ownerDocument||this.root)||e;if(!this._observationTargets.some((function(e){var n=e.element.ownerDocument;if(n==t)return!0;for(;n&&n!=r;){var a=o(n);if((n=a&&a.ownerDocument)==t)return!0}return!1}))){var a=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),a(),t!=r){var i=o(t);i&&this._unmonitorIntersections(i.ownerDocument)}}}},i.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},i.prototype._checkForIntersections=function(){if(this.root||!n||r){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(r){var o=r.element,i=c(o),s=this._rootContainsTarget(o),l=r.entry,d=e&&s&&this._computeTargetAndRootIntersection(o,i,t),u=null;this._rootContainsTarget(o)?n&&!this.root||(u=t):u={top:0,bottom:0,left:0,right:0,width:0,height:0};var p=r.entry=new a({time:window.performance&&performance.now&&performance.now(),target:o,boundingClientRect:i,rootBounds:u,intersectionRect:d});l?e&&s?this._hasCrossedThreshold(l,p)&&this._queuedEntries.push(p):l&&l.isIntersecting&&this._queuedEntries.push(p):this._queuedEntries.push(p)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},i.prototype._computeTargetAndRootIntersection=function(t,o,a){if("none"!=window.getComputedStyle(t).display){for(var i,s,l,d,p,h,m,y,g=o,v=f(t),w=!1;!w&&v;){var b=null,_=1==v.nodeType?window.getComputedStyle(v):{};if("none"==_.display)return null;if(v==this.root||9==v.nodeType)if(w=!0,v==this.root||v==e)n&&!this.root?!r||0==r.width&&0==r.height?(v=null,b=null,g=null):b=r:b=a;else{var x=f(v),k=x&&c(x),A=x&&this._computeTargetAndRootIntersection(x,k,a);k&&A?(v=x,b=u(k,A)):(v=null,g=null)}else{var C=v.ownerDocument;v!=C.body&&v!=C.documentElement&&"visible"!=_.overflow&&(b=c(v))}if(b&&(i=b,s=g,void 0,void 0,void 0,void 0,void 0,void 0,l=Math.max(i.top,s.top),d=Math.min(i.bottom,s.bottom),p=Math.max(i.left,s.left),y=d-l,g=(m=(h=Math.min(i.right,s.right))-p)>=0&&y>=0&&{top:l,bottom:d,left:p,right:h,width:m,height:y}||null),!g)break;v=v&&f(v)}return g}},i.prototype._getRootRect=function(){var t;if(this.root&&!h(this.root))t=c(this.root);else{var n=h(this.root)?this.root:e,r=n.documentElement,o=n.body;t={top:0,left:0,right:r.clientWidth||o.clientWidth,width:r.clientWidth||o.clientWidth,bottom:r.clientHeight||o.clientHeight,height:r.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(t)},i.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},i.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var o=0;o<this.thresholds.length;o++){var a=this.thresholds[o];if(a==n||a==r||a<n!=a<r)return!0}},i.prototype._rootIsInDom=function(){return!this.root||p(e,this.root)},i.prototype._rootContainsTarget=function(t){var n=this.root&&(this.root.ownerDocument||this.root)||e;return p(n,t)&&(!this.root||n==t.ownerDocument)},i.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},i.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=i,window.IntersectionObserverEntry=a}function o(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(e){return null}}function a(e){this.time=e.time,this.target=e.target,this.rootBounds=d(e.rootBounds),this.boundingClientRect=d(e.boundingClientRect),this.intersectionRect=d(e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,o=r.width*r.height;this.intersectionRatio=n?Number((o/n).toFixed(4)):this.isIntersecting?1:0}function i(e,t){var n,r,o,a=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(a.root&&1!=a.root.nodeType&&9!=a.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,o=null,function(){o||(o=setTimeout((function(){n(),o=null}),r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(a.rootMargin),this.thresholds=this._initThresholds(a.threshold),this.root=a.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function s(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function l(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function c(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function d(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function u(e,t){var n=t.top-e.top,r=t.left-e.left;return{top:n,left:r,height:t.height,width:t.width,bottom:n+t.height,right:r+t.width}}function p(e,t){for(var n=t;n;){if(n==e)return!0;n=f(n)}return!1}function f(t){var n=t.parentNode;return 9==t.nodeType&&t!=e?o(t):(n&&n.assignedSlot&&(n=n.assignedSlot.parentNode),n&&11==n.nodeType&&n.host?n.host:n)}function h(e){return e&&9===e.nodeType}}()},296:function(e,t,n){var r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,d=l||c||Function("return this")(),u=Object.prototype.toString,p=Math.max,f=Math.min,h=function(){return d.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=a.test(e);return n||i.test(e)?s(e.slice(2),n?2:8):o.test(e)?NaN:+e}e.exports=function(e,t,n){var r,o,a,i,s,l,c=0,d=!1,u=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=r,a=o;return r=o=void 0,c=t,i=e.apply(a,n)}function w(e){return c=e,s=setTimeout(_,t),d?v(e):i}function b(e){var n=e-l;return void 0===l||n>=t||n<0||u&&e-c>=a}function _(){var e=h();if(b(e))return x(e);s=setTimeout(_,function(e){var n=t-(e-l);return u?f(n,a-(e-c)):n}(e))}function x(e){return s=void 0,g&&r?v(e):(r=o=void 0,i)}function k(){var e=h(),n=b(e);if(r=arguments,o=this,l=e,n){if(void 0===s)return w(l);if(u)return s=setTimeout(_,t),v(l)}return void 0===s&&(s=setTimeout(_,t)),i}return t=y(t)||0,m(n)&&(d=!!n.leading,a=(u="maxWait"in n)?p(y(n.maxWait)||0,t):a,g="trailing"in n?!!n.trailing:g),k.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=o=s=void 0},k.flush=function(){return void 0===s?i:x(h())},k}},99:function(e){e.exports=function(){"use strict";function e(e){return"scrollama__debug-offset--"+e}function t(t){!function(t){var n=t.id,r=t.offsetVal,o=t.stepClass,a=document.createElement("div");a.id=e(n),a.className="scrollama__debug-offset",a.style.position="fixed",a.style.left="0",a.style.width="100%",a.style.height="0",a.style.borderTop="2px dashed black",a.style.zIndex="9999";var i=document.createElement("p");i.innerHTML='".'+o+'" trigger: <span>'+r+"</span>",i.style.fontSize="12px",i.style.fontFamily="monospace",i.style.color="black",i.style.margin="0",i.style.padding="6px",a.appendChild(i),document.body.appendChild(a)}({id:t.id,offsetVal:t.offsetVal,stepClass:t.stepEl[0].className})}function n(e){var t=e.id,n=e.index,r=e.state,o="scrollama__debug-step--"+t+"-"+n,a=document.getElementById(o+"_above"),i=document.getElementById(o+"_below"),s="enter"===r?"block":"none";a&&(a.style.display=s),i&&(i.style.display=s)}return function(){var r=["stepAbove","stepBelow","stepProgress","viewportAbove","viewportBelow"],o={},a={},i=null,s=[],l=[],c=[],d=[],u=0,p=0,f=0,h=0,m=0,y=0,g=!1,v=!1,w=!1,b=!1,_=!1,x=!1,k="down",A="percent",C=[];function E(e){console.error("scrollama error: "+e)}function S(){o={stepEnter:function(){},stepExit:function(){},stepProgress:function(){}},a={}}function T(e){return e.getBoundingClientRect().top+window.pageYOffset-(document.body.clientTop||0)}function O(e){return+e.getAttribute("data-scrollama-index")}function M(){window.pageYOffset>m?k="down":window.pageYOffset<m&&(k="up"),m=window.pageYOffset}function D(e){a[e]&&a[e].forEach((function(e){return e.disconnect()}))}function I(){var t,n;f=window.innerHeight,t=document.body,n=document.documentElement,h=Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight),p=u*("pixels"===A?1:f),g&&(l=s.map((function(e){return e.getBoundingClientRect().height})),c=s.map(T),v&&H()),w&&function(t){var n=t.id,r=t.offsetMargin,o=t.offsetVal,a="pixels"===t.format?"px":"",i=e(n),s=document.getElementById(i);s.style.top=r+"px",s.querySelector("span").innerText=""+o+a}({id:i,offsetMargin:p,offsetVal:u,format:A})}function B(e){if(e&&!v){if(!g)return E("scrollama error: enable() called before scroller was ready"),void(v=!1);H()}!e&&v&&r.forEach(D),v=e}function L(e,t){var n=O(e);void 0!==t&&(d[n].progress=t);var r={element:e,index:n,progress:d[n].progress};"enter"===d[n].state&&o.stepProgress(r)}function F(e,t){if("above"===t)for(var n=0;n<e;n+=1){var r=d[n];"enter"!==r.state&&"down"!==r.direction?(N(s[n],"down",!1),R(s[n],"down")):"enter"===r.state&&R(s[n],"down")}else if("below"===t)for(var o=d.length-1;o>e;o-=1){var a=d[o];"enter"===a.state&&R(s[o],"up"),"down"===a.direction&&(N(s[o],"up",!1),R(s[o],"up"))}}function N(e,t,r){void 0===r&&(r=!0);var a=O(e),s={element:e,index:a,direction:t};d[a].direction=t,d[a].state="enter",_&&r&&"down"===t&&F(a,"above"),_&&r&&"up"===t&&F(a,"below"),o.stepEnter&&!C[a]&&(o.stepEnter(s,d),w&&n({id:i,index:a,state:"enter"}),x&&(C[a]=!0)),b&&L(e)}function R(e,t){var r=O(e),a={element:e,index:r,direction:t};b&&("down"===t&&d[r].progress<1?L(e,1):"up"===t&&d[r].progress>0&&L(e,0)),d[r].direction=t,d[r].state="exit",o.stepExit(a,d),w&&n({id:i,index:r,state:"exit"})}function P(e){var t=e[0];M();var n=t.isIntersecting,r=t.boundingClientRect,o=t.target,a=r.top,i=r.bottom,s=a-p,l=i-p,c=O(o),u=d[c];n&&s<=0&&l>=0&&"down"===k&&"enter"!==u.state&&N(o,k),!n&&s>0&&"up"===k&&"enter"===u.state&&R(o,k)}function j(e){var t=e[0];M();var n=t.isIntersecting,r=t.boundingClientRect,o=t.target,a=r.top,i=r.bottom,s=a-p,l=i-p,c=O(o),u=d[c];n&&s<=0&&l>=0&&"up"===k&&"enter"!==u.state&&N(o,k),!n&&l<0&&"down"===k&&"enter"===u.state&&R(o,k)}function q(e){var t=e[0];M();var n=t.isIntersecting,r=t.target,o=O(r),a=d[o];n&&"down"===k&&"down"!==a.direction&&"enter"!==a.state&&(N(r,"down"),R(r,"down"))}function U(e){var t=e[0];M();var n=t.isIntersecting,r=t.target,o=O(r),a=d[o];n&&"up"===k&&"down"===a.direction&&"enter"!==a.state&&(N(r,"up"),R(r,"up"))}function $(e){var t=e[0];M();var n=t.isIntersecting,r=t.intersectionRatio,o=t.boundingClientRect,a=t.target,i=o.bottom;n&&i-p>=0&&L(a,+r)}function z(){a.stepProgress=s.map((function(e,t){var n=l[t]-p+"px 0px "+(-f+p)+"px 0px",r=function(e){for(var t=Math.ceil(e/y),n=[],r=1/t,o=0;o<t;o+=1)n.push(o*r);return n}(l[t]),o=new IntersectionObserver($,{rootMargin:n,threshold:r});return o.observe(e),o}))}function H(){r.forEach(D),a.viewportAbove=s.map((function(e,t){var n=h-c[t],r=p-f-l[t],o=new IntersectionObserver(q,{rootMargin:n+"px 0px "+r+"px 0px"});return o.observe(e),o})),a.viewportBelow=s.map((function(e,t){var n=-p-l[t],r=p-f+l[t]+h,o=new IntersectionObserver(U,{rootMargin:n+"px 0px "+r+"px 0px"});return o.observe(e),o})),a.stepAbove=s.map((function(e,t){var n=-p+l[t],r=new IntersectionObserver(P,{rootMargin:n+"px 0px "+(p-f)+"px 0px"});return r.observe(e),r})),a.stepBelow=s.map((function(e,t){var n=-p,r=p-f+l[t],o=new IntersectionObserver(j,{rootMargin:n+"px 0px "+r+"px 0px"});return o.observe(e),o})),b&&z()}function V(e){return!(!e||1!==e.nodeType)&&(function(e){var t=window.getComputedStyle(e);return("scroll"===t.overflowY||"auto"===t.overflowY)&&e.scrollHeight>e.clientHeight}(e)?e:V(e.parentNode))}var W={setup:function(e){var n=e.step,r=e.parent,o=e.offset;void 0===o&&(o=.5);var a=e.progress;void 0===a&&(a=!1);var l=e.threshold;void 0===l&&(l=4);var c=e.debug;void 0===c&&(c=!1);var p=e.order;void 0===p&&(p=!0);var f,h,m,v=e.once;if(void 0===v&&(v=!1),S(),h=(f="abcdefghijklmnopqrstuv").length,m=Date.now(),i=""+[0,0,0].map((function(e){return f[Math.floor(Math.random()*h)]})).join("")+m,!(s=function(e,t){return void 0===t&&(t=document),"string"==typeof e?Array.from(t.querySelectorAll(e)):e instanceof Element?[e]:e instanceof NodeList?Array.from(e):e instanceof Array?e:[]}(n,r)).length)return E("no step elements"),W;var k=s.reduce((function(e,t){return e||V(t.parentNode)}),!1);return k&&console.error("scrollama error: step elements cannot be children of a scrollable element. Remove any css on the parent element with overflow: scroll; or overflow: auto; on elements with fixed height.",k),w=c,b=a,_=p,x=v,W.offsetTrigger(o),y=Math.max(1,+l),g=!0,w&&t({id:i,stepEl:s,offsetVal:u}),s.forEach((function(e,t){return e.setAttribute("data-scrollama-index",t)})),d=s.map((function(){return{direction:null,state:null,progress:0}})),I(),W.enable(),W},resize:function(){return I(),W},enable:function(){return B(!0),W},disable:function(){return B(!1),W},destroy:function(){B(!1),S()},offsetTrigger:function(e){if(null===e)return u;if("number"==typeof e)A="percent",e>1&&E("offset value is greater than 1. Fallback to 1."),e<0&&E("offset value is lower than 0. Fallback to 0."),u=Math.min(Math.max(0,e),1);else if("string"==typeof e&&e.indexOf("px")>0){var t=+e.replace("px","");isNaN(t)?(E("offset value must be in 'px' format. Fallback to 0.5."),u=.5):(A="pixels",u=t)}else E("offset value does not include 'px'. Fallback to 0.5."),u=.5;return W},onStepEnter:function(e){return"function"==typeof e?o.stepEnter=e:E("onStepEnter requires a function"),W},onStepExit:function(e){return"function"==typeof e?o.stepExit=e:E("onStepExit requires a function"),W},onStepProgress:function(e){return"function"==typeof e?o.stepProgress=e:E("onStepProgress requires a function"),W}};return W}}()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=n(296),t=n.n(e);const r={android:()=>navigator.userAgent.match(/Android/i),blackberry:()=>navigator.userAgent.match(/BlackBerry/i),ios:()=>navigator.userAgent.match(/iPhone|iPad|iPod/i),opera:()=>navigator.userAgent.match(/Opera Mini/i),windows:()=>navigator.userAgent.match(/IEMobile/i),any:()=>r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()};var o=r;const a='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>',i=d3.select("body");function s(e,t,n){const r=e.classed("is-visible");t.attr("aria-expanded",!r),e.classed("is-active",!r),e.classed("is-visible",!r),i.classed("modal-open",!r),!0===n&&(r?t.html((()=>a)):t.html((()=>'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>')))}function l(e){return new Promise(((t,n)=>{const r=e.split(".").pop();"csv"===r?d3.csv(`assets/data/${e}`).then(t).catch(n):"json"===r?d3.json(`assets/data/${e}`).then(t).catch(n):n(new Error(`unsupported file type for: ${e}`))}))}var c=n(221),d=n.n(c);function u(e,t){e.each((function(){for(var e,n=d3.select(this),r=n.text().split(/\s+/).reverse(),o=[],a=0,i=n.attr("x"),s=n.attr("y"),l=n.text(null).append("tspan").attr("x",i).attr("y",s).attr("dy","0em");e=r.pop();)o.push(e),l.text(o.join(" ")),l.node().getComputedTextLength()>t&&(o.pop(),l.text(o.join(" ")),o=[e],l=n.append("tspan").attr("x",i).attr("y",s).attr("dy",1.1*++a+0+"em").text(e))}))}d3.selection.prototype.puddingStackedBar=function(e){const t=this.nodes().map((function(e){const t=d3.select(e);let n=null,r=null,o=null,a=null,i=null,s=null,l=null,c=null,p=null,f=null,h=null,m=null,y=null;const g=d3.select("#scrolly-side"),v=g.select("article").selectAll(".step");d3.select("#wordSearch");let w,b=t.datum(),_=b[0],x=b[1],k=(b[2],b[3]),A=[{country:"South Africa",flag:"assets/images/flags/south-africa.svg"},{country:"USA",flag:"assets/images/flags/united-states.svg"},{country:"India",flag:"assets/images/flags/india.svg"},{country:"UK",flag:"assets/images/flags/united-kingdom.svg"},{country:"All countries",flag:""}],C=d3.stack().keys(k.columns.slice(2)).order(d3.stackOrderAscending)(k.filter((e=>"No theme"!==e.theme))).map((e=>(e.forEach((t=>t.key=e.key)),e))),E=0,S=0;const T=50;let O=null,M=null,D=null;function I(e){let t=e.trim();return t=t.replace(/ /g,""),t=t.replace(",",""),t=t.toLowerCase(),t}function B(){let e=d3.select(this),t=e.attr("id");t=t.split("_")[0],f.style("opacity","0.3");const n=[...e.selectAll("rect").classed("hoverRectActive",!0)._groups[0]].map((e=>{const t=d3.select(e).datum();return t.data[t.key.word]})).filter((e=>e)).pop(),r=D(+n);h=e.append("text").text(t).attr("class","stackedBarThemeHover").attr("x",E-T).attr("y",r)}function L(){let e=d3.select(this);h.remove(),d3.selectAll(".stackedBars").selectAll(".crimeandviolence_class, .femalestereotypes_class, .empowerment_class, .peopleandplaces_class, .raceethnicityandidentity_class").style("opacity",1),e.selectAll("rect").classed("hoverRectActive",!1)}function F(e,t,n){v.classed("is-active",((t,n)=>n===e));let r=t,o=null,a=d3.select(`#${r}_group`);7===e||9===e||"search"===n?(d3.selectAll(".stackedBars rect").attr("opacity","0.3"),o=d3.selectAll(`.${r}_class`).attr("opacity","1")):(d3.selectAll(".stackedBars rect").attr("fill","#ded5bb").attr("opacity","0.3"),o=d3.selectAll(`.${r}_class`).attr("fill","#282828").attr("opacity","1"));const i=[...o._groups[0]].map((e=>{const t=d3.select(e).datum();return t.data[t.key.word]})).filter((e=>e)).pop(),s=D(+i);h=a.append("text").text(r).attr("class","stackedBarThemeHover").attr("x",E-T).attr("y",s+5)}function N(e,t){v.classed("is-active",((t,n)=>n===e)),d3.selectAll(".stackedBars").selectAll("rect").attr("fill","#ded5bb").attr("opacity","0.3");let n=d3.selectAll(".stackedBars").selectAll(".crimeandviolence_class"),r=d3.selectAll(".stackedBars").selectAll(".femalestereotypes_class"),o=d3.selectAll(".stackedBars").selectAll(".empowerment_class"),a=d3.selectAll(".stackedBars").selectAll(".peopleandplaces_class"),i=d3.selectAll(".stackedBars").selectAll(".raceethnicityandidentity_class");"crimeandviolence"===t&&n.attr("fill","#E76B2D").attr("opacity","1"),"femalestereotypes"===t&&r.attr("fill","#F2C5D3").attr("opacity","1"),"EPR"===t&&(n.attr("fill","#E76B2D").attr("opacity","1"),r.attr("fill","#F2C5D3").attr("opacity","1"),o.attr("fill","#A35FD0").attr("opacity","1"),a.attr("fill","#F7DC5B").attr("opacity","1"),i.attr("fill","#53B67C").attr("opacity","1"))}const R={init(){!function(e,t){w=d3.stack().keys(e.columns.slice(2))(e).map((e=>(e.forEach((n=>n.key=void 0!==t.filter((t=>t.word===e.key))[0]?{word:e.key,country:n.data.country,theme:t.filter((t=>t.word===e.key))[0].theme}:{word:e.key,country:n.data.country,theme:"No theme"})),e)))}(_,x),function(){let e=_.columns;console.log(e),d()({element:document.querySelector("#wordSearch"),id:"my-autocomplete",source:e,displayMenu:"overlay",placeholder:"Search for a word",confirmOnBlur:!1,onConfirm(e){h.remove(),F(null,e,"search")}})}(),n=t.append("svg").attr("class","stackedChart"),r=n.append("g").attr("class","g-axis"),a=r.append("g").attr("class","x axis"),s=a.append("g"),i=r.append("g").attr("class","y axis"),c=i.append("text").attr("class","stackedChartyTicks").attr("transform","translate(10,275) rotate(-90)").text("Frequency of use of headlines â¢"),M=d3.scaleBand().domain(_.map((e=>e.country))).padding(.1),o=n.append("g").attr("class","g-vis"),p=o.append("g").attr("class","stackedBars").selectAll("g").data(w).join("g").attr("id",(e=>`${e.key}_group`)).on("mouseenter",B).on("mouseleave",L).selectAll("rect").data((e=>e)),f=p.join("rect").attr("class",(function(e){let t=`${I(e.key.theme)}_class`;return`${e.key.word}_class ${t} ${I(e.key.country)}_class`})).attr("fill","#e7dfc8").attr("opacity","1").attr("stroke","#FEFAF1").attr("stroke-width","1"),m=o.selectAll("rect").filter((e=>"No theme"!==e.key.theme&&"All countries"===e.data.country)),y=o.selectAll("rect").filter((e=>"No theme"===e.key.theme&&"All countries"===e.data.country)),R.render(),R.resize()},updateChart(e,t){const n=g.select(`[data-index='${e}']`),r=n.attr("word");return n.attr("theme"),console.log(e),0===e&&d3.selectAll(".stackedBars").selectAll("rect").attr("fill","#ded5bb").attr("opacity","1"),1===e&&F(e,r),2===e&&(h.remove(),F(e,r)),3===e&&(h.remove(),F(e,r)),4===e&&(h.remove(),F(e,r)),5===e&&(h.remove(),F(e,r)),6===e&&(h.remove(),N(e,"crimeandviolence")),7===e&&(h.remove(),N(e,"crimeandviolence"),F(e,r)),8===e&&(h.remove(),N(e,"femalestereotypes")),9===e&&(h.remove(),N(e,"femalestereotypes"),F(e,r)),10===e&&(h.remove(),N(e,"EPR")),11===e&&"down"===t&&f.style("pointer-events","auto"),12===e&&(h.remove(),f.style("pointer-events","none"),function(e,t,n,r,o){let a=d3.selectAll(".india_class, .india_tick"),i=d3.selectAll(".southafrica_class, .southafrica_tick"),l=d3.selectAll(".uk_class, .uk_tick"),c=d3.selectAll(".usa_class, .usa_tick");setTimeout((()=>{a.style("opacity",0)}),500),setTimeout((()=>{i.style("opacity",0)}),1e3),setTimeout((()=>{l.style("opacity",0)}),1500),setTimeout((()=>{c.style("opacity",0)}),2e3),setTimeout((()=>{r.domain(["crime and violence","female stereotypes","empowerment","people and places","race, ethnicity and identity"]),o.domain([d3.max(C,(e=>d3.max(e,(e=>e[1])))),0]),s.call(d3.axisBottom(r).tickSizeOuter(0).tickSizeInner(0)).call((e=>e.selectAll(".domain").remove())).call((e=>e.selectAll(".tick text").remove())),s.selectAll(".tick").append("text").text((e=>"female stereotypes"===e?"gendered language":e)).attr("x",0).attr("y",-5).attr("class","stackedChartTicks").call(u,r.bandwidth()),s.selectAll(".tick").style("opacity",1)}),2500),setTimeout((()=>{m.transition().duration("500").ease(d3.easeLinear).delay(((e,t)=>10*t)).attr("x",(e=>void 0!==C.filter((t=>t.key===e.key.word))[0]?r(C.filter((t=>t.key===e.key.word))[0].filter((t=>t.data.theme===e.key.theme))[0].data.theme):null)).attr("y",(e=>void 0!==C.filter((t=>t.key===e.key.word))[0]?o(C.filter((t=>t.key===e.key.word))[0].filter((t=>t.data.theme===e.key.theme))[0][1]):null)).attr("height",(e=>void 0!==C.filter((t=>t.key===e.key.word))[0]?o(C.filter((t=>t.key===e.key.word))[0].filter((t=>t.data.theme===e.key.theme))[0][1]):null)).attr("width",r.bandwidth())}),3e3),setTimeout((()=>{y.transition().duration("500").ease(d3.easeLinear).delay(((e,t)=>2*t)).style("opacity",0)}),3e3)}(0,0,0,M,D)),R},resize:()=>(E=t.node().offsetWidth-0-T,S=1.5*t.node().offsetHeight-50-50,n.attr("width",E+0+T).attr("height",S+50+50),a.attr("transform","translate(0,80)"),M.range([0,E-T]),O=M.padding(),s.call(d3.axisBottom(M)),s.selectAll(".domain").remove(),s.selectAll(".tick line").remove(),s.selectAll(".tick .tickFlag").remove(),s.selectAll(".tick").attr("class",(e=>`${I(e)}_tick tick`)),s.selectAll(".tick text").attr("x",0).attr("y",-5).attr("class","stackedChartTicks").call(u,M.bandwidth()),s.selectAll(".tick text").attr("transform",`translate(${M.bandwidth()-T+6}, 0)`),s.selectAll(".tick").append("svg:image").attr("class","tickFlag").attr("id",(e=>`${I(e)}_flag`)).attr("height","35px").attr("x",M.bandwidth()-T+5).attr("y",0).attr("transform","translate(-17, -55)").attr("xlink:href",(e=>A.filter((t=>t.country===e))[0].flag)),i.attr("transform","translate(0,0)"),D=d3.scaleLinear().domain([w.length,0]).range([S-50,50]),l=e=>e.call(d3.axisRight(D).tickSizeOuter(0).tickSizeInner(0)).call((e=>e.selectAll(".tick").remove())).call((e=>e.selectAll(".domain").remove())),l=i.append("g").call(l),f.attr("x",((e,t)=>M(e.data.country))).attr("height",(e=>0===e.data[e.key.word]||null===e.data[e.key.word]?0:S/w.length)).attr("width",M.bandwidth()).attr("y",(e=>0!==e.data[e.key.word]||null!==e.data[e.key.word]?D(e.data[e.key.word]):D(null))),R),render:()=>(o.attr("transform","translate(0, 50)"),R),data(e){return arguments.length?(b=e,t.datum(b),R):b}};return R.init(),R}));return t.length>1?t:t.pop()};var p=n(633),f=n.n(p);d3.selection.prototype.puddingTimeSeriesLine=function(e){const t=this.nodes().map((function(e){const t=d3.select(e);let n=null,r=null,o=null,a=null,i=null,s=null,l=null,c=null,d=null,p=null,h=null,m=null,y=t.datum(),g=0,v=0,w=null,b=null,_=null,x=null;function k(){const e=this.getTotalLength(),t=d3.interpolateString("0,"+e,e+","+e);return function(e){return t(e)}}const A={init(){var e,u;y=(e=d3.rollup(y,(e=>[d3.median(e,(e=>e.women_polarity_median)),d3.median(e,(e=>e.all_polarity_median))]),(e=>e.year)),u=[],e.forEach((function(e,t){u.push({year:t,womenPolarityMed:e[0],allPolarityMed:e[1]})})),u).filter((e=>2021!==e.year&&2016!==e.year)),n=t.append("svg").attr("class","pudding-chart"),r=n.append("g").attr("class","g-axis"),w=d3.scaleTime().domain(d3.extent(y,(e=>e.year))),b=d3.scaleLinear().domain([0,d3.max(y,(e=>e.womenPolarityMed))]).nice(),_=r.append("g").attr("class","stackedChartyTicks"),x=r.append("g").attr("class","lineChartyAxis"),m=r.append("text").attr("class","stackedChartyTicks").attr("transform","rotate(-90)").text("Average polarity of news headlines â¢"),o=n.append("g").attr("class","g-vis"),a=d3.line().defined((e=>!isNaN(e.womenPolarityMed))).curve(d3.curveBasis),i=d3.line().defined((e=>!isNaN(e.allPolarityMed))).curve(d3.curveBasis),s=o.append("path").datum(y).attr("class","women-comp-line").attr("stroke-dasharray",0),l=o.append("path").datum(y).attr("class","all-comp-line").attr("stroke-dasharray",0),c=o.append("circle").attr("r",0).attr("class","polarityCompBubbleRight"),d=o.append("circle").attr("r",0).attr("class","polarityCompBubbleLeft"),p=o.append("text").attr("class","polarityCompFemText"),h=o.append("text").attr("class","polarityCompAllText")},resize:()=>(g=t.node().offsetWidth-50-20,v=t.node().offsetHeight-30-10,n.attr("width",g+50+20).attr("height",v+30+10),w.range([50,g-20]),b.range([v-10,30]),_.attr("transform",`translate(0,${v-10})`).call(d3.axisBottom(w).ticks(6).tickSizeOuter(0).tickSizeInner(0).tickFormat(d3.format("d"))),x.attr("transform","translate(50,0)").call(d3.axisLeft(b).tickSize(0).tickValues([.1,.2,.3,.4,.45])).call((e=>e.select(".domain").remove())),m.attr("x",-v/1.1).attr("y",10),a.x((e=>w(e.year))).y((e=>b(e.womenPolarityMed))),i.x((e=>w(e.year))).y((e=>b(e.allPolarityMed))),s.attr("d",a),l.attr("d",i),c.attr("cx",w(d3.max(y,(e=>e.year)))).attr("cy",(function(e){let t=y.length-1,n=y[t].womenPolarityMed;return b(n)})).attr("r",0),d.attr("cx",w(d3.max(y,(e=>e.year)))).attr("cy",(function(e){let t=y.length-1,n=y[t].allPolarityMed;return b(n)})).attr("r",0),p.text("Headlines about women").attr("opacity",0).attr("x",w(d3.max(y,(e=>e.year)))).attr("y",(function(e){let t=y.length-1,n=y[t].womenPolarityMed;return b(n)+8})).call(u,100),h.text("All headlines").attr("opacity",0).attr("x",w(d3.max(y,(e=>e.year)))).attr("y",(function(e){let t=y.length-1,n=y[t].allPolarityMed;return b(n)+40})).call(u,100),f()({selector:"#timeSeriesChart",offset:.5,enter:()=>{s.transition().duration(2e3).ease(d3.easeLinear).attrTween("stroke-dasharray",k),c.transition().duration(200).delay(2e3).ease(d3.easeLinear).attr("r",(e=>g>=600?11:8)),p.transition().duration(200).delay(2e3).ease(d3.easeLinear).attr("opacity",1),l.transition().duration(2e3).ease(d3.easeLinear).attrTween("stroke-dasharray",k),d.transition().duration(200).delay(2e3).ease(d3.easeLinear).attr("r",(e=>g>=600?4:3)),h.transition().duration(200).delay(2e3).ease(d3.easeLinear).attr("opacity",1)},exit:()=>{}}),A),render:()=>(o.attr("transform","translate(50, 30)"),A),data(e){return arguments.length?(y=e,t.datum(y),A):y}};return A.init(),A}));return t.length>1?t:t.pop()},d3.selection.prototype.puddingLollipop=function(e){const t=this.nodes().map((function(e){const t=d3.select(e);let n=null,r=null,o=null,a=null,i=null,s=null,l=null,c=null,d=null,u=d3.select("#sortLollipopDiff"),p=d3.select("#sortLollipopPol"),f=t.datum();f=f.filter((e=>1==e.popularity&&Math.abs(e.difference)>.01&&"dailysun.co.za"!==e.site_clean&&""!==e.site_clean)),f=f.sort(((e,t)=>d3.descending(+e.polarity_women,+t.polarity_women)));let h=d3.max(f,(e=>e.polarity_women)),m=d3.min(f,(e=>e.polarity_women)),y=0,g=0,v=null,w=null,b=null,_=null,x=null;function k(){const e="sortLollipopDiff"===this.id?"difference":"polarity_women",t=f.sort(((t,n)=>d3.descending(+t[e],+n[e])));d3.selectAll(".lollipopTextbutton-active").classed("lollipopTextbutton-active",!1).classed("lollipopTextbutton",!0),d3.select(this).classed("lollipopTextbutton-active",!0),b.domain(t.map((e=>e.site_clean))),r.select(".polarityCompyAxis").transition().duration("1000").call(d3.axisLeft(b).tickSize(0)),o.selectAll(".polarityCompBubble").sort(((t,n)=>void 0!==t?d3.ascending(+t[e],+n[e]):"")).transition().duration("1000").attr("cy",((e,t)=>void 0!==e?b(e.site_clean):"-60")),o.selectAll(".polarityDiffAnnotation").sort(((t,n)=>d3.ascending(+t[e],+n[e]))).transition().duration("1000").attr("y",((e,t)=>b(e.site_clean))),o.selectAll(".polarityCompBubbleLine").sort(((t,n)=>d3.ascending(+t[e],+n[e]))).transition().duration("1000").attr("x1",((e,t)=>w(e.polarity_base))).attr("x2",((e,t)=>w(e.polarity_women))).attr("y1",((e,t)=>b(e.site_clean))).attr("y2",((e,t)=>b(e.site_clean)))}const A={init(){n=t.append("svg").attr("class","pudding-chart"),r=n.append("g").attr("class","g-axis"),_=r.append("g").attr("class","polarityCompxAxis"),x=r.append("g").attr("class","polarityCompyAxis"),w=d3.scaleLinear().domain([m,h]),o=n.append("g").attr("class","g-vis"),a=o.selectAll("gridline").data(f).join("line").attr("class","grid"),i=o.selectAll("myline").data(f).join("line").attr("class","polarityCompBubbleLine").attr("stroke","black").attr("stroke-width","2.5px"),s=o.selectAll("mycircle").data(f).join("circle").attr("class","polarityCompBubble polarityCompBubbleLeft"),l=o.selectAll("mycircle").data(f).join("circle").attr("class","polarityCompBubble polarityCompBubbleRight").attr("r","11"),c=o.selectAll("mycircle").data(f).join("text").attr("class","polarityDiffAnnotation").text((e=>(e.polarity_women-e.polarity_base)/e.polarity_base*100>0?"+"+Math.round((e.polarity_women-e.polarity_base)/e.polarity_base*100)+"%":Math.round((e.polarity_women-e.polarity_base)/e.polarity_base*100)+"%")),d=o.append("line").attr("stroke","black").attr("stroke-width","2.5px"),p.attr("class","lollipopTextbutton-active"),A.resize(),A.render()},resize:()=>(y=t.node().offsetWidth,y>=600?(v=160,o.attr("transform",`translate(${v}, 0)`),d3.selectAll(".polarityCompyAxis .tick text").attr("transform","translate(0,0)").style("text-anchor","end"),a.attr("x1",10),s.attr("r","4"),l.attr("r","11")):(v=40,o.attr("transform",`translate(${v}, 0)`),d3.selectAll(".polarityCompyAxis .tick text").attr("transform","translate(3,-25)").style("text-anchor","start"),a.attr("x1",0),s.attr("r","3"),l.attr("r","8")),y=t.node().offsetWidth-v-50,g=2230,n.attr("width",y+v+50).attr("height",g+0+0),_.attr("transform","translate(0,"+g+")").call(d3.axisBottom(w)),b=d3.scaleBand().range([0,g]).domain(f.map((e=>e.site_clean))).padding(1),x.attr("transform",`translate(${v},0)`).call(d3.axisLeft(b).tickSize(0)),w.range([v+50,y]),a.attr("x2",y).attr("y1",(function(e){return b(e.site_clean)})).attr("y2",(function(e){return b(e.site_clean)})),i.attr("x1",(function(e){return w(e.polarity_base)})).attr("x2",(function(e){return w(e.polarity_women)})).attr("y1",(function(e){return b(e.site_clean)})).attr("y2",(function(e){return b(e.site_clean)})),s.attr("cx",(function(e){return w(e.polarity_base)})).attr("cy",(function(e){return b(e.site_clean)})),l.attr("cx",(function(e){return w(e.polarity_women)})).attr("cy",(function(e){return b(e.site_clean)})),c.attr("x",(e=>w(e.polarity_women)-8)).attr("y",(e=>b(e.site_clean)+4)),A),render:()=>(u.on("click",k),p.on("click",k),A),data(e){return arguments.length?(f=e,t.datum(f),A):f}};return A.init(),A}));return t.length>1?t:t.pop()},d3.selection.prototype.puddingBubble=function(e){const t=this.nodes().map((function(e){const t=d3.select(e);let n=null,r=null,o=null,a=null,i=null,s=null,l=null,c=null,d=null,p=null,f=d3.select("#countrydropdown"),h=d3.select("#pubdropdown"),m=d3.selectAll(".tooltip"),y=t.datum(),g=y[0],v=y[1],w=y[2],b=null,_=null;g=g.filter((e=>0!=+e.monthly_visits&0!=+e[w]&"msn.com"!==e.site&"sports.yahoo.com"!==e.site&"finance.yahoo.com"!==e.site&"news.google.com"!==e.site&"news.yahoo.com"!==e.site&"bbc.com"!==e.site&"makeuseof.com"!==e.site&"which.co.uk"!==e.site&"espncricinfo.com"!==e.site&"seekingalpha.com"!==e.site&"prokerala.com"!==e.site)),b=g.map((e=>"polarity"===w?{site:e.site,polarity:e[w],monthly_visits:e.monthly_visits,country_of_pub:e.country_of_pub}:{site:e.site,bias:e[w],monthly_visits:e.monthly_visits,country_of_pub:e.country_of_pub}));const x=[{site:"nytimes.com",link:"nytimes.png"},{site:"dailymail.co.uk",link:"dailyMail.png"},{site:"cnn.com",link:"cnn.png"},{site:"bbc.co.uk",link:"bbc.png"},{site:"telegraph.co.uk",link:"telegraph.png"},{site:"washingtonpost.com",link:"washingtonPost.png"},{site:"forbes.com",link:"forbes.png"},{site:"abcnews.go.com",link:"abc.png"},{site:"foxnews.com",link:"foxNews.png"},{site:"ksl.com",link:"ksl.png"},{site:"bloomberg.com",link:"bloomberg.png"},{site:"breitbart.com",link:"breitbart.png"},{site:"popsugar.com",link:"popSugar.png"},{site:"nbcnews.com",link:"nbc.png"},{site:"buzzfeed.com",link:"buzzfeed.png"},{site:"cnet.com",link:"cnet.png"},{site:"politico.com",link:"politico.png"},{site:"usatoday.com",link:"usaToday.png"},{site:"nydailynews.com",link:"nyDailyNews.png"},{site:"businessinsider.com",link:"businessInsider.png"},{site:"aajtak.in",link:"aajtak.png"},{site:"espn.go.com",link:"espn.png"},{site:"huffingtonpost.com",link:"huffPost.png"}];let k=0,A=0;let C=null,E=null,S=d3.extent(b,(e=>+e.monthly_visits)),T=d3.scaleSqrt().domain(S),O=d3.scaleLinear().domain(S),M=null,D=null;function I(e,t,n){const r=d3.select(t),o=d3.map(e,(e=>e[n])).filter(L);"country_of_pub"===n?o.unshift("Country"):o.unshift("Newsroom"),r.selectAll("option").data(o).join("option").attr("value",(e=>"Country"===e||"Newsroom"===e?"":e)).text((e=>e))}function B(){const e=d3.select(this).property("value"),t=d3.select(this).property("id");let n=d3.selectAll(".forceCircles"),r=d3.selectAll(".forceLogo");"countrydropdown"===t&&(h.node().options[0].selected=!0,n.style("fill",(t=>t.country_of_pub.toLowerCase()===e.toLowerCase()?"#F7DC5B":"#FEFAF1")),n.style("stroke",(t=>t.site.toLowerCase()===e.toLowerCase()?"#E76B2D":"#282828")),n.style("stroke-width",(t=>t.site.toLowerCase()===e.toLowerCase()?"3":"1")),n.style("opacity",(t=>t.country_of_pub.toLowerCase()===e.toLowerCase()||""===e?"1":"0.2")),r.style("opacity",(t=>t.country_of_pub.toLowerCase()===e.toLowerCase()||""===e?"1":"0.2"))),"pubdropdown"===t&&(f.node().options[0].selected=!0,n.style("fill",(t=>t.site.toLowerCase()===e.toLowerCase()?"#F7DC5B":"#FEFAF1")),n.style("stroke",(t=>t.site.toLowerCase()===e.toLowerCase()?"#E76B2D":"#282828")),n.style("stroke-width",(t=>t.site.toLowerCase()===e.toLowerCase()?"3":"1")),n.style("opacity",(t=>t.site.toLowerCase()===e.toLowerCase()||""===e?"1":"0.2")),r.style("opacity",(t=>t.site.toLowerCase()===e.toLowerCase()||""===e?"1":"0.2")))}function L(e,t,n){return n.indexOf(e)===t}function F(){let[e,t]=d3.pointer(event),n=e>window.innerWidth/2?m.node().offsetWidth+-50:50,r=d3.select(this).attr("id");r=r.split("-"),r=r[0];let o=r.replace(/\./g,""),a=(d3.selectAll(".forceCircles").style("opacity",.2),d3.selectAll(".forceLogo").style("opacity",.2),d3.select(this)),i=d3.selectAll(`.forceLogo-${o}`);a.style("stroke-width",3).style("stroke","#E76B2D").style("opacity",1).style("fill","#F7DC5B"),i.style("opacity",1);let s=v.filter((e=>e.site===r)),l=Math.floor(Math.random()*s.length);m.classed("is-visible",!0),k>=600?m.style("top",`${t}px`).style("left",e-n+"px").style("bottom","auto"):m.style("bottom","0px").style("left","0px").style("top","auto"),m.html(`<p class="tt-date">${d3.timeFormat("%b %Y")(new Date(s[l].time))} | ${s[l].site}</p>\n                      <p class="tt-hed">${s[l].headline_no_site}</p>`)}function N(){m.classed("is-visible",!1),d3.selectAll(".forceCircles").style("stroke-width","1").style("stroke","#282828").style("opacity",1).style("fill","#FEFAF1"),d3.selectAll(".forceLogo").style("opacity",1)}const R={init(){n=t.append("svg").attr("class","pudding-chart"),r=n.append("g").attr("class","g-axis"),c=n.append("g").attr("class","g-legend"),d=c.append("g"),o=n.append("g").attr("class","g-vis"),R.resize(),R.render()},resize(){k=t.node().offsetWidth-50-50,A=t.node().offsetHeight-50-120;let e=k>=500?18:12;T.range([3,k/e]),O.range([12,k/e]),D=d3.max(b,(e=>+e.monthly_visits)),D=T(D),n.attr("width",k+50+50).attr("height",A+50+120),o.attr("width",k+50+50).attr("height",A+50+120),C=d3.scaleLinear().range([100,k-2*D]).domain(d3.extent(b,(e=>+e[w]))),E=d3.scaleLinear().range([170,A-2*D]).domain(d3.extent(b,(e=>+e[w]))),_=[{level:"",radius:T(1e7),y:A+75,x:k/2+D,anchor:"end",xtext:k/2.235,ytext:A+53,id:""},{level:"",radius:T(1e8),y:A+75,x:k/2+1.5*D,id:""},{level:"1B Monthly Viewers",radius:T(1e9),y:A+75,x:k/2+2.75*D,anchor:"middle",xtext:k/2+2.75*D,ytext:A+60-10,id:""}];let r=k>=500?-D:-k/2-D/1.5;c.attr("transform",`translate(${r},50)`),d.selectAll("circle").data(_).join("circle").attr("cx",(e=>e.x)).attr("cy",(e=>e.y)).attr("r",(e=>e.radius)).attr("class","legendBubble"),p=c.selectAll("text").data(_).join("text").text((e=>e.level)).attr("x",(e=>e.xtext)).attr("y",(e=>e.ytext)).attr("class","themesText").style("text-anchor",(e=>e.anchor)).call(u,10),M=d3.forceSimulation().nodes(b).force("x",d3.forceX().x((function(e){return C(+e[w])})).strength(1)).force("y",d3.forceY(A/2).strength(.2)).force("collide",d3.forceCollide((e=>T(+e.monthly_visits)))).stop();for(var f=0;f<300;f++)M.tick();return a=o.selectAll("circle").data(b),i=o.selectAll("image").data(b),s=a.join("circle").attr("class","forceCircles").attr("id",(e=>`${e.site}-circle`)).style("opacity","1").attr("r",(e=>T(+e.monthly_visits))).on("mouseenter",F).on("mouseleave",N),a.merge(s).attr("cx",(function(e){return k>=500?e.x:e.y})).attr("cy",(function(e){return k>=500?e.y:e.x})),l=i.join("svg:image").attr("class",(function(e){return`forceLogo-${e.site.replace(/\./g,"")} forceLogo`})).attr("transform",(function(e){let t=T(+e.monthly_visits);return`translate(-${t/2}, -${t/2})`})).attr("width",(e=>O(+e.monthly_visits))).attr("height",(e=>O(+e.monthly_visits))).attr("xlink:href",(function(e){return+e.monthly_visits>15e7?`assets/images/logos/${x.filter((t=>t.site==e.site))[0].link}`:""})).attr("x",(function(e){return k>=500?e.x:e.y})).attr("y",(function(e){return k>=500?e.y:e.x})),R},render:()=>(o.attr("transform","translate(50, 50)"),I(g,"#countrydropdown","country_of_pub"),I(g,"#pubdropdown","site"),f.on("change",B),h.on("change",B),R),data(e){return arguments.length?(y=e,t.datum(y),R):y}};return R.init(),R}));return t.length>1?t:t.pop()};let h=[{uid:1,name:"Lady Gaga ends deal with Target over anti-gay issues",category:4,categories:"race, ethnicity and identity",date:new Date(2011,2,9)},{uid:1,name:"Horrifying gang rape and murder in New Delhi, India",category:4,categories:"crime and violence",date:new Date(2012,11,16)},{uid:1,name:"The U.S. military removes a ban against women serving in combat positions",category:4,categories:"empowerment",date:new Date(2013,1,24)},{uid:1,name:"On May 8, 2013, Cleveland Kidnapping Suspect Ariel Castro is charged with four counts of kidnapping and three counts of rape.",category:4,categories:"crime and violence",date:new Date(2013,4,8)},{uid:1,name:"A new Pentagon report found a 50% increase in sexual assault reports in 2013",category:4,categories:"crime and violence",date:new Date(2014,5,1)},{uid:1,name:"Caitlyn Jenner comes out in an interview",category:4,categories:"race, ethnicity and identity",date:new Date(2015,4,24)},{uid:1,name:"A survey for the Department of Defense finds that in the past year 52% of active service members who reported sexual assault had experienced retaliation in the form of professional, social, and administrative actions or punishments.",category:4,categories:"crime and violence",date:new Date(2015,4,18)},{uid:2,name:"People v. Turner: Brock Turner is arrested for sexually assaulting an unconscious woman",category:4,categories:"crime and violence",date:new Date(2015,1,18)},{uid:1,name:"#EndRapeCulture in South Africa",category:4,categories:"empowerment",date:new Date(2016,4,0)},{uid:2,name:"Hillary Clinton becomes the first woman to receive a presidential nomination from a major political party",category:4,categories:"empowerment",date:new Date(2016,7,26)},{uid:3,name:"Trump: âGrab âem by the pussyâ",category:4,categories:"crime and violence",date:new Date(2016,10,8)},{uid:4,name:"People v. Turner: Brock Turner is convicted for three counts of felony sexual assault",category:4,categories:"crime and violence",date:new Date(2016,3,30)},{uid:5,name:"People v. Turner: Brock Turner is released after spending 3 months in jail",category:4,categories:"crime and violence",date:new Date(2016,9,2)},{uid:1,name:"Multiple actors, including Meryl Streep, come forward and say they were groped by Dustin Hoffman on set.",category:4,categories:"crime and violence",date:new Date(2017,1,1)},{uid:1,name:"#MeToo in U.S.A.",category:4,categories:"empowerment",date:new Date(2017,10,15)},{uid:2,name:"Harvey Weinstein Trial",category:4,categories:"crime and violence",date:new Date(2017,10,0)},{uid:3,name:"#ChurchToo in U.S.A.",category:4,categories:"empowerment",date:new Date(2017,11,0)},{uid:4,name:"#MeTooSTEM and removal of Francisco J. Ayala from UC Irvine",category:4,categories:"empowerment",date:new Date(2017,11,0)},{uid:5,name:"Release of Wonder Woman",category:4,categories:"empowerment",date:new Date(2017,5,15)},{uid:6,name:"Larry Nassar U.S. Gymnastics doctor sexual assault scandal",category:4,categories:"crime and violence",date:new Date(2017,12,0)},{uid:7,name:"Jessie Reyez releases âGatekeeperâ",category:4,categories:"empowerment",date:new Date(2017,4,26)},{uid:8,name:"The 2017 Westminster sexual scandals in the U.K. and resignation of Sir Michael Fallon",category:4,categories:"crime and violence",date:new Date(2017,11,0)},{uid:8,name:"Multiple occurrences of muslim women being forced to remove Hijab in the U.S. and U.K.",category:4,categories:"crime and violence",date:new Date(2017,0,0)},{uid:1,name:"Meghan Markleâs wedding to Prince Harry in U.K.",category:4,categories:"no theme",date:new Date(2018,5,19)},{uid:2,name:"MEE TOO bill in U.S. Congress",category:4,categories:"empowerment",date:new Date(2018,1,18)},{uid:3,name:"Priyanka Chopra marries Nick Jonas in India",category:4,categories:"no theme",date:new Date(2018,12,1)},{uid:4,name:"People v. Turner: Brock Turner is convicted by jury trial of three counts of felony sexual assault",category:4,categories:"crime and violence",date:new Date(2018,1,0)},{uid:5,name:"Googleâs Andy Rubin sexual misconduct scandal",category:4,categories:"crime and violence",date:new Date(2018,10,25)},{uid:6,name:"Global Womenâs March",category:4,categories:"empowerment",date:new Date(2018,1,20)},{uid:7,name:"#MeTooMilitary in U.S.A",category:4,categories:"empowerment",date:new Date(2018,1,0)},{uid:8,name:"#MeToo in India",category:4,categories:"empowerment",date:new Date(2018,10,0)},{uid:9,name:"Mass sexual assaults during the 2018 new year's celebrations in Bangalore",category:4,categories:"crime and violence",date:new Date(2018,12,0)},{uid:10,name:"Indian actress Tanushree Dutta accuses Nana Patekar of sexual harassment",category:4,categories:"empowerment",date:new Date(2018,9,27)},{uid:11,name:"Indian minister of state for External Affairs, MJ Akbar is accused of sexual harassment by several female colleagues through the 'Me Too' Movement in India",category:4,categories:"crime and violence",date:new Date(2018,10,0)},{uid:12,name:"Indian music director Anu Malik is suspended from the jury panel of Indian Idol 2018, after facing multiple allegations of sexual harassment",category:4,categories:"crime and violence",date:new Date(2018,10,21)},{uid:1,name:"Greta Thunberg: Climate Action Summit and sail to NYC",category:4,categories:"empowerment",date:new Date(2019,8,28)},{uid:2,name:"Release of âSurviving R. Kellyâ documentary",category:4,categories:"empowerment",date:new Date(2019,1,0)},{uid:3,name:"Arrest of R. Kelly for 10 counts of sexual abuse against four women",category:4,categories:"crime and violence",date:new Date(2019,2,0)},{uid:1,name:"#SayHerName: Murder of Breonna Taylor",category:4,categories:"crime and violence",date:new Date(2020,3,0)},{uid:2,name:"International Womenâs Cricket T20",category:4,categories:"empowerment",date:new Date(2020,2,0)},{uid:2,name:"Dalit girl gangraped in Hathras, Uttar Pradesh, India",category:4,categories:"crime and violence",date:new Date(2020,8,14)},{uid:2,name:"Healthcare workers all over the world receive media attention for their crucial role in the COVID-19 pandemic.",category:4,categories:"empowerment",date:new Date(2020,4,0)},{uid:3,name:"Rape and murder of Vanessa GuillÃ©n in U.S. military",category:4,categories:"crime and violence",date:new Date(2020,4,22)},{uid:1,name:"16 year old Ma'Khia Bryant is fatally shot by police officer Nicholas Reardon in Columbus, Ohio",category:4,categories:"crime and violence",date:new Date(2021,4,20)},{uid:2,name:"Kamala Harris is sworn in as the first woman and first woman of color vice president of the United States",category:4,categories:"empowerment",date:new Date(2021,1,20)},{uid:3,name:"Oprah with Meghan and Harry and âMegxitâ",category:4,categories:"empowerment",date:new Date(2021,3,7)},{uid:3,name:"Study finds that Indian women politicians face more trolling than US, UK counterparts",category:4,categories:"no theme",date:new Date(2021,0,24)},{uid:3,name:"40% Indian women fear online trolls as they access Internet: Nielson report",category:4,categories:"no theme",date:new Date(2019,11,17)},{uid:3,name:"Indian central government passes the Citizenship Amendment Act, by providing a pathway to Indian citizenship for persecuted religious minorities from Afghanistan, Bangladesh and Pakistan who are Hindus, Sikhs, Buddhists, Jains, Parsis or Christians, and arrived in India before the end of December 2014",category:4,categories:"race, ethnicity and identity",date:new Date(2019,11,12)},{uid:3,name:"India saw, for the first time, a sustained countrywide movement led by Women against the CAA-NRC bills",category:4,categories:"empowerment",date:new Date(2020,0,13)},{uid:3,name:"defamation case filed by former Union minister M J Akbar's against journalist Priya Ramani who had accused him of sexual harassment",category:4,categories:"crime and violence",date:new Date(2021,4,5)},{uid:3,name:"A majority judgement which declared the prohibition of entry of women aged between 10 and 50 into Sabarimala temple, as unconstitutional and discriminatory",category:4,categories:"race, ethnicity and identity",date:new Date(2018,8,28)},{uid:3,name:"An Indian Supreme Court Bench declared muslim instantaneous divorce, triple Talaq, as unconstitutional",category:4,categories:"race, ethnicity and identity",date:new Date(2019,6,31)},{uid:3,name:"Indian court grants bail to Nupur Talwar, a dentist accused in the twin murder of her daughter and domestic help",category:4,categories:"crime and violence",date:new Date(2019,6,31)},{uid:3,name:"Kanimozhi Karunanidhi, Member of Parliament, accused in 2G scam, refused bail",category:4,categories:"no theme",date:new Date(2011,4,11)},{uid:3,name:"Accused who set fire to the rape survivor from Unnao, Uttar Pradesh, India, out on bail",category:4,categories:"crime and violence",date:new Date(2019,11,5)},{uid:3,name:"Saudi Arabia lifts travel restrictions on its women",category:4,categories:"empowerment",date:new Date(2019,7,2)},{uid:3,name:"Saudi Arabia makes it legal for women to drive",category:4,categories:"empowerment",date:new Date(2018,5,24)},{uid:3,name:"Multiple women enter inner sanctum of temples across the country, after protest",category:4,categories:"race, ethnicity and identity",date:new Date(2016,2,3)},{uid:3,name:"Section 377: Indian Supreme Court legalizes consensual sexual conduct between adults of the same sex",category:4,categories:"empowerment",date:new Date(2018,8,6)},{uid:3,name:"Womenâs Cricket World Cup 2017",category:4,categories:"empowerment",date:new Date(2017,5,23)},{uid:3,name:"The Marikana massacre was the killing of 34 miners by the South African Police Service (SAPS). It took place on 16 August 2012, and was the most lethal use of force by South African security forces against civilians since 1976.",category:4,categories:"crime and violence",date:new Date(2012,7,16)},{uid:3,name:"On 11 April 2015, several South Africans attacked foreigners in a xenophobic attack in Durban, South Africa, which extended to some parts of Johannesburg. Several people, both foreign and South African alike, were killed with some of the killings captured on camera.",category:4,categories:"crime and violence",date:new Date(2015,3,11)},{uid:3,name:"Brutal gang rape and subsequent death of South African teenager",category:4,categories:"crime and violence",date:new Date(2013,1,2)},{uid:3,name:"Monica Lewinsky breaks decade-long media silence",category:4,categories:"empowerment",date:new Date(2014,4,6)}];d3.selection.prototype.puddingTemporalLine=function(e){const t=this.nodes().map((function(e){const t=d3.select(e);let n=null,r=null,o=null,a=null,i=null,s=null,l=null,c=null,d=null,u=null,p=d3.selectAll(".tooltip"),f=t.datum(),m=f[0],y=(f[1],f[2]),g=f[3],v=f[4],w=null;var b=m.filter((e=>e.country===y));const _=["crime and violence","female stereotypes","empowerment","race, ethnicity and identity"],x=({data:e,sortBy:t,sortField:n})=>{const r=t.reduce(((e,t,n)=>({...e,[t]:n})),{});return e.sort(((e,t)=>r[e[n]]-r[t[n]]))};let k=function(e){const t=d3.rollups(e.filter((e=>e.theme===_[0])).sort(((e,t)=>d3.ascending(e.freq_prop_headlines,t.freq_prop_headlines))),(e=>e[0].year),(e=>e.word)).sort(((e,t)=>d3.ascending(e[1],t[1]))).map((e=>e[0])),n=d3.rollups(e.filter((e=>e.theme===_[1])).sort(((e,t)=>d3.ascending(e.freq_prop_headlines,t.freq_prop_headlines))),(e=>e[0].year),(e=>e.word)).sort(((e,t)=>d3.ascending(e[1],t[1]))).map((e=>e[0])),r=d3.rollups(e.filter((e=>e.theme===_[2])).sort(((e,t)=>d3.ascending(e.freq_prop_headlines,t.freq_prop_headlines))),(e=>e[0].year),(e=>e.word)).sort(((e,t)=>d3.ascending(e[1],t[1]))).map((e=>e[0])),o=d3.rollups(e.filter((e=>e.theme===_[3])).sort(((e,t)=>d3.ascending(e.freq_prop_headlines,t.freq_prop_headlines))),(e=>e[0].year),(e=>e.word)).sort(((e,t)=>d3.ascending(e[1],t[1]))).map((e=>e[0]));return t.concat(n,r,o)}(b=x({data:b,sortBy:_,sortField:"theme"}));const A=d3.map(b,(e=>e.word)).filter((function(e,t,n){return n.indexOf(e)===t})).length/1;let C=d3.cross(d3.range(A),d3.range(1),((e,t)=>({row:e,col:t})));b=b.map((e=>({year:e.year,frequency:e[g],word:e.word,word_type:e.word_type,theme:e.theme})));let E,S,T,O=d3.rollup(b,(e=>e.map((({year:e,frequency:t})=>({date:new Date(e,0,1),frequency:t})))),(e=>e.word)),M=d3.zip(x({data:Array.from(O),sortBy:k,sortField:"0"}),C).map((([[e,t],{row:n,col:r}])=>({word:e,rates:t,row:n,col:r}))),D=M[0].rates[0].date,I=M[0].rates[M[0].rates.length-1].date,B=(new Date(2010,0).getTime(),new Date(2021,0).getTime(),h),L=0,F=0,N=null,R=null,P=null,j=null;function q(e,t){c.attr("opacity",.125),l.attr("opacity",.25),d3.selectAll(".wordText").attr("opacity",.125),d3.select("#area-"+t.word).attr("opacity",.85),d3.select("#line-"+t.word).attr("opacity",1),d3.select("#text"+t.word).attr("opacity",1),console.log(t.word);let n=v.filter((e=>e.headline_no_site.toLowerCase().match(e.word))),r=Math.floor(Math.random()*n.length),[o,a]=d3.pointer(e),i=o>window.innerWidth/2?p.node().offsetWidth+-50:50;p.classed("is-visible",!0),L>=600?p.style("top",a+"px").style("left",o-i+"px").style("bottom","auto"):p.style("bottom","0px").style("left","0px").style("top","auto"),p.html(`<p class="tt-date">${d3.timeFormat("%m/%Y")(new Date(n[r].time))} | ${n[r].site}</p><p class="tt-hed">${n[r].headline_no_site}</p>`)}function U(){c.attr("opacity",.5),l.attr("opacity",1),d3.selectAll(".wordText").attr("opacity",1),p.classed("is-visible",!1)}const $={init(){n=t.append("svg").attr("class","pudding-chart");let e=n.append("defs"),p=e.append("linearGradient").attr("id","linear-gradient-F");p.attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%"),p.append("stop").attr("offset","0%").attr("stop-color","#F2C5D3"),p.append("stop").attr("offset","90%").attr("stop-color","#FEFAF1"),p.append("stop").attr("offset","100%").attr("stop-color","#FEFAF1");let f=e.append("linearGradient").attr("id","linear-gradient-V");f.attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%"),f.append("stop").attr("offset","0%").attr("stop-color","#f76e45"),f.append("stop").attr("offset","90%").attr("stop-color","#FEFAF1"),f.append("stop").attr("offset","100%").attr("stop-color","#FEFAF1");let h=e.append("linearGradient").attr("id","linear-gradient-E");h.attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%"),h.append("stop").attr("offset","0%").attr("stop-color","#A35FD0"),h.append("stop").attr("offset","90%").attr("stop-color","#FEFAF1"),h.append("stop").attr("offset","100%").attr("stop-color","#FEFAF1");let m=e.append("linearGradient").attr("id","linear-gradient-R");m.attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%"),m.append("stop").attr("offset","0%").attr("stop-color","#53B67C"),m.append("stop").attr("offset","90%").attr("stop-color","#FEFAF1"),m.append("stop").attr("offset","100%").attr("stop-color","#FEFAF1"),r=n.append("g").attr("class","g-axis"),a=d3.scaleBand().domain(d3.range(A)).paddingInner(-1),i=d3.scaleBand().domain(d3.range(1)).paddingInner(.2),o=n.append("g").attr("class","g-vis"),s=o.append("g").selectAll("g").data(M).join("g").attr("class",(e=>"female stereotypes"===b.filter((t=>t.word===e.word))[0].theme?"biasCells":"empowerment"===b.filter((t=>t.word===e.word))[0].theme?"empCells":"crime and violence"===b.filter((t=>t.word===e.word))[0].theme?"crimeCells":"race, ethnicity and identity"===b.filter((t=>t.word===e.word))[0].theme?"raceCells":"important people"===b.filter((t=>t.word===e.word))[0].theme?"peopleCells":"ntCells")).attr("transform",(e=>`translate(${i(e.col)}, ${a(e.row)})`)).on("mouseover",((e,t)=>q(e,t))).on("mouseleave",((e,t)=>U())),c=s.append("path").attr("fill",(e=>"female stereotypes"===b.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-F)":"empowerment"===b.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-E)":"crime and violence"===b.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-V)":"race, ethnicity and identity"===b.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-R)":"important people"===b.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-P)":"url(#linear-gradient-NT)")).attr("opacity",.5).attr("class","wordArea").attr("id",(e=>`area-${e.word}`)).on("mouseover",((e,t)=>q(e,t))).on("mouseleave",((e,t)=>U())),l=s.append("path").style("stroke",(e=>"female stereotypes"===b.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-F)":"empowerment"===b.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-E)":"crime and violence"===b.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-V)":"race, ethnicity and identity"===b.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-R)":"important people"===b.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-P)":"url(#linear-gradient-NT)")).attr("stroke-width",1).attr("fill","none").attr("class","wordArea").attr("id",(e=>`line-${e.word}`)).on("mouseover",((e,t)=>q(e,t))).on("mouseleave",((e,t)=>U())),u=o.append("rect").attr("class","timeRuler"),j=d3.select("div#stickyXaxis").append("svg").attr("class","stickyAxis"),P=j.append("g"),d=j.append("g"),$.resize(),$.render()},resize(){L=t.node().offsetWidth-80-0,F=t.node().offsetHeight-50-20,n.attr("width",L+80+0).attr("height",F+50+20),a.range([0,F]),i.range([0,L]),N=d3.scaleTime().domain([D,I]).range([0,i.bandwidth()]),R=d3.axisBottom(N).ticks(10).tickSizeOuter(0).tickSizeInner(0).tickPadding(30).tickFormat(((e,t)=>0==t||3==t||6==t||9==t||11==t?d3.timeFormat("%Y")(new Date(e)):""));let e=Object.fromEntries(M.map((e=>{const t=d3.max(e.rates,(e=>+e.frequency)),n=d3.scaleLinear().domain([0,t]).range([a.bandwidth(),0]).nice();return E=d3.curveMonotoneX,S=d3.area().x((e=>N(e.date))).y1((e=>n(e.frequency))).y0((e=>n(0))).curve(d3.curveMonotoneX),T=d3.line().x((e=>N(e.date))).y((e=>n(e.frequency))).curve(d3.curveMonotoneX),[e.word,{y:n,area:S,line:T}]})));return s.attr("transform",(e=>`translate(${i(e.col)}, ${a(e.row)})`)),c.attr("d",(t=>e[t.word].area(t.rates))),l.attr("d",(t=>e[t.word].line(t.rates))),s.each((function(t){const n=d3.select(this).attr("class","SMCell").attr("id",(e=>"cell"+e.word));d3.axisLeft(e[t.word].y).ticks(2).tickSizeOuter(0),n.append("g").attr("class","catLabel").append("text").attr("x",-10).attr("y",a.bandwidth()).attr("class","wordText").attr("id",(e=>"text"+e.word)).text(t.word).on("mouseover",((e,t)=>q(e,t))).on("mouseleave",((e,t)=>U()))})),j.attr("transform","translate(80, 0)").attr("width",L+80+0).attr("height",200),P.attr("transform",`translate(${i(0)}, 75)`).call(R),function(e,{radius:t=1,x:n=(e=>e)}={}){const r=t**2,o=e.map(((t,r)=>({x:+n(t,r,e),data:t}))).sort(((e,t)=>e.x-t.x));let a=null,i=null;function s(e,t){let n=a;for(;n;){if(r-.001>(n.x-e)**2+(n.y-t)**2)return!0;n=n.next}return!1}for(const e of o){for(;a&&a.x<e.x-r;)a=a.next;if(s(e.x,e.y=0)){let t=a;e.y=1/0;do{let n=t.y+Math.sqrt(r-(t.x-e.x)**2),o=t.y-Math.sqrt(r-(t.x-e.x)**2);Math.abs(n)<Math.abs(e.y)&&!s(e.x,n)&&(e.y=n),Math.abs(o)<Math.abs(e.y)&&!s(e.x,o)&&(e.y=o),t=t.next}while(t)}e.next=null,null===a?a=i=e:i=i.next=e}w=o}(B.filter((e=>e.date<=I)),{radius:11.5,x:e=>N(e.date)}),d.attr("transform",`translate(${i(0)}, 75)`).selectAll("circle").data(w).join("circle").attr("class","event-circle").attr("cx",(e=>e.x)).attr("cy",(e=>e.y)).attr("r",5).attr("fill",(e=>"empowerment"===e.data.categories?"#A35FD0":"crime and violence"===e.data.categories?"#f76e45":"race, ethnicity and identity"===e.data.categories?"#53B67C":"people and places"===e.data.categories?"#5787f2":"lightgrey")).attr("stroke",(e=>"empowerment"===e.data.categories?"#A35FD0":"crime and violence"===e.data.categories?"#f76e45":"race, ethnicity and identity"===e.data.categories?"#53B67C":"people and places"===e.data.categories?"#5787f2":"lightgrey")).on("mouseover",((e,t)=>function(e,t){let n=d3.select(e.currentTarget);d3.selectAll(".event-circle").style("opacity","0.5"),n.style("opacity","1").style("stroke","#282828").style("stroke-width",2),u.attr("transform",`translate(${i(0)}, -${50/3})`).attr("x",N(t.date)-9).attr("y",0).attr("height",F).attr("width",20).style("opacity",1);let[r,o]=d3.pointer(e),a=r>window.innerWidth/2?p.node().offsetWidth+-50:50;p.classed("is-visible",!0),L>=600?p.style("top","10px").style("left",r-a+"px").style("bottom","auto"):p.style("bottom","0px").style("left","0px").style("top","auto"),p.html(`<p class="tt-date">${d3.timeFormat("%m/%Y")(t.date)}</p><p class="tt-hed">${t.name}</p>`)}(e,t.data))).on("mouseleave",((e,t)=>(t.data,u.style("opacity",0),d3.selectAll(".event-circle").style("opacity","1").style("stroke","none"),void p.classed("is-visible",!1)))),$},render:()=>(o.attr("transform","translate(80, 50)"),$),data(e){return arguments.length?(f=e,t.datum(f),$):f}};return $.init(),$}));return t.length>1?t:t.pop()},n(337);var m=n(99),y=n.n(m);let g,v,w,b,_,x,k,A,C,E,S,T,O,M,D,I,B,L=["headlines_site_rapi.csv","headlines_cl_sent_rapi_reduced_bubble_120821.csv","country_time_freqrank_rapi_clean_120821.csv","polarity_comparison.csv","country_freq_pivoted_all_091221.csv","word_themes_all_101221.csv","word_themes_rank_091221.csv","word_themes_freq_091221.csv","sentiment_comparison.csv","headlines_cl_sent_rapi_reduced_temp_120821.csv"],F=null,N=null,R=null,P=null,j=null,q=null;const U=d3.select("#stickyStackedChart"),$=d3.selectAll("#stackedChartLegend .step"),z=d3.selectAll("#timeSeriesChart"),H=d3.select("#lollipopChart");let V=null,W=d3.select("#smChart"),K=d3.select("#countrydropdownTemporal"),G=d3.selectAll(".stackedBarTextAnnotation"),Y=d3.selectAll(".btn-theme"),J=d3.selectAll(".tooltipTL"),Q=d3.selectAll("#shuffle-headlines");const X=y()();function Z(e){var t,n;$.classed("is-active",((t,n)=>n===e.index)),t=e.index,n=e.direction,F.updateChart(t,n)}function ee(e){q=W.datum(e).puddingTemporalLine()}function te(e,t){window.scroll({behavior:"smooth",left:0,top:e.offsetTop+t})}function ne(){let e=d3.select(this).attr("value");d3.selectAll(".stackedBars rect").attr("opacity","0.3"),d3.selectAll(`.stackedBars .${e}_class`).attr("opacity","1")}function re(){let e=d3.select(this).attr("value");"crimeandviolence"!==e&&"femalestereotypes"!==e&&"empowerment"!==e&&"peopleandplaces"!==e&&"raceethnicityandidentity"!==e||(d3.selectAll(".stackedBars rect").attr("opacity","0.5"),d3.selectAll(".stackedBars .crimeandviolence_class").attr("opacity","1"),d3.selectAll(".stackedBars .femalestereotypes_class").attr("opacity","1"),d3.selectAll(".stackedBars .empowerment_class").attr("opacity","1"),d3.selectAll(".stackedBars .peopleandplaces_class").attr("opacity","1"),d3.selectAll(".stackedBars .raceethnicictyandidentity_class").attr("opacity","1"))}function oe(){const e=this.value;console.log(e),d3.select("#smChart svg").remove(),d3.select("#stickyXaxis svg").remove(),B=[w,M,e,I],ee(B)}function ae(){let e=d3.select(this),t=e.attr("id").split("-")[1];Y.classed("active-btn-violence",!1),Y.classed("active-btn-empowerment",!1),Y.classed("active-btn-race",!1),Y.classed("active-btn-stereotypes",!1),e.classed(`active-btn-${t}`,!0);let n=d3.select("#smChart").node();"violence"===t&&te(n,-100),"stereotypes"===t&&te(n,3932),"empowerment"===t&&te(n,8038),"race"===t&&te(n,12290)}function ie(){let e=v,t=(e.length,[]);for(;t.length<3;){let n=Math.floor(Math.random()*e.length)+1;-1===t.indexOf(n)&&t.push(n)}t.forEach(((t,n)=>{let r=n,o=J.filter(((e,t)=>t==r)),a=o.select(".deets"),i=o.select(".headline"),s=e[t].site,l=e[t].time,c=`${new Date(l).toLocaleString("en-US",{month:"long"})} ${new Date(l).getUTCFullYear()} | ${s}`,d=e[t].headline_no_site;a.text(`${c}`),i.text(`${d}`)}))}function se(){const e=Math.floor(.75*window.innerHeight);$.style("height",e+"px");const t=d3.select(".scrolly figure");d3.select("body").node().offsetWidth,t.style("height",window.innerHeight+"px");let n=0;const r=d3.select("body").node().offsetWidth;n!==r&&(n=r,F.resize(),N.resize(),R.resize(),P.resize(),j.resize(),q.resize())}var le={init:function(){(function(e){if("string"==typeof e)return l(e);const t=e.map(l);return Promise.all(t)})(L).then((e=>{g=e[0],v=e[1],w=e[2],b=e[3],_=e[4],x=e[5],k=e[6],A=e[7],C=e[8],E=e[9],M=[2009,2022],D="all countries",I="freq_prop_headlines",O=[_,x,k,A],S=[g,v,"bias"],T=[g,v,"polarity"],B=[w,M,"all countries",I,E],X.setup({container:".scrolly",graphic:".scrolly figure",text:".scrolly article",step:"#stackedChartLegend .step",offset:.7}).onStepEnter(Z),function(e){F=U.datum(e).puddingStackedBar()}(O),function(e){N=z.datum(e).puddingTimeSeriesLine()}(C),function(e){R=H.datum(e).puddingLollipop()}(b),function(e){V=d3.select("#chartB"),P=V.datum(e).puddingBubble()}(S),function(e){V=d3.select("#chartP"),j=V.datum(e).puddingBubble()}(T),ee(B),f()({selector:"#cellviolence",offset:.5,enter:()=>{Y.classed("active-btn-violence",!1),Y.classed("active-btn-empowerment",!1),Y.classed("active-btn-race",!1),Y.classed("active-btn-stereotypes",!1),d3.selectAll("#btn-violence").classed("active-btn-violence",!0)}}),f()({selector:"#cellemotional",offset:.5,enter:()=>{Y.classed("active-btn-violence",!1),Y.classed("active-btn-empowerment",!1),Y.classed("active-btn-race",!1),Y.classed("active-btn-stereotypes",!1),d3.selectAll("#btn-stereotypes").classed("active-btn-stereotypes",!0)},exit:()=>{Y.classed("active-btn-violence",!1),Y.classed("active-btn-empowerment",!1),Y.classed("active-btn-race",!1),Y.classed("active-btn-stereotypes",!1),d3.selectAll("#btn-violence").classed("active-btn-violence",!0)}}),f()({selector:"#cellmayor",offset:.5,enter:()=>{Y.classed("active-btn-violence",!1),Y.classed("active-btn-empowerment",!1),Y.classed("active-btn-race",!1),Y.classed("active-btn-stereotypes",!1),d3.selectAll("#btn-empowerment").classed("active-btn-empowerment",!0)},exit:()=>{Y.classed("active-btn-violence",!1),Y.classed("active-btn-empowerment",!1),Y.classed("active-btn-race",!1),Y.classed("active-btn-stereotypes",!1),d3.selectAll("#btn-stereotypes").classed("active-btn-stereotypes",!0)}}),f()({selector:"#cellasian",offset:.5,enter:()=>{Y.classed("active-btn-violence",!1),Y.classed("active-btn-empowerment",!1),Y.classed("active-btn-race",!1),Y.classed("active-btn-stereotypes",!1),d3.selectAll("#btn-race").classed("active-btn-race",!0)},exit:()=>{Y.classed("active-btn-violence",!1),Y.classed("active-btn-empowerment",!1),Y.classed("active-btn-race",!1),Y.classed("active-btn-stereotypes",!1),d3.selectAll("#btn-empowerment").classed("active-btn-empowerment",!0)}}),se(),G.on("mouseenter",ne),G.on("mouseleave",re),d3.select("#countrydropdownTemporal").selectAll("option").data(["all countries","India","South Africa","UK","USA"]).join("option").attr("value",(e=>e)).text((e=>e)),K.node().options[0].selected=!0,K.on("change",oe),Y.on("click",ae),Q.on("click",ie)})).catch(console.error)},resize:se};const ce=[{image:"2018_02_stand-up",url:"2018/02/stand-up",hed:"The Structure of Stand-Up Comedy"},{image:"2018_04_birthday-paradox",url:"2018/04/birthday-paradox",hed:"The Birthday Paradox Experiment"},{image:"2018_11_boy-bands",url:"2018/11/boy-bands",hed:"Internet Boy Band Database"},{image:"2018_08_pockets",url:"2018/08/pockets",hed:"Womenâs Pockets are Inferior"}];let de=null;function ue(e){return`\n\t<a class='footer-recirc__article' href='https://pudding.cool/${e.url}' target='_blank' rel='noopener'>\n\t\t<img class='article__img' src='https://pudding.cool/common/assets/thumbnails/640/${e.image}.jpg' alt='${e.hed}'>\n\t\t<p class='article__headline'>${e.hed}</p>\n\t</a>\n\t`}var pe=function(){!function(e){const t=new XMLHttpRequest,n=`https://pudding.cool/assets/data/stories.json?v=${Date.now()}`;t.open("GET",n,!0),t.onload=()=>{if(t.status>=200&&t.status<400){const n=JSON.parse(t.responseText);e(n)}else e(ce)},t.onerror=()=>e(ce),t.send()}((e=>{de=e,function(){const e=window.location.href,t=de.find((t=>e.includes(t.url))),n=t?t.topic:"culture",r=de.filter((t=>!e.includes(t.url))),o=r.filter((e=>e.topic!==n)),a=r.filter((e=>e.topic===n)),i=[];i.push(...o.slice(0,2)),a.length>1?(i.push(a[0]),i.push(a[Math.ceil(Math.random()*(a.length-1))])):i.push(...o.slice(2,4));const s=i.map(ue).join("");d3.select(".pudding-footer .footer-recirc__articles").html(s)}()}))};const fe=d3.select("body");let he=0;new Array("When","Women","Make","Headlines")[0].length,function(e,t=document){return[...t.querySelectorAll(e)]}("[target='_blank']").forEach((e=>e.setAttribute("rel","noopener"))),fe.classed("is-mobile",o.any()),window.addEventListener("resize",t()((function(){const e=fe.node().offsetWidth;he!==e&&(he=e,le.resize())}),150)),function(){const e=fe.select("header");if(e.classed("is-sticky")){const t=fe.select("#slide__menu"),n=fe.select(".header__toggle");!function(e,t,n,r,o,i){const l=n.selectAll("a, button, .logo").nodes(),c=l[0],d=l[l.length-1];e.on("click",(()=>s(r,e,i))),t.on("click",(()=>s(r,t,i))),n.on("keydown",(t=>{const n=t.code,o=r.classed("is-visible");"Escape"===n&&!0===o&&(e.attr("aria-expanded",!1),e.node().focus(),r.classed("is-active",!1),r.classed("is-visible",!1),e.html((()=>a)))})),d3.select(c).on("keydown",(e=>{if(r.classed("is-visible")){const t=e.code,n=e.shiftKey;"Tab"===t&&!0===n&&(e.preventDefault(),d.focus())}})),d3.select(d).on("keydown",(e=>{if(r.classed("is-visible")){const t=e.code,n=e.shiftKey;"Tab"===t&&!1===n&&(e.preventDefault(),c.focus())}}))}(n,n,e,t,0,!0)}}(),le.init(),pe()}()}();