!function(){var e={633:function(e,t,n){var r,a;void 0===(a="function"==typeof(r=()=>({selector:e,enter:t=(()=>{}),exit:n=(()=>{}),progress:r=(()=>{}),offset:a=0,once:o=!1})=>{let i=null,s=!1,l=[],c=0;function d(){const e=document.documentElement.clientHeight,t=window.innerHeight||0;c=Math.max(e,t)}function u(){s=!1;const e=function(){if(a&&"number"==typeof a){const e=Math.min(Math.max(0,a),1);return c-e*c}return c}();l=l.filter((a=>{const{top:i,bottom:s,height:l}=a.getBoundingClientRect(),c=i<e,d=s<e;if(c&&!a.__ev_entered){if(t(a),a.__ev_progress=0,r(a,a.__ev_progress),o)return!1}else!c&&a.__ev_entered&&(a.__ev_progress=0,r(a,a.__ev_progress),n(a));if(c&&!d){const t=(e-i)/l;a.__ev_progress=Math.min(1,Math.max(0,t)),r(a,a.__ev_progress)}return c&&d&&1!==a.__ev_progress&&(a.__ev_progress=1,r(a,a.__ev_progress)),a.__ev_entered=c,!0})),l.length||(window.removeEventListener("scroll",p,!0),window.removeEventListener("resize",m,!0),window.removeEventListener("load",f,!0))}function p(){s||(s=!0,i(u))}function m(){d(),u()}function f(){d(),u()}function h(e){const t=e.length,n=[];for(let r=0;r<t;r+=1)n.push(e[r]);return n}function y(){l=function(e,t=document){return"string"==typeof e?h(t.querySelectorAll(e)):e instanceof NodeList?h(e):e instanceof Array?e:void 0}(e)}e?(y(),l&&l.length?(i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},window.addEventListener("resize",m,!0),window.addEventListener("scroll",p,!0),window.addEventListener("load",f,!0),m(),u()):console.error("no selector elements found")):console.error("must pass a selector")})?r.call(t,n,t,e):r)||(e.exports=a)},337:function(){!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=function(e){for(var t=window.document,n=a(t);n;)n=a(t=n.ownerDocument);return t}(),t=[],n=null,r=null;i.prototype.THROTTLE_TIMEOUT=100,i.prototype.POLL_INTERVAL=null,i.prototype.USE_MUTATION_OBSERVER=!0,i._setupCrossOriginUpdater=function(){return n||(n=function(e,n){r=e&&n?u(e,n):{top:0,bottom:0,left:0,right:0,width:0,height:0},t.forEach((function(e){e._checkForIntersections()}))}),n},i._resetCrossOriginUpdater=function(){n=null,r=null},i.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},i.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},i.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},i.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},i.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},i.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},i.prototype._monitorIntersections=function(t){var n=t.defaultView;if(n&&-1==this._monitoringDocuments.indexOf(t)){var r=this._checkForIntersections,o=null,i=null;this.POLL_INTERVAL?o=n.setInterval(r,this.POLL_INTERVAL):(s(n,"resize",r,!0),s(t,"scroll",r,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(i=new n.MutationObserver(r)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push((function(){var e=t.defaultView;e&&(o&&e.clearInterval(o),l(e,"resize",r,!0)),l(t,"scroll",r,!0),i&&i.disconnect()}));var c=this.root&&(this.root.ownerDocument||this.root)||e;if(t!=c){var d=a(t);d&&this._monitorIntersections(d.ownerDocument)}}},i.prototype._unmonitorIntersections=function(t){var n=this._monitoringDocuments.indexOf(t);if(-1!=n){var r=this.root&&(this.root.ownerDocument||this.root)||e;if(!this._observationTargets.some((function(e){var n=e.element.ownerDocument;if(n==t)return!0;for(;n&&n!=r;){var o=a(n);if((n=o&&o.ownerDocument)==t)return!0}return!1}))){var o=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),o(),t!=r){var i=a(t);i&&this._unmonitorIntersections(i.ownerDocument)}}}},i.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},i.prototype._checkForIntersections=function(){if(this.root||!n||r){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(r){var a=r.element,i=c(a),s=this._rootContainsTarget(a),l=r.entry,d=e&&s&&this._computeTargetAndRootIntersection(a,i,t),u=null;this._rootContainsTarget(a)?n&&!this.root||(u=t):u={top:0,bottom:0,left:0,right:0,width:0,height:0};var p=r.entry=new o({time:window.performance&&performance.now&&performance.now(),target:a,boundingClientRect:i,rootBounds:u,intersectionRect:d});l?e&&s?this._hasCrossedThreshold(l,p)&&this._queuedEntries.push(p):l&&l.isIntersecting&&this._queuedEntries.push(p):this._queuedEntries.push(p)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},i.prototype._computeTargetAndRootIntersection=function(t,a,o){if("none"!=window.getComputedStyle(t).display){for(var i,s,l,d,p,f,h,y,g=a,w=m(t),v=!1;!v&&w;){var b=null,x=1==w.nodeType?window.getComputedStyle(w):{};if("none"==x.display)return null;if(w==this.root||9==w.nodeType)if(v=!0,w==this.root||w==e)n&&!this.root?!r||0==r.width&&0==r.height?(w=null,b=null,g=null):b=r:b=o;else{var _=m(w),k=_&&c(_),A=_&&this._computeTargetAndRootIntersection(_,k,o);k&&A?(w=_,b=u(k,A)):(w=null,g=null)}else{var C=w.ownerDocument;w!=C.body&&w!=C.documentElement&&"visible"!=x.overflow&&(b=c(w))}if(b&&(i=b,s=g,void 0,void 0,void 0,void 0,void 0,void 0,l=Math.max(i.top,s.top),d=Math.min(i.bottom,s.bottom),p=Math.max(i.left,s.left),y=d-l,g=(h=(f=Math.min(i.right,s.right))-p)>=0&&y>=0&&{top:l,bottom:d,left:p,right:f,width:h,height:y}||null),!g)break;w=w&&m(w)}return g}},i.prototype._getRootRect=function(){var t;if(this.root&&!f(this.root))t=c(this.root);else{var n=f(this.root)?this.root:e,r=n.documentElement,a=n.body;t={top:0,left:0,right:r.clientWidth||a.clientWidth,width:r.clientWidth||a.clientWidth,bottom:r.clientHeight||a.clientHeight,height:r.clientHeight||a.clientHeight}}return this._expandRectByRootMargin(t)},i.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},i.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var a=0;a<this.thresholds.length;a++){var o=this.thresholds[a];if(o==n||o==r||o<n!=o<r)return!0}},i.prototype._rootIsInDom=function(){return!this.root||p(e,this.root)},i.prototype._rootContainsTarget=function(t){var n=this.root&&(this.root.ownerDocument||this.root)||e;return p(n,t)&&(!this.root||n==t.ownerDocument)},i.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},i.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=i,window.IntersectionObserverEntry=o}function a(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(e){return null}}function o(e){this.time=e.time,this.target=e.target,this.rootBounds=d(e.rootBounds),this.boundingClientRect=d(e.boundingClientRect),this.intersectionRect=d(e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,a=r.width*r.height;this.intersectionRatio=n?Number((a/n).toFixed(4)):this.isIntersecting?1:0}function i(e,t){var n,r,a,o=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(o.root&&1!=o.root.nodeType&&9!=o.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,a=null,function(){a||(a=setTimeout((function(){n(),a=null}),r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(o.rootMargin),this.thresholds=this._initThresholds(o.threshold),this.root=o.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function s(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function l(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function c(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function d(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function u(e,t){var n=t.top-e.top,r=t.left-e.left;return{top:n,left:r,height:t.height,width:t.width,bottom:n+t.height,right:r+t.width}}function p(e,t){for(var n=t;n;){if(n==e)return!0;n=m(n)}return!1}function m(t){var n=t.parentNode;return 9==t.nodeType&&t!=e?a(t):(n&&n.assignedSlot&&(n=n.assignedSlot.parentNode),n&&11==n.nodeType&&n.host?n.host:n)}function f(e){return e&&9===e.nodeType}}()},296:function(e,t,n){var r=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,d=l||c||Function("return this")(),u=Object.prototype.toString,p=Math.max,m=Math.min,f=function(){return d.Date.now()};function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(h(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=h(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=o.test(e);return n||i.test(e)?s(e.slice(2),n?2:8):a.test(e)?NaN:+e}e.exports=function(e,t,n){var r,a,o,i,s,l,c=0,d=!1,u=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function w(t){var n=r,o=a;return r=a=void 0,c=t,i=e.apply(o,n)}function v(e){return c=e,s=setTimeout(x,t),d?w(e):i}function b(e){var n=e-l;return void 0===l||n>=t||n<0||u&&e-c>=o}function x(){var e=f();if(b(e))return _(e);s=setTimeout(x,function(e){var n=t-(e-l);return u?m(n,o-(e-c)):n}(e))}function _(e){return s=void 0,g&&r?w(e):(r=a=void 0,i)}function k(){var e=f(),n=b(e);if(r=arguments,a=this,l=e,n){if(void 0===s)return v(l);if(u)return s=setTimeout(x,t),w(l)}return void 0===s&&(s=setTimeout(x,t)),i}return t=y(t)||0,h(n)&&(d=!!n.leading,o=(u="maxWait"in n)?p(y(n.maxWait)||0,t):o,g="trailing"in n?!!n.trailing:g),k.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=a=s=void 0},k.flush=function(){return void 0===s?i:_(f())},k}},99:function(e){e.exports=function(){"use strict";function e(e){return"scrollama__debug-offset--"+e}function t(t){!function(t){var n=t.id,r=t.offsetVal,a=t.stepClass,o=document.createElement("div");o.id=e(n),o.className="scrollama__debug-offset",o.style.position="fixed",o.style.left="0",o.style.width="100%",o.style.height="0",o.style.borderTop="2px dashed black",o.style.zIndex="9999";var i=document.createElement("p");i.innerHTML='".'+a+'" trigger: <span>'+r+"</span>",i.style.fontSize="12px",i.style.fontFamily="monospace",i.style.color="black",i.style.margin="0",i.style.padding="6px",o.appendChild(i),document.body.appendChild(o)}({id:t.id,offsetVal:t.offsetVal,stepClass:t.stepEl[0].className})}function n(e){var t=e.id,n=e.index,r=e.state,a="scrollama__debug-step--"+t+"-"+n,o=document.getElementById(a+"_above"),i=document.getElementById(a+"_below"),s="enter"===r?"block":"none";o&&(o.style.display=s),i&&(i.style.display=s)}return function(){var r=["stepAbove","stepBelow","stepProgress","viewportAbove","viewportBelow"],a={},o={},i=null,s=[],l=[],c=[],d=[],u=0,p=0,m=0,f=0,h=0,y=0,g=!1,w=!1,v=!1,b=!1,x=!1,_=!1,k="down",A="percent",C=[];function T(e){console.error("scrollama error: "+e)}function B(){a={stepEnter:function(){},stepExit:function(){},stepProgress:function(){}},o={}}function D(e){return e.getBoundingClientRect().top+window.pageYOffset-(document.body.clientTop||0)}function E(e){return+e.getAttribute("data-scrollama-index")}function M(){window.pageYOffset>h?k="down":window.pageYOffset<h&&(k="up"),h=window.pageYOffset}function I(e){o[e]&&o[e].forEach((function(e){return e.disconnect()}))}function F(){var t,n;m=window.innerHeight,t=document.body,n=document.documentElement,f=Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight),p=u*("pixels"===A?1:m),g&&(l=s.map((function(e){return e.getBoundingClientRect().height})),c=s.map(D),w&&U()),v&&function(t){var n=t.id,r=t.offsetMargin,a=t.offsetVal,o="pixels"===t.format?"px":"",i=e(n),s=document.getElementById(i);s.style.top=r+"px",s.querySelector("span").innerText=""+a+o}({id:i,offsetMargin:p,offsetVal:u,format:A})}function S(e){if(e&&!w){if(!g)return T("scrollama error: enable() called before scroller was ready"),void(w=!1);U()}!e&&w&&r.forEach(I),w=e}function L(e,t){var n=E(e);void 0!==t&&(d[n].progress=t);var r={element:e,index:n,progress:d[n].progress};"enter"===d[n].state&&a.stepProgress(r)}function R(e,t){if("above"===t)for(var n=0;n<e;n+=1){var r=d[n];"enter"!==r.state&&"down"!==r.direction?(O(s[n],"down",!1),j(s[n],"down")):"enter"===r.state&&j(s[n],"down")}else if("below"===t)for(var a=d.length-1;a>e;a-=1){var o=d[a];"enter"===o.state&&j(s[a],"up"),"down"===o.direction&&(O(s[a],"up",!1),j(s[a],"up"))}}function O(e,t,r){void 0===r&&(r=!0);var o=E(e),s={element:e,index:o,direction:t};d[o].direction=t,d[o].state="enter",x&&r&&"down"===t&&R(o,"above"),x&&r&&"up"===t&&R(o,"below"),a.stepEnter&&!C[o]&&(a.stepEnter(s,d),v&&n({id:i,index:o,state:"enter"}),_&&(C[o]=!0)),b&&L(e)}function j(e,t){var r=E(e),o={element:e,index:r,direction:t};b&&("down"===t&&d[r].progress<1?L(e,1):"up"===t&&d[r].progress>0&&L(e,0)),d[r].direction=t,d[r].state="exit",a.stepExit(o,d),v&&n({id:i,index:r,state:"exit"})}function $(e){var t=e[0];M();var n=t.isIntersecting,r=t.boundingClientRect,a=t.target,o=r.top,i=r.bottom,s=o-p,l=i-p,c=E(a),u=d[c];n&&s<=0&&l>=0&&"down"===k&&"enter"!==u.state&&O(a,k),!n&&s>0&&"up"===k&&"enter"===u.state&&j(a,k)}function P(e){var t=e[0];M();var n=t.isIntersecting,r=t.boundingClientRect,a=t.target,o=r.top,i=r.bottom,s=o-p,l=i-p,c=E(a),u=d[c];n&&s<=0&&l>=0&&"up"===k&&"enter"!==u.state&&O(a,k),!n&&l<0&&"down"===k&&"enter"===u.state&&j(a,k)}function N(e){var t=e[0];M();var n=t.isIntersecting,r=t.target,a=E(r),o=d[a];n&&"down"===k&&"down"!==o.direction&&"enter"!==o.state&&(O(r,"down"),j(r,"down"))}function z(e){var t=e[0];M();var n=t.isIntersecting,r=t.target,a=E(r),o=d[a];n&&"up"===k&&"down"===o.direction&&"enter"!==o.state&&(O(r,"up"),j(r,"up"))}function q(e){var t=e[0];M();var n=t.isIntersecting,r=t.intersectionRatio,a=t.boundingClientRect,o=t.target,i=a.bottom;n&&i-p>=0&&L(o,+r)}function H(){o.stepProgress=s.map((function(e,t){var n=l[t]-p+"px 0px "+(-m+p)+"px 0px",r=function(e){for(var t=Math.ceil(e/y),n=[],r=1/t,a=0;a<t;a+=1)n.push(a*r);return n}(l[t]),a=new IntersectionObserver(q,{rootMargin:n,threshold:r});return a.observe(e),a}))}function U(){r.forEach(I),o.viewportAbove=s.map((function(e,t){var n=f-c[t],r=p-m-l[t],a=new IntersectionObserver(N,{rootMargin:n+"px 0px "+r+"px 0px"});return a.observe(e),a})),o.viewportBelow=s.map((function(e,t){var n=-p-l[t],r=p-m+l[t]+f,a=new IntersectionObserver(z,{rootMargin:n+"px 0px "+r+"px 0px"});return a.observe(e),a})),o.stepAbove=s.map((function(e,t){var n=-p+l[t],r=new IntersectionObserver($,{rootMargin:n+"px 0px "+(p-m)+"px 0px"});return r.observe(e),r})),o.stepBelow=s.map((function(e,t){var n=-p,r=p-m+l[t],a=new IntersectionObserver(P,{rootMargin:n+"px 0px "+r+"px 0px"});return a.observe(e),a})),b&&H()}function W(e){return!(!e||1!==e.nodeType)&&(function(e){var t=window.getComputedStyle(e);return("scroll"===t.overflowY||"auto"===t.overflowY)&&e.scrollHeight>e.clientHeight}(e)?e:W(e.parentNode))}var V={setup:function(e){var n=e.step,r=e.parent,a=e.offset;void 0===a&&(a=.5);var o=e.progress;void 0===o&&(o=!1);var l=e.threshold;void 0===l&&(l=4);var c=e.debug;void 0===c&&(c=!1);var p=e.order;void 0===p&&(p=!0);var m,f,h,w=e.once;if(void 0===w&&(w=!1),B(),f=(m="abcdefghijklmnopqrstuv").length,h=Date.now(),i=""+[0,0,0].map((function(e){return m[Math.floor(Math.random()*f)]})).join("")+h,!(s=function(e,t){return void 0===t&&(t=document),"string"==typeof e?Array.from(t.querySelectorAll(e)):e instanceof Element?[e]:e instanceof NodeList?Array.from(e):e instanceof Array?e:[]}(n,r)).length)return T("no step elements"),V;var k=s.reduce((function(e,t){return e||W(t.parentNode)}),!1);return k&&console.error("scrollama error: step elements cannot be children of a scrollable element. Remove any css on the parent element with overflow: scroll; or overflow: auto; on elements with fixed height.",k),v=c,b=o,x=p,_=w,V.offsetTrigger(a),y=Math.max(1,+l),g=!0,v&&t({id:i,stepEl:s,offsetVal:u}),s.forEach((function(e,t){return e.setAttribute("data-scrollama-index",t)})),d=s.map((function(){return{direction:null,state:null,progress:0}})),F(),V.enable(),V},resize:function(){return F(),V},enable:function(){return S(!0),V},disable:function(){return S(!1),V},destroy:function(){S(!1),B()},offsetTrigger:function(e){if(null===e)return u;if("number"==typeof e)A="percent",e>1&&T("offset value is greater than 1. Fallback to 1."),e<0&&T("offset value is lower than 0. Fallback to 0."),u=Math.min(Math.max(0,e),1);else if("string"==typeof e&&e.indexOf("px")>0){var t=+e.replace("px","");isNaN(t)?(T("offset value must be in 'px' format. Fallback to 0.5."),u=.5):(A="pixels",u=t)}else T("offset value does not include 'px'. Fallback to 0.5."),u=.5;return V},onStepEnter:function(e){return"function"==typeof e?a.stepEnter=e:T("onStepEnter requires a function"),V},onStepExit:function(e){return"function"==typeof e?a.stepExit=e:T("onStepExit requires a function"),V},onStepProgress:function(e){return"function"==typeof e?a.stepProgress=e:T("onStepProgress requires a function"),V}};return V}}()}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=n(296),t=n.n(e);const r={android:()=>navigator.userAgent.match(/Android/i),blackberry:()=>navigator.userAgent.match(/BlackBerry/i),ios:()=>navigator.userAgent.match(/iPhone|iPad|iPod/i),opera:()=>navigator.userAgent.match(/Opera Mini/i),windows:()=>navigator.userAgent.match(/IEMobile/i),any:()=>r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()};var a=r;const o='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>',i=d3.select("body");function s(e,t,n){const r=e.classed("is-visible");t.attr("aria-expanded",!r),e.classed("is-active",!r),e.classed("is-visible",!r),i.classed("modal-open",!r),!0===n&&(r?t.html((()=>o)):t.html((()=>'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>')))}function l(e){return new Promise(((t,n)=>{const r=e.split(".").pop();"csv"===r?d3.csv(`assets/data/${e}`).then(t).catch(n):"json"===r?d3.json(`assets/data/${e}`).then(t).catch(n):n(new Error(`unsupported file type for: ${e}`))}))}function c(e,t){e.each((function(){for(var e,n=d3.select(this),r=n.text().split(/\s+/).reverse(),a=[],o=0,i=n.attr("x"),s=n.attr("y"),l=n.text(null).append("tspan").attr("x",i).attr("y",s).attr("dy","0em");e=r.pop();)a.push(e),l.text(a.join(" ")),l.node().getComputedTextLength()>t&&(a.pop(),l.text(a.join(" ")),a=[e],l=n.append("tspan").attr("x",i).attr("y",s).attr("dy",1.1*++o+0+"em").text(e))}))}d3.selection.prototype.puddingStackedBar=function(e){const t=this.nodes().map((function(e){const t=d3.select(e);let n=null,r=null,a=null,o=null,i=null,s=null,l=null,d=null,u=null,p=null,m=null,f=null,h=null;const y=d3.select("#scrolly-side"),g=y.select("article").selectAll(".step");d3.select("#wordSearch");let w,v=t.datum(),b=v[0],x=v[1],_=(v[2],v[3]),k=[{country:"South Africa",flag:"assets/images/flags/south-africa.svg"},{country:"USA",flag:"assets/images/flags/united-states.svg"},{country:"India",flag:"assets/images/flags/india.svg"},{country:"UK",flag:"assets/images/flags/united-kingdom.svg"},{country:"All countries",flag:""}],A=(d3.stack().keys(_.columns.slice(2)).order(d3.stackOrderAscending)(_.filter((e=>"No theme"!==e.theme))).map((e=>(e.forEach((t=>t.key=e.key)),e))),0),C=0;const T=50;let B=null,D=null,E=null;function M(){let e=d3.select(this),t=e.attr("class");t=t.split("_")[0],p.style("opacity","0.5");const n=[...e.selectAll("rect").classed("hoverRectActive",!0)._groups[0]].map((e=>{const t=d3.select(e).datum();return t.data[t.key.word]})).filter((e=>e)).pop(),r=E(+n);m=e.append("text").text(t).attr("class","stackedBarThemeHover").attr("x",A-T).attr("y",r)}function I(){let e=d3.select(this);m.remove(),e.selectAll("rect").classed("hoverRectActive",!1)}function F(){d3.selectAll(".stackedBars").selectAll("rect").attr("fill","#ccc").attr("opacity","0.5")}function S(e,t){g.classed("is-active",((t,n)=>n===e));let n=t,r=null,a=d3.select(`.${n}_group`);7===e||9===e?(d3.selectAll(".stackedBars rect").attr("opacity","0.5"),r=d3.selectAll(`.${n}_class`).attr("opacity","1")):(F(),r=d3.selectAll(`.${n}_class`).attr("fill","#282828").attr("opacity","1"));const o=[...r._groups[0]].map((e=>{const t=d3.select(e).datum();return t.data[t.key.word]})).filter((e=>e)).pop(),i=E(+o);m=a.append("text").text(n).attr("class","stackedBarThemeHover").attr("x",A-T).attr("y",i+5)}function L(e,t){g.classed("is-active",((t,n)=>n===e)),d3.selectAll(".stackedBars").selectAll("rect").attr("fill","#ccc").attr("opacity","0.5");let n=d3.selectAll(".stackedBars").selectAll(".crimeandviolence_class"),r=d3.selectAll(".stackedBars").selectAll(".femalestereotypes_class"),a=d3.selectAll(".stackedBars").selectAll(".empowerment_class"),o=d3.selectAll(".stackedBars").selectAll(".peopleandplaces_class"),i=d3.selectAll(".stackedBars").selectAll(".raceethnicityandidentity_class");"crimeandviolence"===t&&n.attr("fill","#E75C33").attr("opacity","1"),"femalestereotypes"===t&&r.attr("fill","#53B67C").attr("opacity","1"),"EPR"===t&&(n.attr("fill","#E75C33").attr("opacity","1"),r.attr("fill","#53B67C").attr("opacity","1"),a.attr("fill","#F7DC5B").attr("opacity","1"),o.attr("fill","#3569DC").attr("opacity","1"),i.attr("fill","#F2C5D3").attr("opacity","1"))}const R={init(){!function(e,t){w=d3.stack().keys(e.columns.slice(2))(e).map((e=>(e.forEach((n=>n.key=void 0!==t.filter((t=>t.word===e.key))[0]?{word:e.key,theme:t.filter((t=>t.word===e.key))[0].theme}:{word:e.key,theme:"No theme"})),e)))}(b,x),n=t.append("svg").attr("class","stackedChart"),r=n.append("g").attr("class","g-axis"),o=r.append("g").attr("class","x axis"),s=o.append("g"),i=r.append("g").attr("class","y axis"),d=i.append("text").attr("class","stackedChartyTicks").attr("transform","translate(10,275) rotate(-90)").text("Frequency of use of headlines ⇢"),D=d3.scaleBand().domain(b.map((e=>e.country))).padding(.1),a=n.append("g").attr("class","g-vis"),u=a.append("g").attr("class","stackedBars").selectAll("g").data(w).join("g").attr("class",(e=>`${e.key}_group`)).on("mouseenter",M).on("mouseleave",I).selectAll("rect").data((e=>e)),p=u.join("rect").attr("class",(function(e){let t=`${function(e){let t=e.trim();return t=t.replace(/ /g,""),t=t.replace(",",""),t=t.toLowerCase(),t}(e.key.theme)}_class`;return`${e.key.word}_class ${t}`})).attr("fill","#c9c9c9").attr("opacity","0.5").attr("stroke","#FEFAF1").attr("stroke-width","0.2px"),f=a.selectAll("rect").filter((e=>"No theme"!==e.key.theme&&"All countries"===e.data.country)),h=a.selectAll("rect").filter((e=>"All countries"!==e.data.country)),R.render(),R.resize()},updateChart(e,t){const n=y.select(`[data-index='${e}']`),r=n.attr("word");return n.attr("theme"),console.log(e),0===e&&F(),1===e&&S(e,r),2===e&&(m.remove(),S(e,r)),3===e&&(m.remove(),S(e,r)),4===e&&(m.remove(),S(e,r)),5===e&&(m.remove(),S(e,r)),6===e&&(m.remove(),L(e,"crimeandviolence")),7===e&&(m.remove(),L(e,"crimeandviolence"),S(e,r)),8===e&&(m.remove(),L(e,"femalestereotypes")),9===e&&(m.remove(),L(e,"femalestereotypes"),S(e,r)),10===e&&(m.remove(),L(e,"EPR")),11===e&&"down"===t&&p.style("pointer-events","auto"),12===e&&(m.remove(),p.style("pointer-events","none"),s.selectAll(".tick .tickFlag").remove(),h.transition().duration("500").ease(d3.easeLinear).delay(((e,t)=>1.25*t)).style("opacity",0)),R},resize:()=>(A=t.node().offsetWidth-0-T,C=t.node().offsetHeight-50-50,n.attr("width",A+0+T).attr("height",C+50+50),o.attr("transform","translate(0,80)"),D.range([0,A-T]),B=D.padding(),s.call(d3.axisBottom(D)),s.selectAll(".domain").remove(),s.selectAll(".tick line").remove(),s.selectAll(".tick .tickFlag").remove(),s.selectAll(".tick text").attr("x",0).attr("y",-5).attr("class","stackedChartTicks").call(c,D.bandwidth()),s.selectAll(".tick text").attr("transform",`translate(${D.bandwidth()-T+6}, 0)`),s.selectAll(".tick").append("svg:image").attr("class","tickFlag").attr("height","35px").attr("x",D.bandwidth()-T+5).attr("y",0).attr("transform","translate(-17, -55)").attr("xlink:href",(e=>k.filter((t=>t.country===e))[0].flag)),i.attr("transform","translate(0,0)"),E=d3.scaleLinear().domain([w.length,0]).range([C-50,50]),l=e=>e.call(d3.axisRight(E).tickSizeOuter(0).tickSizeInner(0)).call((e=>e.selectAll(".tick").remove())).call((e=>e.selectAll(".domain").remove())),l=i.append("g").call(l),p.attr("x",((e,t)=>D(e.data.country))).attr("height",(e=>0===e.data[e.key.word]||null===e.data[e.key.word]?0:C/w.length)).attr("width",D.bandwidth()).attr("y",(e=>0!==e.data[e.key.word]||null!==e.data[e.key.word]?E(e.data[e.key.word]):E(null))),R),render:()=>(a.attr("transform","translate(0, 50)"),R),data(e){return arguments.length?(v=e,t.datum(v),R):v}};return R.init(),R}));return t.length>1?t:t.pop()},d3.selection.prototype.puddingTimeSeriesLine=function(e){const t=this.nodes().map((function(e){const t=d3.select(e);let n=null,r=null,a=null,o=null,i=null,s=null,l=null,d=null,u=null,p=null,m=null,f=null,h=t.datum(),y=0,g=0,w=null,v=null,b=null,x=null;const _={init(){var e,c;h=(e=d3.rollup(h,(e=>[d3.median(e,(e=>e.women_polarity_median)),d3.median(e,(e=>e.all_polarity_median))]),(e=>e.year)),c=[],e.forEach((function(e,t){c.push({year:t,womenPolarityMed:e[0],allPolarityMed:e[1]})})),c).filter((e=>2021!==e.year&&2016!==e.year)),n=t.append("svg").attr("class","pudding-chart"),r=n.append("g").attr("class","g-axis"),w=d3.scaleTime().domain(d3.extent(h,(e=>e.year))),v=d3.scaleLinear().domain([0,d3.max(h,(e=>e.womenPolarityMed))]).nice(),b=r.append("g").attr("class","stackedChartyTicks"),x=r.append("g").attr("class","lineChartyAxis"),f=r.append("text").attr("class","stackedChartyTicks").attr("transform","rotate(-90)").text("Average polarity of news headlines ⇢"),a=n.append("g").attr("class","g-vis"),o=d3.line().defined((e=>!isNaN(e.womenPolarityMed))).curve(d3.curveBasis),i=d3.line().defined((e=>!isNaN(e.allPolarityMed))).curve(d3.curveBasis),s=a.append("path").datum(h).attr("class","women-comp-line"),l=a.append("path").datum(h).attr("class","all-comp-line"),d=a.append("circle").attr("r","11").attr("class","polarityCompBubbleRight"),u=a.append("circle").attr("r","4").attr("class","polarityCompBubbleLeft"),p=a.append("text").attr("class","polarityCompFemText"),m=a.append("text").attr("class","polarityCompAllText")},resize:()=>(y=t.node().offsetWidth-50-20,g=t.node().offsetHeight-10-10,n.attr("width",y+50+20).attr("height",g+10+10),w.range([50,y-20]),v.range([g-10,10]),b.attr("transform",`translate(0,${g-10})`).call(d3.axisBottom(w).ticks(6).tickSizeOuter(0).tickSizeInner(0).tickFormat(d3.format("d"))),x.attr("transform","translate(50,0)").call(d3.axisLeft(v).tickSize(0).tickValues([.1,.2,.3,.4,.45])).call((e=>e.select(".domain").remove())),f.attr("x",-g/1.2).attr("y",10),o.x((e=>w(e.year))).y((e=>v(e.womenPolarityMed))),i.x((e=>w(e.year))).y((e=>v(e.allPolarityMed))),s.attr("d",o),l.attr("d",i),d.attr("cx",w(d3.max(h,(e=>e.year)))).attr("cy",(function(e){let t=h.length-1,n=h[t].womenPolarityMed;return v(n)})).attr("r",(e=>y>=600?11:8)),u.attr("cx",w(d3.max(h,(e=>e.year)))).attr("cy",(function(e){let t=h.length-1,n=h[t].allPolarityMed;return v(n)})).attr("r",(e=>y>=600?4:3)),p.text("Headlines about women").attr("x",w(d3.max(h,(e=>e.year)))).attr("y",(function(e){let t=h.length-1,n=h[t].womenPolarityMed;return v(n)+70})).call(c,100),m.text("All headlines").attr("x",w(d3.max(h,(e=>e.year)))).attr("y",(function(e){let t=h.length-1,n=h[t].allPolarityMed;return v(n)+40})).call(c,100),_),render:()=>(a.attr("transform","translate(50, 10)"),_),data(e){return arguments.length?(h=e,t.datum(h),_):h}};return _.init(),_}));return t.length>1?t:t.pop()},d3.selection.prototype.puddingLollipop=function(e){const t=this.nodes().map((function(e){const t=d3.select(e);let n=null,r=null,a=null,o=null,i=null,s=null,l=null,c=null,d=null,u=d3.select("#sortLollipopDiff"),p=d3.select("#sortLollipopPol"),m=t.datum();m=m.filter((e=>1==e.popularity&&Math.abs(e.difference)>.05&&"dailysun.co.za"!==e.site_clean&&"msnbc"!==e.site_clean)),m=m.sort(((e,t)=>d3.descending(+e.polarity_women,+t.polarity_women)));let f=d3.max(m,(e=>e.polarity_women)),h=d3.min(m,(e=>e.polarity_women)),y=0,g=0,w=null,v=null,b=null,x=null,_=null;function k(){const e="sortLollipopDiff"===this.id?"difference":"polarity_women",t=m.sort(((t,n)=>d3.descending(+t[e],+n[e])));d3.selectAll(".lollipopTextbutton-active").classed("lollipopTextbutton-active",!1).classed("lollipopTextbutton",!0),d3.select(this).classed("lollipopTextbutton-active",!0),b.domain(t.map((e=>e.site_clean))),r.select(".polarityCompyAxis").transition().duration("1000").call(d3.axisLeft(b).tickSize(0)),a.selectAll(".polarityCompBubble").sort(((t,n)=>void 0!==t?d3.ascending(+t[e],+n[e]):"")).transition().duration("1000").attr("cy",((e,t)=>void 0!==e?b(e.site_clean):"-60")),a.selectAll(".polarityDiffAnnotation").sort(((t,n)=>d3.ascending(+t[e],+n[e]))).transition().duration("1000").attr("y",((e,t)=>b(e.site_clean))),a.selectAll(".polarityCompBubbleLine").sort(((t,n)=>d3.ascending(+t[e],+n[e]))).transition().duration("1000").attr("x1",((e,t)=>v(e.polarity_base))).attr("x2",((e,t)=>v(e.polarity_women))).attr("y1",((e,t)=>b(e.site_clean))).attr("y2",((e,t)=>b(e.site_clean)))}const A={init(){n=t.append("svg").attr("class","pudding-chart"),r=n.append("g").attr("class","g-axis"),x=r.append("g").attr("class","polarityCompxAxis"),_=r.append("g").attr("class","polarityCompyAxis"),v=d3.scaleLinear().domain([h,f]),a=n.append("g").attr("class","g-vis"),o=a.selectAll("gridline").data(m).join("line").attr("class","grid"),i=a.selectAll("myline").data(m).join("line").attr("class","polarityCompBubbleLine").attr("stroke","black").attr("stroke-width","2.5px"),s=a.selectAll("mycircle").data(m).join("circle").attr("class","polarityCompBubble polarityCompBubbleLeft"),l=a.selectAll("mycircle").data(m).join("circle").attr("class","polarityCompBubble polarityCompBubbleRight").attr("r","11"),c=a.selectAll("mycircle").data(m).join("text").attr("class","polarityDiffAnnotation").text((e=>(e.polarity_women-e.polarity_base)/e.polarity_base*100>0?"+"+Math.round((e.polarity_women-e.polarity_base)/e.polarity_base*100)+"%":Math.round((e.polarity_women-e.polarity_base)/e.polarity_base*100)+"%")),d=a.append("line").attr("stroke","black").attr("stroke-width","2.5px"),p.attr("class","lollipopTextbutton-active"),A.resize(),A.render()},resize:()=>(y=t.node().offsetWidth,y>=600?(w=160,a.attr("transform",`translate(${w}, 0)`),d3.selectAll(".polarityCompyAxis .tick text").attr("transform","translate(0,0)").style("text-anchor","end"),o.attr("x1",10),s.attr("r","4"),l.attr("r","11")):(w=40,a.attr("transform",`translate(${w}, 0)`),d3.selectAll(".polarityCompyAxis .tick text").attr("transform","translate(3,-25)").style("text-anchor","start"),o.attr("x1",0),s.attr("r","3"),l.attr("r","8")),y=t.node().offsetWidth-w-50,g=1700,n.attr("width",y+w+50).attr("height",g+0+0),x.attr("transform","translate(0,"+g+")").call(d3.axisBottom(v)),b=d3.scaleBand().range([0,g]).domain(m.map((e=>e.site_clean))).padding(1),_.attr("transform",`translate(${w},0)`).call(d3.axisLeft(b).tickSize(0)),v.range([w+50,y]),o.attr("x2",y).attr("y1",(function(e){return b(e.site_clean)})).attr("y2",(function(e){return b(e.site_clean)})),i.attr("x1",(function(e){return v(e.polarity_base)})).attr("x2",(function(e){return v(e.polarity_women)})).attr("y1",(function(e){return b(e.site_clean)})).attr("y2",(function(e){return b(e.site_clean)})),s.attr("cx",(function(e){return v(e.polarity_base)})).attr("cy",(function(e){return b(e.site_clean)})),l.attr("cx",(function(e){return v(e.polarity_women)})).attr("cy",(function(e){return b(e.site_clean)})),c.attr("x",(e=>v(e.polarity_women)-8)).attr("y",(e=>b(e.site_clean)+6)),A),render:()=>(u.on("click",k),p.on("click",k),A),data(e){return arguments.length?(m=e,t.datum(m),A):m}};return A.init(),A}));return t.length>1?t:t.pop()},d3.selection.prototype.puddingBubble=function(e){const t=this.nodes().map((function(e){const t=d3.select(e);let n=null,r=null,a=null,o=null,i=null,s=null,l=null,d=null,u=null,p=null,m=d3.select("#countrydropdown"),f=d3.select("#pubdropdown"),h=d3.selectAll(".tooltip"),y=t.datum(),g=y[0],w=y[1],v=y[2],b=null,x=null;g=g.filter((e=>0!=+e.monthly_visits&0!=+e[v]&"msn.com"!==e.site&"sports.yahoo.com"!==e.site&"finance.yahoo.com"!==e.site&"news.google.com"!==e.site&"news.yahoo.com"!==e.site&"bbc.com"!==e.site&"makeuseof.com"!==e.site&"which.co.uk"!==e.site&"espncricinfo.com"!==e.site&"seekingalpha.com"!==e.site&"prokerala.com"!==e.site)),b=g.map((e=>"polarity"===v?{site:e.site,polarity:e[v],monthly_visits:e.monthly_visits,country_of_pub:e.country_of_pub}:{site:e.site,bias:e[v],monthly_visits:e.monthly_visits,country_of_pub:e.country_of_pub}));const _=[{site:"nytimes.com",link:"nytimes.png"},{site:"dailymail.co.uk",link:"dailyMail.png"},{site:"cnn.com",link:"cnn.png"},{site:"bbc.co.uk",link:"bbc.png"},{site:"telegraph.co.uk",link:"telegraph.png"},{site:"washingtonpost.com",link:"washingtonPost.png"},{site:"forbes.com",link:"forbes.png"},{site:"abcnews.go.com",link:"abc.png"},{site:"foxnews.com",link:"foxNews.png"},{site:"ksl.com",link:"ksl.png"},{site:"bloomberg.com",link:"bloomberg.png"},{site:"breitbart.com",link:"breitbart.png"},{site:"popsugar.com",link:"popSugar.png"},{site:"nbcnews.com",link:"nbc.png"},{site:"buzzfeed.com",link:"buzzfeed.png"},{site:"cnet.com",link:"cnet.png"},{site:"politico.com",link:"politico.png"},{site:"usatoday.com",link:"usaToday.png"},{site:"nydailynews.com",link:"nyDailyNews.png"},{site:"businessinsider.com",link:"businessInsider.png"},{site:"aajtak.in",link:"aajtak.png"},{site:"espn.go.com",link:"espn.png"},{site:"huffingtonpost.com",link:"huffPost.png"}];let k=0,A=0;let C=null,T=null,B=d3.extent(b,(e=>+e.monthly_visits)),D=d3.scaleSqrt().domain(B),E=d3.scaleLinear().domain(B),M=null,I=null;function F(e,t,n){const r=d3.select(t),a=d3.map(e,(e=>e[n])).filter(L);"country_of_pub"===n?a.unshift("Country"):a.unshift("Newsroom"),r.selectAll("option").data(a).join("option").attr("value",(e=>"Country"===e||"Newsroom"===e?"":e)).text((e=>e))}function S(){const e=d3.select(this).property("value"),t=d3.select(this).property("id");let n=d3.selectAll(".forceCircles"),r=d3.selectAll(".forceLogo");"countrydropdown"===t&&(f.node().options[0].selected=!0,n.style("fill",(t=>t.country_of_pub.toLowerCase()===e.toLowerCase()?"#F7DC5B":"#FEFAF1")),n.style("stroke",(t=>t.site.toLowerCase()===e.toLowerCase()?"#E75C33":"#282828")),n.style("stroke-width",(t=>t.site.toLowerCase()===e.toLowerCase()?"3":"1")),n.style("opacity",(t=>t.country_of_pub.toLowerCase()===e.toLowerCase()||""===e?"1":"0.2")),r.style("opacity",(t=>t.country_of_pub.toLowerCase()===e.toLowerCase()||""===e?"1":"0.2"))),"pubdropdown"===t&&(m.node().options[0].selected=!0,n.style("fill",(t=>t.site.toLowerCase()===e.toLowerCase()?"#F7DC5B":"#FEFAF1")),n.style("stroke",(t=>t.site.toLowerCase()===e.toLowerCase()?"#E75C33":"#282828")),n.style("stroke-width",(t=>t.site.toLowerCase()===e.toLowerCase()?"3":"1")),n.style("opacity",(t=>t.site.toLowerCase()===e.toLowerCase()||""===e?"1":"0.2")),r.style("opacity",(t=>t.site.toLowerCase()===e.toLowerCase()||""===e?"1":"0.2")))}function L(e,t,n){return n.indexOf(e)===t}function R(){let[e,t]=d3.pointer(event),n=e>window.innerWidth/2?h.node().offsetWidth+-50:50,r=d3.select(this).attr("id");r=r.split("-"),r=r[0];let a=r.replace(/\./g,""),o=(d3.selectAll(".forceCircles").style("opacity",.2),d3.selectAll(".forceLogo").style("opacity",.2),d3.select(this)),i=d3.selectAll(`.forceLogo-${a}`);o.style("stroke-width",3).style("stroke","#E75C33").style("opacity",1).style("fill","#F7DC5B"),i.style("opacity",1);let s=w.filter((e=>e.site===r)),l=Math.floor(Math.random()*s.length);h.classed("is-visible",!0),k>=600?h.style("top",`${t}px`).style("left",e-n+"px").style("bottom","auto"):h.style("bottom","0px").style("left","0px").style("top","auto"),h.html(`<p class="tt-date">${d3.timeFormat("%b %Y")(new Date(s[l].time))} | ${s[l].site}</p>\n                      <p class="tt-hed">${s[l].headline_no_site}</p>`)}function O(){h.classed("is-visible",!1),d3.selectAll(".forceCircles").style("stroke-width","1").style("stroke","#282828").style("opacity",1).style("fill","#FEFAF1"),d3.selectAll(".forceLogo").style("opacity",1)}const j={init(){n=t.append("svg").attr("class","pudding-chart"),r=n.append("g").attr("class","g-axis"),d=n.append("g").attr("class","g-legend"),u=d.append("g"),a=n.append("g").attr("class","g-vis"),j.resize(),j.render()},resize(){k=t.node().offsetWidth-50-50,A=t.node().offsetHeight-50-120;let e=k>=500?18:12;D.range([3,k/e]),E.range([12,k/e]),I=d3.max(b,(e=>+e.monthly_visits)),I=D(I),n.attr("width",k+50+50).attr("height",A+50+120),a.attr("width",k+50+50).attr("height",A+50+120),C=d3.scaleLinear().range([100,k-2*I]).domain(d3.extent(b,(e=>+e[v]))),T=d3.scaleLinear().range([170,A-2*I]).domain(d3.extent(b,(e=>+e[v]))),x=[{level:"",radius:D(1e7),y:A+75,x:k/2+I,anchor:"end",xtext:k/2.235,ytext:A+53,id:""},{level:"",radius:D(1e8),y:A+75,x:k/2+1.5*I,id:""},{level:"1B Monthly Viewers",radius:D(1e9),y:A+75,x:k/2+2.75*I,anchor:"middle",xtext:k/2+2.75*I,ytext:A+60-10,id:""}];let r=k>=500?-I:-k/2-I/1.5;d.attr("transform",`translate(${r},50)`),u.selectAll("circle").data(x).join("circle").attr("cx",(e=>e.x)).attr("cy",(e=>e.y)).attr("r",(e=>e.radius)).attr("class","legendBubble"),p=d.selectAll("text").data(x).join("text").text((e=>e.level)).attr("x",(e=>e.xtext)).attr("y",(e=>e.ytext)).attr("class","themesText").style("text-anchor",(e=>e.anchor)).call(c,10),M=d3.forceSimulation().nodes(b).force("x",d3.forceX().x((function(e){return C(+e[v])})).strength(1)).force("y",d3.forceY(A/2).strength(.2)).force("collide",d3.forceCollide((e=>D(+e.monthly_visits)))).stop();for(var m=0;m<300;m++)M.tick();return o=a.selectAll("circle").data(b),i=a.selectAll("image").data(b),s=o.join("circle").attr("class","forceCircles").attr("id",(e=>`${e.site}-circle`)).style("opacity","1").attr("r",(e=>D(+e.monthly_visits))).on("mouseenter",R).on("mouseleave",O),o.merge(s).attr("cx",(function(e){return k>=500?e.x:e.y})).attr("cy",(function(e){return k>=500?e.y:e.x})),l=i.join("svg:image").attr("class",(function(e){return`forceLogo-${e.site.replace(/\./g,"")} forceLogo`})).attr("transform",(function(e){let t=D(+e.monthly_visits);return`translate(-${t/2}, -${t/2})`})).attr("width",(e=>E(+e.monthly_visits))).attr("height",(e=>E(+e.monthly_visits))).attr("xlink:href",(function(e){return+e.monthly_visits>15e7?`assets/images/logos/${_.filter((t=>t.site==e.site))[0].link}`:""})).attr("x",(function(e){return k>=500?e.x:e.y})).attr("y",(function(e){return k>=500?e.y:e.x})),j},render:()=>(a.attr("transform","translate(100, 50)"),F(g,"#countrydropdown","country_of_pub"),F(g,"#pubdropdown","site"),m.on("change",S),f.on("change",S),j),data(e){return arguments.length?(y=e,t.datum(y),j):y}};return j.init(),j}));return t.length>1?t:t.pop()};let d=[{uid:1,name:"Lady Gaga ends deal with Target over anti-gay issues",category:4,categories:"race, ethnicity and identity",date:new Date(2011,2,9)},{uid:1,name:"Horrifying gang rape and murder in New Delhi, India",category:4,categories:"crime and violence",date:new Date(2012,11,16)},{uid:1,name:"The U.S. military removes a ban against women serving in combat positions",category:4,categories:"empowerment",date:new Date(2013,1,24)},{uid:1,name:"On May 8, 2013, Cleveland Kidnapping Suspect Ariel Castro is charged with four counts of kidnapping and three counts of rape.",category:4,categories:"crime and violence",date:new Date(2013,4,8)},{uid:1,name:"A new Pentagon report found a 50% increase in sexual assault reports in 2013",category:4,categories:"crime and violence",date:new Date(2014,5,1)},{uid:1,name:"Caitlyn Jenner comes out in an interview",category:4,categories:"race, ethnicity and identity",date:new Date(2015,4,24)},{uid:1,name:"A survey for the Department of Defense finds that in the past year 52% of active service members who reported sexual assault had experienced retaliation in the form of professional, social, and administrative actions or punishments.",category:4,categories:"crime and violence",date:new Date(2015,4,18)},{uid:2,name:"People v. Turner: Brock Turner is arrested for sexually assaulting an unconscious woman",category:4,categories:"crime and violence",date:new Date(2015,1,18)},{uid:1,name:"#EndRapeCulture in South Africa",category:4,categories:"empowerment",date:new Date(2016,4,0)},{uid:2,name:"Hillary Clinton becomes the first woman to receive a presidential nomination from a major political party",category:4,categories:"empowerment",date:new Date(2016,7,26)},{uid:3,name:"Trump: “Grab ‘em by the pussy”",category:4,categories:"crime and violence",date:new Date(2016,10,8)},{uid:4,name:"People v. Turner: Brock Turner is convicted for three counts of felony sexual assault",category:4,categories:"crime and violence",date:new Date(2016,3,30)},{uid:5,name:"People v. Turner: Brock Turner is released after spending 3 months in jail",category:4,categories:"crime and violence",date:new Date(2016,9,2)},{uid:1,name:"Multiple actors, including Meryl Streep, come forward and say they were groped by Dustin Hoffman on set.",category:4,categories:"crime and violence",date:new Date(2017,1,1)},{uid:1,name:"#MeToo in U.S.A.",category:4,categories:"empowerment",date:new Date(2017,10,15)},{uid:2,name:"Harvey Weinstein Trial",category:4,categories:"crime and violence",date:new Date(2017,10,0)},{uid:3,name:"#ChurchToo in U.S.A.",category:4,categories:"empowerment",date:new Date(2017,11,0)},{uid:4,name:"#MeTooSTEM and removal of Francisco J. Ayala from UC Irvine",category:4,categories:"empowerment",date:new Date(2017,11,0)},{uid:5,name:"Release of Wonder Woman",category:4,categories:"empowerment",date:new Date(2017,5,15)},{uid:6,name:"Larry Nassar U.S. Gymnastics doctor sexual assault scandal",category:4,categories:"crime and violence",date:new Date(2017,12,0)},{uid:7,name:"Jessie Reyez releases “Gatekeeper”",category:4,categories:"empowerment",date:new Date(2017,4,26)},{uid:8,name:"The 2017 Westminster sexual scandals in the U.K. and resignation of Sir Michael Fallon",category:4,categories:"crime and violence",date:new Date(2017,11,0)},{uid:8,name:"Multiple occurrences of muslim women being forced to remove Hijab in the U.S. and U.K.",category:4,categories:"crime and violence",date:new Date(2017,0,0)},{uid:1,name:"Meghan Markle’s wedding to Prince Harry in U.K.",category:4,categories:"no theme",date:new Date(2018,5,19)},{uid:2,name:"MEE TOO bill in U.S. Congress",category:4,categories:"empowerment",date:new Date(2018,1,18)},{uid:3,name:"Priyanka Chopra marries Nick Jonas in India",category:4,categories:"no theme",date:new Date(2018,12,1)},{uid:4,name:"People v. Turner: Brock Turner is convicted by jury trial of three counts of felony sexual assault",category:4,categories:"crime and violence",date:new Date(2018,1,0)},{uid:5,name:"Google’s Andy Rubin sexual misconduct scandal",category:4,categories:"crime and violence",date:new Date(2018,10,25)},{uid:6,name:"Global Women’s March",category:4,categories:"empowerment",date:new Date(2018,1,20)},{uid:7,name:"#MeTooMilitary in U.S.A",category:4,categories:"empowerment",date:new Date(2018,1,0)},{uid:8,name:"#MeToo in India",category:4,categories:"empowerment",date:new Date(2018,10,0)},{uid:9,name:"Mass sexual assaults during the 2018 new year's celebrations in Bangalore",category:4,categories:"crime and violence",date:new Date(2018,12,0)},{uid:10,name:"Indian actress Tanushree Dutta accuses Nana Patekar of sexual harassment",category:4,categories:"empowerment",date:new Date(2018,9,27)},{uid:11,name:"Indian minister of state for External Affairs, MJ Akbar is accused of sexual harassment by several female colleagues through the 'Me Too' Movement in India",category:4,categories:"crime and violence",date:new Date(2018,10,0)},{uid:12,name:"Indian music director Anu Malik is suspended from the jury panel of Indian Idol 2018, after facing multiple allegations of sexual harassment",category:4,categories:"crime and violence",date:new Date(2018,10,21)},{uid:1,name:"Greta Thunberg: Climate Action Summit and sail to NYC",category:4,categories:"empowerment",date:new Date(2019,8,28)},{uid:2,name:"Release of “Surviving R. Kelly” documentary",category:4,categories:"empowerment",date:new Date(2019,1,0)},{uid:3,name:"Arrest of R. Kelly for 10 counts of sexual abuse against four women",category:4,categories:"crime and violence",date:new Date(2019,2,0)},{uid:1,name:"#SayHerName: Murder of Breonna Taylor",category:4,categories:"crime and violence",date:new Date(2020,3,0)},{uid:2,name:"International Women’s Cricket T20",category:4,categories:"empowerment",date:new Date(2020,2,0)},{uid:2,name:"Dalit girl gangraped in Hathras, Uttar Pradesh, India",category:4,categories:"crime and violence",date:new Date(2020,8,14)},{uid:2,name:"Healthcare workers all over the world receive media attention for their crucial role in the COVID-19 pandemic.",category:4,categories:"empowerment",date:new Date(2020,4,0)},{uid:3,name:"Rape and murder of Vanessa Guillén in U.S. military",category:4,categories:"crime and violence",date:new Date(2020,4,22)},{uid:1,name:"16 year old Ma'Khia Bryant is fatally shot by police officer Nicholas Reardon in Columbus, Ohio",category:4,categories:"crime and violence",date:new Date(2021,4,20)},{uid:2,name:"Kamala Harris is sworn in as the first woman and first woman of color vice president of the United States",category:4,categories:"empowerment",date:new Date(2021,1,20)},{uid:3,name:"Oprah with Meghan and Harry and “Megxit”",category:4,categories:"empowerment",date:new Date(2021,3,7)},{uid:3,name:"Study finds that Indian women politicians face more trolling than US, UK counterparts",category:4,categories:"no theme",date:new Date(2021,0,24)},{uid:3,name:"40% Indian women fear online trolls as they access Internet: Nielson report",category:4,categories:"no theme",date:new Date(2019,11,17)},{uid:3,name:"Indian central government passes the Citizenship Amendment Act, by providing a pathway to Indian citizenship for persecuted religious minorities from Afghanistan, Bangladesh and Pakistan who are Hindus, Sikhs, Buddhists, Jains, Parsis or Christians, and arrived in India before the end of December 2014",category:4,categories:"race, ethnicity and identity",date:new Date(2019,11,12)},{uid:3,name:"India saw, for the first time, a sustained countrywide movement led by Women against the CAA-NRC bills",category:4,categories:"empowerment",date:new Date(2020,0,13)},{uid:3,name:"defamation case filed by former Union minister M J Akbar's against journalist Priya Ramani who had accused him of sexual harassment",category:4,categories:"crime and violence",date:new Date(2021,4,5)},{uid:3,name:"A majority judgement which declared the prohibition of entry of women aged between 10 and 50 into Sabarimala temple, as unconstitutional and discriminatory",category:4,categories:"race, ethnicity and identity",date:new Date(2018,8,28)},{uid:3,name:"An Indian Supreme Court Bench declared muslim instantaneous divorce, triple Talaq, as unconstitutional",category:4,categories:"race, ethnicity and identity",date:new Date(2019,6,31)},{uid:3,name:"Indian court grants bail to Nupur Talwar, a dentist accused in the twin murder of her daughter and domestic help",category:4,categories:"crime and violence",date:new Date(2019,6,31)},{uid:3,name:"Kanimozhi Karunanidhi, Member of Parliament, accused in 2G scam, refused bail",category:4,categories:"no theme",date:new Date(2011,4,11)},{uid:3,name:"Accused who set fire to the rape survivor from Unnao, Uttar Pradesh, India, out on bail",category:4,categories:"crime and violence",date:new Date(2019,11,5)},{uid:3,name:"Saudi Arabia lifts travel restrictions on its women",category:4,categories:"empowerment",date:new Date(2019,7,2)},{uid:3,name:"Saudi Arabia makes it legal for women to drive",category:4,categories:"empowerment",date:new Date(2018,5,24)},{uid:3,name:"Multiple women enter inner sanctum of temples across the country, after protest",category:4,categories:"race, ethnicity and identity",date:new Date(2016,2,3)},{uid:3,name:"Section 377: Indian Supreme Court legalizes consensual sexual conduct between adults of the same sex",category:4,categories:"empowerment",date:new Date(2018,8,6)},{uid:3,name:"Women’s Cricket World Cup 2017",category:4,categories:"empowerment",date:new Date(2017,5,23)},{uid:3,name:"The Marikana massacre was the killing of 34 miners by the South African Police Service (SAPS). It took place on 16 August 2012, and was the most lethal use of force by South African security forces against civilians since 1976.",category:4,categories:"crime and violence",date:new Date(2012,7,16)},{uid:3,name:"On 11 April 2015, several South Africans attacked foreigners in a xenophobic attack in Durban, South Africa, which extended to some parts of Johannesburg. Several people, both foreign and South African alike, were killed with some of the killings captured on camera.",category:4,categories:"crime and violence",date:new Date(2015,3,11)},{uid:3,name:"Brutal gang rape and subsequent death of South African teenager",category:4,categories:"crime and violence",date:new Date(2013,1,2)},{uid:3,name:"Monica Lewinsky breaks decade-long media silence",category:4,categories:"empowerment",date:new Date(2014,4,6)}];d3.selection.prototype.puddingTemporalLine=function(e){const t=this.nodes().map((function(e){const t=d3.select(e);let n=null,r=null,a=null,o=null,i=null,s=null,l=null,c=null,u=null,p=null,m=d3.selectAll(".tooltip"),f=t.datum(),h=f[0],y=f[1],g=f[2],w=f[3],v=null;const b=["trans","axe","outrage","fraud","hijacking","injury","wound","injure","robbery","fatally","scream","crime","shoot","bail","fire","harassment","trap","rob","cop","fatal","gang","die","court","allege","fight","violent","steal","gun","bully","judge","murderer","risk","funeral","law","threat","plead","killing","escape","fall","alleged","convict","slap","defend","bust","prison","battle","war","accident","tragic","thug","jail","robber","kill","domestic","sexually","pregnancy","feel","care","mama","grace","skin","body","kid","mum","fiance","lie","shop","actress","wedding","widow","throne","board","coach","equal","launch","actor","incredible","worker","olympic","job","employee","work","campaign","teacher","parent","great","star","perfect","singer","celebrity","idol","tamil","leadership"];let x=h.filter((e=>e.year>y[0]&&e.year<y[1]&&e.country===g&&"people and places"!==e.theme&&"important people"!==e.theme&&"No theme"!==e.theme&&!b.includes(e.word)));const _=["crime and violence","female stereotypes","empowerment","race, ethnicity and identity"],k=({data:e,sortBy:t,sortField:n})=>{const r=t.reduce(((e,t,n)=>({...e,[t]:n})),{});return e.sort(((e,t)=>r[e[n]]-r[t[n]]))};x=k({data:x,sortBy:_,sortField:"theme"});let A=function(e){const t=d3.rollups(e.filter((e=>e.theme===_[0])).sort(((e,t)=>d3.ascending(e.freq_prop_headlines,t.freq_prop_headlines))),(e=>e[0].year),(e=>e.word)).sort(((e,t)=>d3.ascending(e[1],t[1]))).map((e=>e[0])),n=d3.rollups(e.filter((e=>e.theme===_[1])).sort(((e,t)=>d3.ascending(e.freq_prop_headlines,t.freq_prop_headlines))),(e=>e[0].year),(e=>e.word)).sort(((e,t)=>d3.ascending(e[1],t[1]))).map((e=>e[0])),r=d3.rollups(e.filter((e=>e.theme===_[2])).sort(((e,t)=>d3.ascending(e.freq_prop_headlines,t.freq_prop_headlines))),(e=>e[0].year),(e=>e.word)).sort(((e,t)=>d3.ascending(e[1],t[1]))).map((e=>e[0])),a=d3.rollups(e.filter((e=>e.theme===_[3])).sort(((e,t)=>d3.ascending(e.freq_prop_headlines,t.freq_prop_headlines))),(e=>e[0].year),(e=>e.word)).sort(((e,t)=>d3.ascending(e[1],t[1]))).map((e=>e[0]));return t.concat(n,r,a)}(x);const C=d3.map(x,(e=>e.word)).filter((function(e,t,n){return n.indexOf(e)===t})).length/1;let T=d3.cross(d3.range(C),d3.range(1),((e,t)=>({row:e,col:t})));x=x.map((e=>({year:e.year,frequency:e[w],word:e.word,word_type:e.word_type,theme:e.theme})));let B,D,E,M=d3.rollup(x,(e=>e.map((({year:e,frequency:t})=>({date:new Date(e,0,1),frequency:t})))),(e=>e.word)),I=d3.zip(k({data:Array.from(M),sortBy:A,sortField:"0"}),T).map((([[e,t],{row:n,col:r}])=>({word:e,rates:t,row:n,col:r}))),F=I[0].rates[0].date,S=I[0].rates[I[0].rates.length-1].date,L=(new Date(2010,0).getTime(),new Date(2021,0).getTime(),d),R=0,O=0,j=null,$=null,P=null,N=null;function z(e,t){c.attr("opacity",.125),l.attr("opacity",.25),d3.selectAll(".wordText").attr("opacity",.125),d3.select("#area-"+t.word).attr("opacity",.85),d3.select("#line-"+t.word).attr("opacity",1),d3.select("#text"+t.word).attr("opacity",1)}function q(){c.attr("opacity",.5),l.attr("opacity",1),d3.selectAll(".wordText").attr("opacity",1)}const H={init(){n=t.append("svg").attr("class","pudding-chart");let e=n.append("defs"),d=e.append("linearGradient").attr("id","linear-gradient-F");d.attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%"),d.append("stop").attr("offset","0%").attr("stop-color","#53B67C"),d.append("stop").attr("offset","90%").attr("stop-color","#FEFAF1"),d.append("stop").attr("offset","100%").attr("stop-color","#FEFAF1");let m=e.append("linearGradient").attr("id","linear-gradient-V");m.attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%"),m.append("stop").attr("offset","0%").attr("stop-color","#f76e45"),m.append("stop").attr("offset","90%").attr("stop-color","#FEFAF1"),m.append("stop").attr("offset","100%").attr("stop-color","#FEFAF1");let f=e.append("linearGradient").attr("id","linear-gradient-E");f.attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%"),f.append("stop").attr("offset","0%").attr("stop-color","#F7DC5B"),f.append("stop").attr("offset","90%").attr("stop-color","#FEFAF1"),f.append("stop").attr("offset","100%").attr("stop-color","#FEFAF1");let h=e.append("linearGradient").attr("id","linear-gradient-R");h.attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%"),h.append("stop").attr("offset","0%").attr("stop-color","#F2C5D3"),h.append("stop").attr("offset","90%").attr("stop-color","#FEFAF1"),h.append("stop").attr("offset","100%").attr("stop-color","#FEFAF1");let y=e.append("linearGradient").attr("id","linear-gradient-P");y.attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%"),y.append("stop").attr("offset","0%").attr("stop-color","#5787f2"),y.append("stop").attr("offset","90%").attr("stop-color","#FEFAF1"),y.append("stop").attr("offset","100%").attr("stop-color","#FEFAF1");let g=e.append("linearGradient").attr("id","linear-gradient-NT");g.attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%"),g.append("stop").attr("offset","0%").attr("stop-color","lightgrey"),g.append("stop").attr("offset","90%").attr("stop-color","#FEFAF1"),g.append("stop").attr("offset","100%").attr("stop-color","#FEFAF1"),r=n.append("g").attr("class","g-axis"),o=d3.scaleBand().domain(d3.range(C)).paddingInner(-1),i=d3.scaleBand().domain(d3.range(1)).paddingInner(.2),a=n.append("g").attr("class","g-vis"),s=a.append("g").selectAll("g").data(I).join("g").attr("class",(e=>"female stereotypes"===x.filter((t=>t.word===e.word))[0].theme?"biasCells":"empowerment"===x.filter((t=>t.word===e.word))[0].theme?"empCells":"crime and violence"===x.filter((t=>t.word===e.word))[0].theme?"crimeCells":"race, ethnicity and identity"===x.filter((t=>t.word===e.word))[0].theme?"raceCells":"important people"===x.filter((t=>t.word===e.word))[0].theme?"peopleCells":"ntCells")).attr("transform",(e=>`translate(${i(e.col)}, ${o(e.row)})`)).on("mouseover",((e,t)=>z(0,t))).on("mouseleave",((e,t)=>q())),c=s.append("path").attr("fill",(e=>"female stereotypes"===x.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-F)":"empowerment"===x.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-E)":"crime and violence"===x.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-V)":"race, ethnicity and identity"===x.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-R)":"important people"===x.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-P)":"url(#linear-gradient-NT)")).attr("opacity",.5).attr("class","wordArea").attr("id",(e=>`area-${e.word}`)).on("mouseover",((e,t)=>z(0,t))).on("mouseleave",((e,t)=>q())),l=s.append("path").style("stroke",(e=>"female stereotypes"===x.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-F)":"empowerment"===x.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-E)":"crime and violence"===x.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-V)":"race, ethnicity and identity"===x.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-R)":"important people"===x.filter((t=>t.word===e.word))[0].theme?"url(#linear-gradient-P)":"url(#linear-gradient-NT)")).attr("stroke-width",1).attr("fill","none").attr("class","wordArea").attr("id",(e=>`line-${e.word}`)).on("mouseover",((e,t)=>z(0,t))).on("mouseleave",((e,t)=>q())),p=a.append("rect").attr("class","timeRuler"),N=d3.select("div#stickyXaxis").append("svg").attr("class","stickyAxis"),P=N.append("g"),u=N.append("g"),H.resize(),H.render()},resize(){R=t.node().offsetWidth-80-0,O=t.node().offsetHeight-50-20,n.attr("width",R+80+0).attr("height",O+50+20),o.range([0,O]),i.range([0,R]),j=d3.scaleTime().domain([F,S]).range([0,i.bandwidth()]),$=d3.axisBottom(j).ticks(10).tickSizeOuter(0).tickSizeInner(0).tickPadding(30).tickFormat(((e,t)=>0==t||3==t||6==t||9==t||11==t?d3.timeFormat("%Y")(new Date(e)):""));let e=Object.fromEntries(I.map((e=>{const t=d3.max(e.rates,(e=>+e.frequency)),n=d3.scaleLinear().domain([0,t]).range([o.bandwidth(),0]).nice();return B=d3.curveMonotoneX,D=d3.area().x((e=>j(e.date))).y1((e=>n(e.frequency))).y0((e=>n(0))).curve(d3.curveMonotoneX),E=d3.line().x((e=>j(e.date))).y((e=>n(e.frequency))).curve(d3.curveMonotoneX),[e.word,{y:n,area:D,line:E}]})));return s.attr("transform",(e=>`translate(${i(e.col)}, ${o(e.row)})`)),c.attr("d",(t=>e[t.word].area(t.rates))),l.attr("d",(t=>e[t.word].line(t.rates))),s.each((function(t){const n=d3.select(this).attr("class","SMCell").attr("id",(e=>"cell"+e.word));d3.axisLeft(e[t.word].y).ticks(2).tickSizeOuter(0),n.append("g").attr("class","catLabel").append("text").attr("x",-10).attr("y",o.bandwidth()).attr("class","wordText").attr("id",(e=>"text"+e.word)).text(t.word).on("mouseover",((e,t)=>z(0,t))).on("mouseleave",((e,t)=>q()))})),N.attr("transform","translate(80, 0)").attr("width",R+80+0).attr("height",200),P.attr("transform",`translate(${i(0)}, 75)`).call($),function(e,{radius:t=1,x:n=(e=>e)}={}){const r=t**2,a=e.map(((t,r)=>({x:+n(t,r,e),data:t}))).sort(((e,t)=>e.x-t.x));let o=null,i=null;function s(e,t){let n=o;for(;n;){if(r-.001>(n.x-e)**2+(n.y-t)**2)return!0;n=n.next}return!1}for(const e of a){for(;o&&o.x<e.x-r;)o=o.next;if(s(e.x,e.y=0)){let t=o;e.y=1/0;do{let n=t.y+Math.sqrt(r-(t.x-e.x)**2),a=t.y-Math.sqrt(r-(t.x-e.x)**2);Math.abs(n)<Math.abs(e.y)&&!s(e.x,n)&&(e.y=n),Math.abs(a)<Math.abs(e.y)&&!s(e.x,a)&&(e.y=a),t=t.next}while(t)}e.next=null,null===o?o=i=e:i=i.next=e}v=a}(L.filter((e=>e.date<=S)),{radius:11.5,x:e=>j(e.date)}),u.attr("transform",`translate(${i(0)}, 75)`).selectAll("circle").data(v).join("circle").attr("class","event-circle").attr("cx",(e=>e.x)).attr("cy",(e=>e.y)).attr("r",5).attr("fill",(e=>"empowerment"===e.data.categories?"#F7DC5B":"crime and violence"===e.data.categories?"#f76e45":"race, ethnicity and identity"===e.data.categories?"#F2C5D3":"people and places"===e.data.categories?"#5787f2":"lightgrey")).attr("stroke",(e=>"empowerment"===e.data.categories?"#F7DC5B":"crime and violence"===e.data.categories?"#f76e45":"race, ethnicity and identity"===e.data.categories?"#F2C5D3":"people and places"===e.data.categories?"#5787f2":"lightgrey")).on("mouseover",((e,t)=>function(e,t){let n=d3.select(e.currentTarget);d3.selectAll(".event-circle").style("opacity","0.5"),n.style("opacity","1").style("stroke","#282828").style("stroke-width",2),p.attr("transform",`translate(${i(0)}, -${50/3})`).attr("x",j(t.date)-9).attr("y",0).attr("height",O).attr("width",20).style("opacity",1);let[r,a]=d3.pointer(e),o=r>window.innerWidth/2?m.node().offsetWidth+-50:50;m.classed("is-visible",!0),R>=600?m.style("top","10px").style("left",r-o+"px").style("bottom","auto"):m.style("bottom","0px").style("left","0px").style("top","auto"),m.html(`<p class="tt-date">${d3.timeFormat("%m/%Y")(t.date)}</p><p class="tt-hed">${t.name}</p>`)}(e,t.data))).on("mouseleave",((e,t)=>(t.data,p.style("opacity",0),d3.selectAll(".event-circle").style("opacity","1").style("stroke","none"),void m.classed("is-visible",!1)))),H},render:()=>(a.attr("transform","translate(80, 50)"),H),data(e){return arguments.length?(f=e,t.datum(f),H):f}};return H.init(),H}));return t.length>1?t:t.pop()},n(337);var u=n(99),p=n.n(u),m=n(633),f=n.n(m);let h,y,g,w,v,b,x,_,k,A,C,T,B,D,E,M,I=["headlines_site_rapi.csv","headlines_cl_sent_rapi_reduced_102621.csv","country_time_freqrank_rapi_clean_101421.csv","polarity_comparison.csv","country_freq_pivoted_all_101221.csv","word_themes_all_101221.csv","word_themes_rank_101221.csv","word_themes_freq_101221.csv","sentiment_comparison.csv"],F=null,S=null,L=null,R=null,O=null,j=null;const $=d3.select("#stickyStackedChart"),P=d3.selectAll("#stackedChartLegend .step"),N=d3.selectAll("#timeSeriesChart"),z=d3.select("#lollipopChart");let q=null,H=d3.select("#smChart"),U=d3.select("#countrydropdownTemporal"),W=d3.selectAll(".stackedBarTextAnnotation"),V=d3.selectAll(".btn-theme");const G=p()();function K(e){var t,n;P.classed("is-active",((t,n)=>n===e.index)),t=e.index,n=e.direction,F.updateChart(t,n)}function Y(e){j=H.datum(e).puddingTemporalLine()}function J(e,t){window.scroll({behavior:"smooth",left:0,top:e.offsetTop+t})}function X(){let e=d3.select(this).attr("value");d3.selectAll(".stackedBars rect").attr("opacity","0.5"),d3.selectAll(`.stackedBars .${e}_class`).attr("opacity","1")}function Q(){let e=d3.select(this).attr("value");"wear"===e&&(d3.selectAll(".stackedBars rect").attr("opacity","0.5"),d3.selectAll(`.stackedBars .${e}_class`).attr("opacity","1"),d3.selectAll(".stackedBars .change_class").attr("opacity","1"),d3.selectAll(".stackedBars .force_class").attr("opacity","1")),"force"===e&&(d3.selectAll(".stackedBars rect").attr("opacity","0.5"),d3.selectAll(`.stackedBars .${e}_class`).attr("opacity","1"),d3.selectAll(".stackedBars .change_class").attr("opacity","1"),d3.selectAll(".stackedBars .wear_class").attr("opacity","1")),"change"===e&&(d3.selectAll(".stackedBars rect").attr("opacity","0.5"),d3.selectAll(`.stackedBars .${e}_class`).attr("opacity","1"),d3.selectAll(".stackedBars .wear_class").attr("opacity","1"),d3.selectAll(".stackedBars .force_class").attr("opacity","1")),"rape"===e&&(d3.selectAll(".stackedBars rect").attr("opacity","0.5"),d3.selectAll(`.stackedBars .${e}_class`).attr("opacity","1"),d3.selectAll(".stackedBars .death_class").attr("opacity","1")),"death"===e&&(d3.selectAll(".stackedBars rect").attr("opacity","0.5"),d3.selectAll(`.stackedBars .${e}_class`).attr("opacity","1"),d3.selectAll(".stackedBars .rape_class").attr("opacity","1")),"body"===e&&(d3.selectAll(".stackedBars rect").attr("opacity","0.5"),d3.selectAll(`.stackedBars .${e}_class`).attr("opacity","1"),d3.selectAll(".stackedBars .child_class").attr("opacity","1"),d3.selectAll(".stackedBars .marry_class").attr("opacity","1")),"child"===e&&(d3.selectAll(".stackedBars rect").attr("opacity","0.5"),d3.selectAll(`.stackedBars .${e}_class`).attr("opacity","1"),d3.selectAll(".stackedBars .body_class").attr("opacity","1"),d3.selectAll(".stackedBars .marry_class").attr("opacity","1")),"marry"===e&&(d3.selectAll(".stackedBars rect").attr("opacity","0.5"),d3.selectAll(`.stackedBars .${e}_class`).attr("opacity","1"),d3.selectAll(".stackedBars .child_class").attr("opacity","1"),d3.selectAll(".stackedBars .body_class").attr("opacity","1")),"crimeandviolence"!==e&&"femalestereotypes"!==e&&"empowerment"!==e&&"peopleandplaces"!==e&&"raceethnicictyandidentity"!==e||(d3.selectAll(".stackedBars rect").attr("opacity","0.5"),d3.selectAll(".stackedBars .crimeandviolence_class").attr("opacity","1"),d3.selectAll(".stackedBars .femalestereotypes_class").attr("opacity","1"),d3.selectAll(".stackedBars .empowerment_class").attr("opacity","1"),d3.selectAll(".stackedBars .peopleandplaces_class").attr("opacity","1"),d3.selectAll(".stackedBars .raceethnicictyandidentity_class").attr("opacity","1"))}function Z(){const e=this.value;console.log(e),d3.select("#smChart svg").remove(),d3.select("#stickyXaxis svg").remove(),M=[g,B,e,E],Y(M)}function ee(){let e=d3.select(this),t=e.attr("id").split("-")[1];V.classed("active-btn-violence",!1),V.classed("active-btn-empowerment",!1),V.classed("active-btn-race",!1),V.classed("active-btn-stereotypes",!1),e.classed(`active-btn-${t}`,!0);let n=d3.select("#smChart").node();"violence"===t&&J(n,-100),"stereotypes"===t&&J(n,4032),"empowerment"===t&&J(n,8138),"race"===t&&J(n,12390)}function te(){const e=Math.floor(.75*window.innerHeight)/2;P.style("height",e+"px");const t=d3.select(".scrolly figure");d3.select("body").node().offsetWidth,t.style("height",window.innerHeight+"px");let n=0;const r=d3.select("body").node().offsetWidth;n!==r&&(n=r,F.resize(),S.resize(),L.resize(),R.resize(),O.resize(),j.resize())}var ne={init:function(){(function(e){if("string"==typeof e)return l(e);const t=e.map(l);return Promise.all(t)})(I).then((e=>{h=e[0],y=e[1],g=e[2],w=e[3],v=e[4],b=e[5],x=e[6],_=e[7],k=e[8],B=[2009,2022],D="USA",E="freq_prop_headlines",T=[v,b,x,_],A=[h,y,"bias"],C=[h,y,"polarity"],M=[g,B,"USA",E],G.setup({container:".scrolly",graphic:".scrolly figure",text:".scrolly article",step:"#stackedChartLegend .step",offset:.7}).onStepEnter(K),function(e){F=$.datum(e).puddingStackedBar()}(T),function(e){S=N.datum(e).puddingTimeSeriesLine()}(k),function(e){L=z.datum(e).puddingLollipop()}(w),function(e){q=d3.select("#chartB"),R=q.datum(e).puddingBubble()}(A),function(e){q=d3.select("#chartP"),O=q.datum(e).puddingBubble()}(C),Y(M),f()({selector:"#cellviolence",offset:1,enter:()=>{V.classed("active-btn-violence",!1),V.classed("active-btn-empowerment",!1),V.classed("active-btn-race",!1),V.classed("active-btn-stereotypes",!1),d3.selectAll("#btn-violence").classed("active-btn-violence",!0)}}),f()({selector:"#cellemotional",offset:1,enter:()=>{V.classed("active-btn-violence",!1),V.classed("active-btn-empowerment",!1),V.classed("active-btn-race",!1),V.classed("active-btn-stereotypes",!1),d3.selectAll("#btn-stereotypes").classed("active-btn-stereotypes",!0)},exit:()=>{V.classed("active-btn-violence",!1),V.classed("active-btn-empowerment",!1),V.classed("active-btn-race",!1),V.classed("active-btn-stereotypes",!1),d3.selectAll("#btn-violence").classed("active-btn-violence",!0)}}),f()({selector:"#cellmayor",offset:1,enter:()=>{V.classed("active-btn-violence",!1),V.classed("active-btn-empowerment",!1),V.classed("active-btn-race",!1),V.classed("active-btn-stereotypes",!1),d3.selectAll("#btn-empowerment").classed("active-btn-empowerment",!0)},exit:()=>{V.classed("active-btn-violence",!1),V.classed("active-btn-empowerment",!1),V.classed("active-btn-race",!1),V.classed("active-btn-stereotypes",!1),d3.selectAll("#btn-stereotypes").classed("active-btn-stereotypes",!0)}}),f()({selector:"#cellasian",offset:1,enter:()=>{V.classed("active-btn-violence",!1),V.classed("active-btn-empowerment",!1),V.classed("active-btn-race",!1),V.classed("active-btn-stereotypes",!1),d3.selectAll("#btn-race").classed("active-btn-race",!0)},exit:()=>{V.classed("active-btn-violence",!1),V.classed("active-btn-empowerment",!1),V.classed("active-btn-race",!1),V.classed("active-btn-stereotypes",!1),d3.selectAll("#btn-empowerment").classed("active-btn-empowerment",!0)}}),te(),W.on("mouseenter",X),W.on("mouseleave",Q),d3.select("#countrydropdownTemporal").selectAll("option").data(["all countries","India","South Africa","UK","USA"]).join("option").attr("value",(e=>e)).text((e=>e)),U.node().options[4].selected=!0,U.on("change",Z),V.on("click",ee)})).catch(console.error)},resize:te};const re=[{image:"2018_02_stand-up",url:"2018/02/stand-up",hed:"The Structure of Stand-Up Comedy"},{image:"2018_04_birthday-paradox",url:"2018/04/birthday-paradox",hed:"The Birthday Paradox Experiment"},{image:"2018_11_boy-bands",url:"2018/11/boy-bands",hed:"Internet Boy Band Database"},{image:"2018_08_pockets",url:"2018/08/pockets",hed:"Women’s Pockets are Inferior"}];let ae=null;function oe(e){return`\n\t<a class='footer-recirc__article' href='https://pudding.cool/${e.url}' target='_blank' rel='noopener'>\n\t\t<img class='article__img' src='https://pudding.cool/common/assets/thumbnails/640/${e.image}.jpg' alt='${e.hed}'>\n\t\t<p class='article__headline'>${e.hed}</p>\n\t</a>\n\t`}var ie=function(){!function(e){const t=new XMLHttpRequest,n=`https://pudding.cool/assets/data/stories.json?v=${Date.now()}`;t.open("GET",n,!0),t.onload=()=>{if(t.status>=200&&t.status<400){const n=JSON.parse(t.responseText);e(n)}else e(re)},t.onerror=()=>e(re),t.send()}((e=>{ae=e,function(){const e=window.location.href,t=ae.find((t=>e.includes(t.url))),n=t?t.topic:"culture",r=ae.filter((t=>!e.includes(t.url))),a=r.filter((e=>e.topic!==n)),o=r.filter((e=>e.topic===n)),i=[];i.push(...a.slice(0,2)),o.length>1?(i.push(o[0]),i.push(o[Math.ceil(Math.random()*(o.length-1))])):i.push(...a.slice(2,4));const s=i.map(oe).join("");d3.select(".pudding-footer .footer-recirc__articles").html(s)}()}))};const se=d3.select("body");let le=0;new Array("When","Women","Make","Headlines")[0].length,function(e,t=document){return[...t.querySelectorAll(e)]}("[target='_blank']").forEach((e=>e.setAttribute("rel","noopener"))),se.classed("is-mobile",a.any()),window.addEventListener("resize",t()((function(){const e=se.node().offsetWidth;le!==e&&(le=e,ne.resize())}),150)),function(){const e=se.select("header");if(e.classed("is-sticky")){const t=se.select("#slide__menu"),n=se.select(".header__toggle");!function(e,t,n,r,a,i){const l=n.selectAll("a, button, .logo").nodes(),c=l[0],d=l[l.length-1];e.on("click",(()=>s(r,e,i))),t.on("click",(()=>s(r,t,i))),n.on("keydown",(t=>{const n=t.code,a=r.classed("is-visible");"Escape"===n&&!0===a&&(e.attr("aria-expanded",!1),e.node().focus(),r.classed("is-active",!1),r.classed("is-visible",!1),e.html((()=>o)))})),d3.select(c).on("keydown",(e=>{if(r.classed("is-visible")){const t=e.code,n=e.shiftKey;"Tab"===t&&!0===n&&(e.preventDefault(),d.focus())}})),d3.select(d).on("keydown",(e=>{if(r.classed("is-visible")){const t=e.code,n=e.shiftKey;"Tab"===t&&!1===n&&(e.preventDefault(),c.focus())}}))}(n,n,e,t,0,!0)}}(),ne.init(),ie()}()}();