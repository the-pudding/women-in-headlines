!function(){var t={296:function(t,e,a){var o=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,r=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof a.g&&a.g&&a.g.Object===Object&&a.g,c="object"==typeof self&&self&&self.Object===Object&&self,d=l||c||Function("return this")(),u=Object.prototype.toString,p=Math.max,m=Math.min,y=function(){return d.Date.now()};function f(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==u.call(t)}(t))return NaN;if(f(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=f(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var a=i.test(t);return a||r.test(t)?s(t.slice(2),a?2:8):n.test(t)?NaN:+t}t.exports=function(t,e,a){var o,n,i,r,s,l,c=0,d=!1,u=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function w(e){var a=o,i=n;return o=n=void 0,c=e,r=t.apply(i,a)}function x(t){return c=t,s=setTimeout(b,e),d?w(t):r}function v(t){var a=t-l;return void 0===l||a>=e||a<0||u&&t-c>=i}function b(){var t=y();if(v(t))return k(t);s=setTimeout(b,function(t){var a=e-(t-l);return u?m(a,i-(t-c)):a}(t))}function k(t){return s=void 0,h&&o?w(t):(o=n=void 0,r)}function _(){var t=y(),a=v(t);if(o=arguments,n=this,l=t,a){if(void 0===s)return x(l);if(u)return s=setTimeout(b,e),w(l)}return void 0===s&&(s=setTimeout(b,e)),r}return e=g(e)||0,f(a)&&(d=!!a.leading,i=(u="maxWait"in a)?p(g(a.maxWait)||0,e):i,h="trailing"in a?!!a.trailing:h),_.cancel=function(){void 0!==s&&clearTimeout(s),c=0,o=l=n=s=void 0},_.flush=function(){return void 0===s?r:k(y())},_}}},e={};function a(o){var n=e[o];if(void 0!==n)return n.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,a),i.exports}a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,{a:e}),e},a.d=function(t,e){for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";var t=a(296),e=a.n(t);const o={android:()=>navigator.userAgent.match(/Android/i),blackberry:()=>navigator.userAgent.match(/BlackBerry/i),ios:()=>navigator.userAgent.match(/iPhone|iPad|iPod/i),opera:()=>navigator.userAgent.match(/Opera Mini/i),windows:()=>navigator.userAgent.match(/IEMobile/i),any:()=>o.android()||o.blackberry()||o.ios()||o.opera()||o.windows()};var n=o;const i='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>',r=d3.select("body");function s(t,e,a){const o=t.classed("is-visible");e.attr("aria-expanded",!o),t.classed("is-active",!o),t.classed("is-visible",!o),r.classed("modal-open",!o),!0===a&&(o?e.html((()=>i)):e.html((()=>'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>')))}var l=function(){let t=d3.select("div#chartB").select("#bubblechartBias").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 1500,540").classed("svg-content",!0),e=d3.select("div#chartP").select("#bubblechartPolarity").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 1500,540").classed("svg-content",!0),a=d3.select("#tooltipHeadline");a.attr("height",135),a.attr("width",300);let o=[{site:"nytimes.com",link:"https://www.vectorlogo.zone/logos/nytimes/nytimes-icon.svg"},{site:"dailymail.co.uk",link:"https://seeklogo.com/images/D/Daily_Mail-logo-EBD7A83A1F-seeklogo.com.png"},{site:"cnn.com",link:"https://www.vectorlogo.zone/logos/cnn/cnn-icon.svg"},{site:"bbc.co.uk",link:"https://www.vectorlogo.zone/logos/bbc/bbc-icon.svg"},{site:"telegraph.co.uk",link:"https://upload.wikimedia.org/wikipedia/commons/4/48/The_Telegraph_logo.svg"},{site:"washingtonpost.com",link:"https://www.vectorlogo.zone/logos/washingtonpost/washingtonpost-icon.svg"},{site:"forbes.com",link:"https://www.vectorlogo.zone/logos/forbes/forbes-icon.svg"},{site:"abcnews.go.com",link:"https://www.vectorlogo.zone/logos/abcgo/abcgo-icon.svg"},{site:"foxnews.com",link:"https://www.vectorlogo.zone/logos/fox/fox-icon.svg"},{site:"ksl.com",link:"https://logodix.com/logo/2090138.png"},{site:"bloomberg.com",link:"https://www.vectorlogo.zone/logos/bloomberg/bloomberg-icon.svg"},{site:"breitbart.com",link:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Breitbart_News.svg/1280px-Breitbart_News.svg.png"},{site:"popsugar.com",link:"https://all-4-one.com/wp-content/uploads/2015/07/PopSugar-Logo-logo.png"},{site:"nbcnews.com",link:"https://www.vectorlogo.zone/logos/nbc/nbc-icon.svg"},{site:"buzzfeed.com",link:"https://www.vectorlogo.zone/logos/buzzfeed/buzzfeed-icon.svg"},{site:"cnet.com",link:"https://www.vectorlogo.zone/logos/cnet/cnet-icon.svg"},{site:"politico.com",link:"https://www.vectorlogo.zone/logos/politico/politico-icon.svg"},{site:"usatoday.com",link:"https://www.vectorlogo.zone/logos/usatoday/usatoday-icon.svg"},{site:"nydailynews.com",link:"https://cdn6.myket.ir/icons/large/b0f31373-17ec-46d5-b6ef-66135cc1b242_.png"},{site:"businessinsider.com",link:"https://i.insider.com/596e4e7a552be51d008b50fd?width=600&format=jpeg"},{site:"aajtak.in",link:"https://static.wikia.nocookie.net/logopedia/images/d/db/Aaj_tak.png"},{site:"espn.go.com",link:"https://cdn.worldvectorlogo.com/logos/espn.svg"},{site:"huffingtonpost.com",link:"https://www.vectorlogo.zone/logos/huffingtonpost/huffingtonpost-icon.svg"}];const n=d3.select("body").append("div").attr("class","tooltipTL").style("position","absolute").style("text-align","left").style("width","200").style("height","auto").style("padding","5px").style("pointer-events","none").style("opacity",0);Promise.all([d3.csv("./assets/data/headlines_site_rapi.csv"),d3.csv("./assets/data/headlines_cl_sent_sm_rapi.csv"),d3.csv("./assets/data/country_time_freqrank_rapi_clean.csv",d3.autoType),d3.csv("./assets/data/polarity_comparison.csv",d3.autoType),d3.csv("./assets/data/country_freqtheme_pivoted.csv",d3.autoType),d3.csv("./assets/data/word_themes.csv",d3.autoType)]).then((a=>{let o=a[0],n=(a[1],a[2]),i=a[3];!function(t,e){var a=100,o=0,n=0,i=100,r=2e3-a-n,s=500-i-o,l=d3.select("#stackedChart").attr("width",s+i+o).attr("height",r+a+n);console.log(t);var c=d3.stack().keys(t.columns.slice(2))(t).map((t=>(t.forEach((e=>e.key=t.key)),t)));console.log(c);var d=d3.scaleBand().domain(t.map((t=>t.country))).range([i,s-o]).padding(.1),u=d3.scaleLinear().domain([c.length,0]).range([r-n,a]);console.log([c.length,0]);var p=t=>t.call(d3.axisBottom(d).tickSizeOuter(0).tickSizeInner(0)).call((t=>t.selectAll(".domain").remove())),m=t=>t.attr("transform",`translate(${s+o+30},210)`).call(d3.axisRight(u).tickSizeOuter(0).tickSizeInner(0)).call((t=>t.selectAll(".domain").remove()));(m=l.append("g").call(m)).selectAll(".tick text").remove(),m.selectAll(".tick").append("text").text(((t,e)=>8==e?"Frequency of use in news headlines ⇢":"")).attr("x",0).attr("y",0).attr("class","stackedChartTicks stackedChartTicks-light").style("transform","rotate(-90deg)"),l.append("g").attr("class","stackedBars").selectAll("g").data(c).join("g").selectAll("rect").data((t=>t)).join("rect").attr("class",(t=>t.key)).attr("fill",(t=>"female_bias"===e.filter((e=>e.word===t.key))[0].theme?"#0BBF99":"empowerement"===e.filter((e=>e.word===t.key))[0].theme?"#F7DC5B":"violence"===e.filter((e=>e.word===t.key))[0].theme?"#F2C5D3":"#ccc")).attr("stroke","#FEFAF1").attr("stroke-width","0.2px").attr("x",((t,e)=>d(t.data.country))).attr("height","4px").attr("width",d.bandwidth()).on("mouseover",((t,e)=>g(e.key,"chartHover",e))).on("mouseleave",((t,e)=>h(e.key))).transition().duration("5000").attr("y",(t=>u(t.data[t.key]))),(p=l.append("g").call(p).attr("class","stackedChartCountries")).selectAll(".tick text").remove();var y=[{country:"South Africa",flag:"assets/images/flags/south-africa.svg"},{country:"USA",flag:"assets/images/flags/united-states.svg"},{country:"India",flag:"assets/images/flags/india.svg"},{country:"UK",flag:"assets/images/flags/united-kingdom.svg"},{country:"All countries",flag:""}];function g(t,e,a){d3.selectAll("."+t).attr("fill","#E75C33"),d3.selectAll(".stackedBars").selectAll("rect:not(."+t+")").attr("opacity","0.5"),"chartHover"===e&&l.append("text").attr("y",u(a.data[t])).text(t).attr("class","stackedBarAnnotation")}function h(t){d3.selectAll("."+t).attr("fill","female_bias"===e.filter((e=>e.word===t))[0].theme?"#0BBF99":"empowerement"===e.filter((e=>e.word===t))[0].theme?"#F7DC5B":"violence"===e.filter((e=>e.word===t))[0].theme?"#F2C5D3":"#ccc"),d3.selectAll(".stackedBarAnnotation").remove(),d3.selectAll(".stackedBars").selectAll("rect").attr("opacity","1")}p.selectAll(".tick").append("text").text((t=>t)).attr("x",0).attr("y",0).attr("class","stackedChartTicks").call(f,d.bandwidth()),p.selectAll(".tick").append("svg:image").attr("height","35px").attr("x",0).attr("y",0).attr("transform","translate(-17, -50)").attr("xlink:href",(t=>console.log(t))).attr("xlink:href",(t=>y.filter((e=>e.country===t))[0].flag)),$(".stackedBarTextAnnotation").on("mouseover",(function(){var t=$(this)[0].attributes.value.value;console.log(t),g(t,"inTextHover")})).on("mouseout",(function(){h($(this)[0].attributes.value.value)})),$(".stackedBarThemeAnnotation").on("mouseover",(function(){var t=$(this)[0].attributes.value.value;console.log(t),d3.selectAll(".stackedBars").selectAll("rect").style("opacity",(a=>e.filter((t=>t.word===a.key))[0].theme===t?"1":"0.2"))})).on("mouseout",(function(){d3.selectAll(".stackedBars").selectAll("rect").style("opacity","1")}))}(a[4],a[5]),function(t){var e={top:130,right:50,bottom:30,left:230},a=1e3-e.left-e.right,o=1630-e.top-e.bottom,n=d3.select("#lollipopChart").append("svg").attr("width",a+e.left+e.right).attr("height",o+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")");t=(t=t.filter((t=>1==t.popularity&&Math.abs(t.difference)>.05&&"dailysun.co.za"!==t.site_clean&&"msnbc"!==t.site_clean))).sort(((t,e)=>d3.descending(+t.polarity_women,+e.polarity_women))),console.log(t);var i=d3.scaleLinear().domain(d3.extent(t,(t=>t.polarity_women))).range([e.left+e.right,a-20]),r=d3.scaleBand().range([0,o]).domain(t.map((t=>t.site_clean))).padding(1);n.append("g").call(d3.axisLeft(r).tickSize(0)).attr("class","polarityCompyAxis"),n.append("g").attr("transform","translate(0,"+o+")").call(d3.axisBottom(i)).attr("class","polarityCompxAxis"),n.selectAll("gridLine").data(t).join("line").attr("x1",10).attr("x2",a).attr("y1",(function(t){return r(t.site_clean)})).attr("y2",(function(t){return r(t.site_clean)})).attr("class","grid"),n.selectAll("myline").data(t).join("line").attr("x1",(function(t){return i(t.polarity_base)})).attr("x2",(function(t){return i(t.polarity_women)})).attr("y1",(function(t){return r(t.site_clean)})).attr("y2",(function(t){return r(t.site_clean)})).attr("class","polarityCompBubbleLine").attr("stroke","black").attr("stroke-width","2.5px"),n.selectAll("mycircle").data(t).join("circle").attr("cx",(function(t){return i(t.polarity_base)})).attr("cy",(function(t){return r(t.site_clean)})).attr("r","4").attr("class","polarityCompBubbleLeft"),n.selectAll("mycircle").data(t).join("circle").attr("cx",(function(t){return i(t.polarity_women)})).attr("cy",(function(t){return r(t.site_clean)})).attr("class","polarityCompBubbleRight").attr("r","11"),n.selectAll("mycircle").data(t).join("text").attr("x",(t=>i(t.polarity_women))).attr("y",(t=>r(t.site_clean))).attr("class","polarityDiffAnnotation").text((t=>(t.polarity_women-t.polarity_base)/t.polarity_base*100>0?"+"+Math.round((t.polarity_women-t.polarity_base)/t.polarity_base*100)+"%":Math.round((t.polarity_women-t.polarity_base)/t.polarity_base*100)+"%")),n.append("line").attr("x1",0).attr("x2",200).attr("y1",-60).attr("y2",-60).attr("stroke","black").attr("stroke-width","2.5px"),n.append("circle").attr("cx",0).attr("cy",-60).attr("r","4").attr("class","polarityCompBubbleLeft"),n.append("circle").attr("cx",200).attr("cy",-60).attr("class","polarityCompBubbleRight").attr("r","11"),n.append("text").attr("class","xAxisLabel").attr("x",0).attr("y",-60).text("All headlines").attr("class","polarityCompAllText"),n.append("text").attr("class","xAxisLabel").attr("x",200).attr("y",-60).text("Headlines about women").attr("class","polarityCompFemText").call(f,100),n.append("text").attr("class","polarityCompxAxisLabel").attr("y",-15).attr("x",e).attr("dy","1em").style("text-anchor","start").text("← Less polarizing language"),n.append("text").attr("class","polarityCompxAxisLabel").attr("y",-15).attr("x",a).attr("dy","1em").style("text-anchor","end").text("More polarizing language →"),d3.select("#sortLollipopDiff").on("click",(function(){var e=t.sort(((t,e)=>d3.descending(+t.difference,+e.difference)));r.domain(e.map((t=>t.site_clean))),n.select(".polarityCompyAxis").transition().duration("1000").call(d3.axisLeft(r).tickSize(0)),n.selectAll("circle").sort(((t,e)=>void 0!==t?d3.ascending(+t.difference,+e.difference):"")).transition().duration("1000").attr("cy",((t,e)=>void 0!==t?r(t.site_clean):"-60")),n.selectAll(".polarityDiffAnnotation").sort(((t,e)=>d3.ascending(+t.difference,+e.difference))).transition().duration("1000").attr("y",((t,e)=>r(t.site_clean))),n.selectAll(".polarityCompBubbleLine").sort(((t,e)=>d3.ascending(+t.difference,+e.difference))).transition().duration("1000").attr("x1",((t,e)=>i(t.polarity_base))).attr("x2",((t,e)=>i(t.polarity_women))).attr("y1",((t,e)=>r(t.site_clean))).attr("y2",((t,e)=>r(t.site_clean)))})),d3.select("#sortLollipopPol").on("click",(function(){var e=t.sort(((t,e)=>d3.descending(+t.polarity_women,+e.polarity_women)));r.domain(e.map((t=>t.site_clean))),n.select(".polarityCompyAxis").transition().duration("1000").call(d3.axisLeft(r).tickSize(0)),n.selectAll("circle").sort(((t,e)=>void 0!==t?d3.ascending(+t.polarity_women,+e.polarity_women):"")).transition().duration("1000").attr("cy",((t,e)=>void 0!==t?r(t.site_clean):"-60")),n.selectAll(".polarityDiffAnnotation").sort(((t,e)=>d3.ascending(+t.polarity_women,+e.polarity_women))).transition().duration("1000").attr("y",((t,e)=>r(t.site_clean))),n.selectAll(".polarityCompBubbleLine").sort(((t,e)=>d3.ascending(+t.polarity_women,+e.polarity_women))).transition().duration("1000").attr("x1",((t,e)=>i(t.polarity_base))).attr("x2",((t,e)=>i(t.polarity_women))).attr("y1",((t,e)=>r(t.site_clean))).attr("y2",((t,e)=>r(t.site_clean)))}))}(i);var s=[2009,2022],l="freq_prop_headlines";r(n,s,"USA",l),d3.selectAll("button.country").on("click",(function(){d3.select(".mainContainer").remove(),d3.select(".stickyAxis").remove();let t=d3.select(this).property("value");console.log(t),r(n,s,t,l)})),p(o,"#countrydropdown","country_of_pub"),p(o,"#pubdropdown","site"),u(o,t,"bias"),u(o,e,"polarity")})),$(window).scroll((function(){$(this).scrollTop()-$("#conclusionSection").position().top>-700?$("#stickyXaxis").css({position:"static",top:"0px"}):$("#stickyXaxis").css({position:"sticky",top:"0px"})})),$(window).scroll((function(){$(this).scrollTop()-$("#waveChartSection").position().top>-700?$(".bubbleFilters").css({position:"static",top:"0px"}):$(".bubbleFilters").css({position:"sticky",top:"0px"})})),$(window).scroll((function(){$(this).scrollTop()-$("#endStackedbarSection").position().top>-100?$("#stickyStackedChart").css({position:"static",top:"0px"}):$("#stickyStackedChart").css({position:"sticky",top:"0px"})}));var i=function(t,e,a){this.toRotate=e,this.el=t,this.loopNum=0,this.period=parseInt(a,10)||2e3,this.txt="",this.tick(),this.isDeleting=!1};function r(t,e,a,o){var i=1120,r="#3569DC",d=d3.cross(d3.range(200),d3.range(1),((t,e)=>({row:t,col:e})));console.log(d);var u=d3.scaleBand().domain(d3.range(200)).range([0,9830]).paddingInner(-1),p=d3.scaleBand().domain(d3.range(1)).range([0,i]).paddingInner(.2),m=(new Date(2010,0).getTime(),new Date(2021,0).getTime(),[{uid:1,name:"Horrifying gang rape and murder in New Delhi, India",category:4,date:new Date(2012,11,16)},{uid:1,name:"The U.S. military removes a ban against women serving in combat positions",category:4,date:new Date(2013,1,24)},{uid:1,name:"A new Pentagon report found a 50% increase in sexual assault reports in 2013",category:4,date:new Date(2014,5,1)},{uid:1,name:"Caitlyn Jenner comes out in an interview",category:4,date:new Date(2015,4,24)},{uid:1,name:"A survey for the Department of Defense finds that in the past year 52% of active service members who reported sexual assault had experienced retaliation in the form of professional, social, and administrative actions or punishments.",category:4,date:new Date(2015,4,18)},{uid:2,name:"People v. Turner: Brock Turner is arrested for sexually assaulting an unconscious woman",category:4,date:new Date(2015,1,18)},{uid:1,name:"#EndRapeCulture in South Africa",category:4,date:new Date(2016,4,0)},{uid:2,name:"Hillary Clinton becomes the first woman to receive a presidential nomination from a major political party",category:4,date:new Date(2016,7,26)},{uid:3,name:"Trump: “Grab ‘em by the pussy”",category:4,date:new Date(2016,10,8)},{uid:4,name:"People v. Turner: Brock Turner is convicted for three counts of felony sexual assault",category:4,date:new Date(2016,3,30)},{uid:5,name:"People v. Turner: Brock Turner is released after spending 3 months in jail",category:4,date:new Date(2016,9,2)},{uid:1,name:"#MeToo in U.S.A.",category:4,date:new Date(2017,10,15)},{uid:2,name:"Harvey Weinstein Trial",category:4,date:new Date(2017,10,0)},{uid:3,name:"#ChurchToo in U.S.A.",category:4,date:new Date(2017,11,0)},{uid:4,name:"#MeTooSTEM and removal of Francisco J. Ayala from UC Irvine",category:4,date:new Date(2017,11,0)},{uid:5,name:"Release of Wonder Woman",category:4,date:new Date(2017,5,15)},{uid:6,name:"Larry Nassar U.S. Gymnastics doctor sexual assault scandal",category:4,date:new Date(2017,12,0)},{uid:7,name:"Jessie Reyez releases “Gatekeeper”",category:4,date:new Date(2017,4,26)},{uid:8,name:"The 2017 Westminster sexual scandals in the U.K. and resignation of Sir Michael Fallon",category:4,date:new Date(2017,11,0)},{uid:1,name:"Meghan Markle’s wedding to Prince Harry in U.K.",category:4,date:new Date(2018,5,19)},{uid:2,name:"MEE TOO bill in U.S. Congress",category:4,date:new Date(2018,1,18)},{uid:3,name:"Priyanka Chopra marries Nick Jonas in India",category:4,date:new Date(2018,12,1)},{uid:4,name:"People v. Turner: Brock Turner is convicted by jury trial of three counts of felony sexual assault",category:4,date:new Date(2018,1,0)},{uid:5,name:"Google’s Andy Rubin sexual misconduct scandal",category:4,date:new Date(2018,10,25)},{uid:6,name:"Global Women’s March",category:4,date:new Date(2018,1,20)},{uid:7,name:"#MeTooMilitary in U.S.A",category:4,date:new Date(2018,1,0)},{uid:8,name:"#MeToo in India",category:4,date:new Date(2018,10,0)},{uid:9,name:"Mass sexual assaults during the 2018 new year's celebrations in Bangalore",category:4,date:new Date(2018,12,0)},{uid:10,name:"Indian actress Tanushree Dutta accuses Nana Patekar of sexual harassment",category:4,date:new Date(2018,9,27)},{uid:11,name:"Indian minister of state for External Affairs, MJ Akbar is accused of sexual harassment by several female colleagues through the 'Me Too' Movement in India",category:4,date:new Date(2018,10,0)},{uid:12,name:"Indian music director Anu Malik is suspended from the jury panel of Indian Idol 2018, after facing multiple allegations of sexual harassment",category:4,date:new Date(2018,10,21)},{uid:13,name:"Marriage of Prince Harry and Meghan Markle",category:4,date:new Date(2018,5,19)},{uid:1,name:"Greta Thunberg: Climate Action Summit and sail to NYC",category:4,date:new Date(2019,8,28)},{uid:2,name:"Release of “Surviving R. Kelly” documentary",category:4,date:new Date(2019,1,0)},{uid:3,name:"Arrest of R. Kelly for 10 counts of sexual abuse against four women",category:4,date:new Date(2019,2,0)},{uid:1,name:"#SayHerName: Murder of Breonna Taylor",category:4,date:new Date(2020,3,0)},{uid:2,name:"International Women’s Cricket T20",category:4,date:new Date(2020,2,0)},{uid:3,name:"Rape and murder of Vanessa Guillén in U.S. military",category:4,date:new Date(2020,4,22)},{uid:1,name:"16 year old Ma'Khia Bryant is fatally shot by police officer Nicholas Reardon in Columbus, Ohio",category:4,date:new Date(2021,4,20)},{uid:2,name:"Kamala Harris is sworn in as the first woman and first woman of color vice president of the United States",category:4,date:new Date(2021,1,20)},{uid:3,name:"Oprah with Meghan and Harry and “Megxit”",category:4,date:new Date(2021,3,7)},{uid:3,name:"Indian Prime Minister, Narendra Modi, follows trolls on twitter”",category:4,date:new Date(2017,8,8)},{uid:3,name:"Study finds that Indian women politicians face more trolling than US, UK counterparts",category:4,date:new Date(2021,0,24)},{uid:3,name:"40% Indian women fear online trolls as they access Internet: Nielson report",category:4,date:new Date(2019,11,17)},{uid:3,name:"Indian central government passes the Citizenship Amendment Act, by providing a pathway to Indian citizenship for persecuted religious minorities from Afghanistan, Bangladesh and Pakistan who are Hindus, Sikhs, Buddhists, Jains, Parsis or Christians, and arrived in India before the end of December 2014",category:4,date:new Date(2019,11,12)},{uid:3,name:"India saw, for the first time, a sustained countrywide movement led by Women against the CAA-NRC bills",category:4,date:new Date(2020,0,13)},{uid:3,name:"defamation case filed by former Union minister M J Akbar's against journalist Priya Ramani who had accused him of sexual harassment",category:4,date:new Date(2021,4,5)},{uid:3,name:"A majority judgement which declared the prohibition of entry of women aged between 10 and 50 into Sabarimala temple, as unconstitutional and discriminatory",category:4,date:new Date(2018,8,28)},{uid:3,name:"A Supreme Court Bench declared muslim instantaneous divorce, triple Talaq, as unconstitutional",category:4,date:new Date(2019,6,31)},{uid:3,name:"Indian court grants bail to Nupur Talwar, a dentist accused in the twin murder of her daughter and domestic help",category:4,date:new Date(2019,6,31)},{uid:3,name:"Kanimozhi Karunanidhi, Member of Parliament, accused in 2G scam, refused bail",category:4,date:new Date(2011,4,11)},{uid:3,name:"Accused who set fire to the rape survivor from Unnao, Uttar Pradesh, India, out on bail",category:4,date:new Date(2019,11,5)},{uid:3,name:"Multiple women enter inner sanctum of temples across the country, after protest",category:4,date:new Date(2016,2,3)},{uid:3,name:"Section 377: Supreme Court legalizes consensual sexual conduct between adults of the same sex",category:4,date:new Date(2018,8,6)},{uid:3,name:"Women’s Cricket World Cup 2017",category:4,date:new Date(2017,5,23)},{uid:3,name:"The Marikana massacre was the killing of 34 miners by the South African Police Service (SAPS). It took place on 16 August 2012, and was the most lethal use of force by South African security forces against civilians since 1976.",category:4,date:new Date(2012,7,16)},{uid:3,name:"On 11 April 2015, several South Africans attacked foreigners in a xenophobic attack in Durban, South Africa, which extended to some parts of Johannesburg. Several people, both foreign and South African alike, were killed with some of the killings captured on camera.",category:4,date:new Date(2015,3,11)},{uid:3,name:"Brutal gang rape and subsequent death of South African teenager",category:4,date:new Date(2013,1,2)},{uid:3,name:"Monica Lewinsky breaks decade-long media silence",category:4,date:new Date(2014,4,6)}]),y=t.filter((t=>t.year>e[0]&&t.year<e[1]&&t.country===a));console.log("words"),console.log(y),y=y.map((t=>({year:t.year,frequency:t[o],word:t.word,word_type:t.word_type})));var f=d3.rollup(y,(t=>t.map((({year:t,frequency:e})=>({date:new Date(t,0,1),frequency:e})))),(t=>t.word)),g=d3.zip(Array.from(f),d).map((([[t,e],{row:a,col:o}])=>({word:t,rates:e,row:a,col:o})));console.log("test"),console.log(g);var h=g[0].rates[0].date,w=g[0].rates[g[0].rates.length-1].date,x=d3.scaleTime().domain([h,w]).range([0,p.bandwidth()]),v=Object.fromEntries(g.map((t=>{const e=d3.max(t.rates,(t=>t.frequency)),a=d3.scaleLinear().domain([0,e]).range([u.bandwidth(),0]).nice();d3.curveMonotoneX;const o=d3.area().x((t=>x(t.date))).y1((t=>a(t.frequency))).y0((t=>a(0))).curve(d3.curveMonotoneX),n=d3.line().x((t=>x(t.date))).y((t=>a(t.frequency))).curve(d3.curveMonotoneX);return[t.word,{y:a,area:o,line:n}]})));const b=d3.select("div#smChart").append("svg").attr("class","mainContainer").attr("width",1200).attr("height",1e4);var k=b.append("defs").append("linearGradient").attr("id","linear-gradient");k.attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%"),k.append("stop").attr("offset","0%").attr("stop-color",r),k.append("stop").attr("offset","90%").attr("stop-color","#FEFAF1"),k.append("stop").attr("offset","100%").attr("stop-color","#FEFAF1");const _=b.append("g").attr("transform","translate(40, 50)"),A=_.append("g").selectAll("g").data(g).join("g").attr("class","cell").attr("transform",(t=>`translate(${p(t.col)}, ${u(t.row)})`));A.append("path").attr("d",(t=>v[t.word].area(t.rates))).attr("fill","url(#linear-gradient)").attr("opacity",.5).attr("class","wordArea").attr("id",(t=>"area"+t.word)).on("mouseover",((t,e)=>l(0,e))).on("mouseleave",((t,e)=>c())),A.append("path").style("stroke","url(#linear-gradient)").attr("stroke-width",1.5).attr("fill","none").attr("class","wordLine").attr("id",(t=>"line"+t.word)).attr("d",(t=>v[t.word].line(t.rates))).on("mouseover",((t,e)=>l(0,e))).on("mouseleave",((t,e)=>c()));const D=d3.axisBottom(x).ticks(10).tickSizeOuter(0).tickSizeInner(0).tickPadding(30).tickFormat(((t,e)=>0==e||3==e||6==e||9==e||11==e?d3.timeFormat("%Y")(new Date(t)):"")),C=d3.select("div#stickyXaxis").append("svg").attr("transform","translate(40, 0)").attr("width",1200).attr("height",200).attr("class","stickyAxis");C.append("g").attr("transform",`translate(${p(0)}, 150)`).call(D).call((t=>t.selectAll(".tick"))).call((t=>t.select(".domain").attr("stroke-width",2).attr("color","#282828"))),C.append("g").attr("transform",`translate(${p(0)}, 150)`).append("text").text("News Events").attr("class","annotation").attr("font-weight","400").attr("x",-20).attr("y",-4),C.append("g").attr("transform",`translate(${p(0)}, 150)`).selectAll("circle").data(function(t,{radius:e=1,x:a=(t=>t)}={}){const o=e**2,n=t.map(((e,o)=>({x:+a(e,o,t),data:e}))).sort(((t,e)=>t.x-e.x));let i=null,r=null;function s(t,e){let a=i;for(;a;){if(o-.001>(a.x-t)**2+(a.y-e)**2)return!0;a=a.next}return!1}for(const t of n){for(;i&&i.x<t.x-o;)i=i.next;if(s(t.x,t.y=0)){let e=i;t.y=1/0;do{let a=e.y+Math.sqrt(o-(e.x-t.x)**2),n=e.y-Math.sqrt(o-(e.x-t.x)**2);Math.abs(a)<Math.abs(t.y)&&!s(t.x,a)&&(t.y=a),Math.abs(n)<Math.abs(t.y)&&!s(t.x,n)&&(t.y=n),e=e.next}while(e)}t.next=null,null===i?i=r=t:r=r.next=t}return n}(m.filter((t=>t.date<=w)),{radius:13.5,x:t=>x(t.date)})).join("circle").attr("cx",(t=>t.x)).attr("cy",(t=>t.y)).attr("fill",r).attr("r",6).attr("opacity","0.5").on("mouseover",((t,e)=>s(t,e.data,_))).on("mouseleave",((t,e)=>{d3.selectAll(".timeRuler").remove(),n.transition().duration(500).style("opacity",0)})),A.each((function(t){const e=d3.select(this).attr("class","SMCell").attr("id",(t=>"cell"+t.word));d3.axisLeft(v[t.word].y).ticks(2).tickSizeOuter(0),e.append("g").attr("class","catLabel").append("text").attr("x",-10).attr("y",u.bandwidth()).attr("class","wordText").attr("id",(t=>"text"+t.word)).text(t.word).on("mouseover",((t,e)=>l(0,e))).on("mouseleave",((t,e)=>c()))}))}function s(t,e,a,o){a.append("g").append("rect").attr("class","timeRuler").attr("transform",`translate(${col(0)}, -${margin.top/3})`).attr("x",x(e.date)-9).attr("y",0).attr("height",visHeight),console.log(new Date("2021")),n.transition().duration(0).style("opacity",1).style("width",200).style("height",100),n.html(`<b>${d3.timeFormat("%m/%Y")(e.date)}</b><br>\n\t\t\t\t\t<i>${e.name}`).attr("transform",`translate(${3*-col(0)}, -${margin.top/3})`).style("left",x(new Date("01-01-2025"))).style("top",t.pageY+"px").attr("class","tooltipTL")}function l(t,e){d3.selectAll(".wordArea").attr("opacity",.25),d3.selectAll(".wordLine").attr("opacity",.4),d3.selectAll(".wordText").attr("opacity",.5),console.log(e.rates),console.log(e.rates[e.rates.length-1].frequency),d3.max(e.rates,(t=>t.date)),e.rates[e.rates.length-1].frequency,e.rates[0].frequency,d3.select("#area"+e.word).attr("opacity",.85),d3.select("#line"+e.word).attr("opacity",1),d3.select("#text"+e.word).attr("opacity",1)}function c(t,e){d3.selectAll(".wordArea").attr("opacity",.5),d3.selectAll(".wordLine").attr("opacity",1),d3.selectAll(".wordText").attr("opacity",1),d3.selectAll(".incText").remove()}function d(t,e,o,n,i,r,s,l){let c=i[0]-120,d=i[1]-200;a.selectAll("#tooltipText").remove(),a.style("display","block").style("visibility","visible").style("top",d+"px").style("left",c+"px").style("border","solid 1px #282828"),d3.select("#hoverGuide").remove(),d3.select("#hoverGuideLine").remove(),r=l.bias>.5?r.filter((t=>t.site===e&t.bias>.5)):r.filter((t=>t.site===e&t.bias<.5)),randHeadline=Math.floor(Math.random()*r.length);a.append("text").attr("id","tooltipText").attr("y",21.5).attr("x",0).attr("font-size","11px").attr("font-weight","bold").style("text-transform","uppercase").attr("fill","#E75C33").html("<b>"+d3.timeFormat("%b %Y")(new Date(r[randHeadline].time))+" | "+r[randHeadline].site).call(f,300),a.append("text").attr("id","tooltipText").attr("y",86/1.2).attr("x",0).attr("font-size","12px").style("text-transform","uppercase").attr("fill","#282828").html('<b>"'+r[randHeadline].headline_no_site+'"').call(f,300)}function u(t,e,a){let n=1420,i=410;const r=t.filter((t=>0!=+t.monthly_visits&0!=+t[a]&"msn.com"!==t.site&"sports.yahoo.com"!==t.site&"finance.yahoo.com"!==t.site&"news.google.com"!==t.site&"news.yahoo.com"!==t.site&"bbc.com"!==t.site&"makeuseof.com"!==t.site&"which.co.uk"!==t.site&"espncricinfo.com"!==t.site&"seekingalpha.com"!==t.site&"prokerala.com"!==t.site)).map((t=>"polarity"===a?{site:t.site,polarity:t[a],monthly_visits:t.monthly_visits,country_of_pub:t.country_of_pub}:{site:t.site,bias:t[a],monthly_visits:t.monthly_visits,country_of_pub:t.country_of_pub}));console.log("fil data",r);var s=d3.scaleSymlog().range([130,n]).domain("polarity"===a?[0,d3.max(r,(t=>+t[a]))]:d3.extent(r,(t=>+t[a]))),l=d3.extent(r,(t=>+t.monthly_visits)),c=d3.scaleSqrt().domain(l).range([3,70]),u=d3.scaleLinear().domain(l).range([18,100]);d3.forceSimulation().nodes(r).force("charge",d3.forceManyBody().strength(1)).force("x",d3.forceX().x((function(t){return s(+t[a])}))).force("y",d3.forceY(i/1.5).strength(.05)).force("collide",d3.forceCollide((t=>c(+t.monthly_visits)))).on("tick",(function(){var t=e.select("#body"+a).selectAll("circle").data(r),n=e.select("#body"+a).selectAll("image").data(r),i=t.join("circle").attr("class","forceCircles").style("opacity","1").attr("r",(t=>c(+t.monthly_visits))).on("mouseenter",((t,e)=>{d(0,e.site,e.country_of_pub,e.monthly_visits,[t.clientX,t.clientY],headlines,e.polarity,e)})).on("mousemove",((t,e)=>{d(0,e.site,e.country_of_pub,e.monthly_visits,[t.clientX,t.clientY],headlines,e.polarity,e)})).on("mouseleave",((t,e)=>{d3.select("#tooltipHeadline").style("display","none")})).on("mouseover.color",(function(){d3.select(this).style("stroke","#E75C33").style("stroke-width","3px")})).on("mouseleave.color",(function(){d3.select(this).style("stroke","#323232").style("stroke-width","1px")})),s=n.join("svg:image").attr("class","forceLogo").attr("transform",(t=>"bbc.co.uk"==t.site?"translate(-50,-50)":"cnn.com"==t.site|"foxnews.com"==t.site?"translate(-30,-30)":"espn.go.com"==t.site?"translate(-34,-10)":"nytimes.com"==t.site|"buzzfeed.com"==t.site?"translate(-25,-25)":"washingtonpost.com"==t.site|"huffingtonpost.com"==t.site|"usatoday.com"==t.site?"translate(-20,-20)":"dailymail.co.uk"==t.site?"translate(-22,-18)":"politico.com"==t.site|"ksl.com"==t.site|"abcnews.go.com"==t.site|"nydailynews.com"==t.site?"translate(-12.5,-12.5)":"telegraph.co.uk"==t.site?"translate(-15,-3)":"breitbart.com"==t.site?"translate(-14,-10)":"aajtak.in"==t.site?"translate(-25,-20)":"businessinsider.com"==t.site?"translate(-14,-13)":"translate(-15,-15)")).attr("width",(t=>u(+t.monthly_visits))).attr("xlink:href",(t=>+t.monthly_visits>15e7?o.filter((e=>e.site==t.site))[0].link:"")).on("mouseenter",((t,e)=>{d(0,e.site,e.country_of_pub,e.monthly_visits,[t.clientX,t.clientY],headlines,e.polarity,e)})).on("mousemove",((t,e)=>{d(0,e.site,e.country_of_pub,e.monthly_visits,[t.clientX,t.clientY],headlines,e.polarity,e)})).on("mouseleave",((t,e)=>{d3.select("#tooltipHeadline").style("display","none")}));t.merge(i).attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})),n.merge(s).attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y}))})),e.append("text").attr("id","hoverGuide").attr("y",102.5).attr("x",n/1.5).attr("dy","1em").style("text-anchor","start").text("Hover over a bubble to explore headlines from that outlet!");var p=+t.filter((t=>"telegraph.co.uk"===t.site))[0].bias+.01;e.append("line").attr("y1",128.125).attr("x1",n/1.2).attr("x2",s(p)).attr("y2",i/1.85).attr("id","hoverGuideLine"),e.append("text").attr("id","xAxisLabel").attr("y",442.8).attr("x",80).attr("dy","1em").style("text-anchor","start").text("bias"===a?"← Less Biased Language":"← Less Polarizing Language"),e.append("text").attr("id","xAxisLabel").attr("y",442.8).attr("x",n).attr("dy","1em").style("text-anchor","end").text("bias"===a?"More Biased Language →":"More Polarizing Language →");var m=[{level:"",radius:c(1e7),y:485,x:n/2.2,anchor:"end",xtext:n/2.235,ytext:463,id:""},{level:"",radius:c(1e8),y:485,x:n/2.05,id:""},{level:"1B Monthly Viewers",radius:c(1e9),y:485,x:n/1.85,anchor:"middle",xtext:n/1.85,ytext:456,id:""},{level:"?",radius:c(3e7),y:453.8,x:1435,anchor:"middle",xtext:1435,ytext:458.8,id:"info"}];e.append("g").selectAll("circle").data(m).join("circle").attr("cx",(t=>t.x)).attr("cy",(t=>t.y)).attr("r",(t=>t.radius)).attr("class","legendBubble").on("mouseover",((t,e)=>"info"===e.id?y(t.clientX-150,t.clientY-420):"")).on("mouseleave",((t,e)=>d3.select("#tooltipInfo").style("visibility","hidden"))),e.append("g").selectAll("text").data(m).join("text").text((t=>t.level)).attr("x",(t=>t.xtext)).attr("y",(t=>t.ytext)).attr("class","themesText").style("text-anchor",(t=>t.anchor)).attr("id","info").call(f,10).on("mouseover",((t,e)=>"info"===e.id?y(t.clientX-150,t.clientY-420):"")).on("mouseleave",((t,e)=>d3.select("#tooltipInfo").style("visibility","hidden"))),d3.select("#countrydropdown").on("change",(function(){const t=d3.select(this).property("value");allCircs=d3.selectAll(".forceCircles"),allLogos=d3.selectAll(".forceLogos"),allCircs.style("fill",(e=>e.country_of_pub.toLowerCase()===t.toLowerCase()?"#F7DC5B":"#FEFAF1")),allCircs.style("opacity",(e=>e.country_of_pub.toLowerCase()===t.toLowerCase()||""===t?"1":"0.2")),allLogos.style("opacity",(e=>e.country_of_pub.toLowerCase()===t.toLowerCase()||""===t?"1":"0.2"))})),d3.select("#pubdropdown").on("change",(function(){const t=d3.select(this).property("value");allCircs=d3.selectAll(".forceCircles"),allLogos=d3.selectAll(".forceLogos"),allCircs.style("fill",(e=>e.site.toLowerCase()===t.toLowerCase()?"#F7DC5B":"#FEFAF1")),allCircs.style("opacity",(e=>e.site.toLowerCase()===t.toLowerCase()||""===t?"1":"0.2")),allLogos.style("opacity",(e=>e.site.toLowerCase()===t.toLowerCase()||""===t?"1":"0.2"))}))}function p(t,e,a){var o=d3.select(e);const n=d3.map(t,(t=>t[a])).filter(m);"country_of_pub"===a?n.unshift("Country..."):n.unshift("Newsroom..."),o.selectAll("option").data(n).join("option").attr("value",(t=>"Country..."===t||"Newsroom..."===t?"":t)).text((t=>t))}function m(t,e,a){return a.indexOf(t)===e}function y(t,e){console.log("working"),info=d3.select("#tooltipInfo").style("display","block").style("visibility","visible").style("top",e+"px").style("left",t+"px").style("border","solid 1px #ccc").style("font","10px sans-serif").attr("stroke","#ccc").html("We measure <b> gender bias </b> by tracking the combined occurrence of gendered language and social stereotypes usually associated with women. We do this in two steps: <br> <br> 1) We check if a headline contains gendered language (i.e. 'spokeswoman', 'chairwoman', 'she', 'her', 'bride', 'daughter', 'daughters', 'female', 'fiancee', 'girl', 'girlfriend' etc.) <br> <br> 2) If it contains gendered language, we then count the number of words that are considered to be social stereotypes about women (i.e. 'weak', 'modest', 'virgin', 'slut', 'whore', 'sexy', 'feminine', 'sensitive', 'emotional', 'gentle', 'soft', 'pretty', 'bitch', 'sexual' etc.).<br><br> Finally, we normalize this count for all headlines within each outlet as a score between 0 and 1, and we aggregate (i.e. average) this score for each outlet. <br><br> We measure <b>polarity</b> by performing sentiment analysis on each headline using the Vader python package, where each headline gets a sentiment score from -1 to 1 (from more negative to more positive). Because we are interested in polarity, we take the absolute value of each headline's score.")}function f(t,e){t.each((function(){for(var t,a=d3.select(this),o=a.text().split(/\s+/).reverse(),n=[],i=0,r=a.attr("x"),s=a.attr("y"),l=a.text(null).append("tspan").attr("x",r).attr("y",s).attr("dy","0em");t=o.pop();)n.push(t),l.text(n.join(" ")),l.node().getComputedTextLength()>e&&(n.pop(),l.text(n.join(" ")),n=[t],l=a.append("tspan").attr("x",r).attr("y",s).attr("dy",1.1*++i+0+"em").text(t))}))}i.prototype.tick=function(){var t=this.loopNum%this.toRotate.length,e=this.toRotate[t];this.isDeleting?this.txt=e.substring(0,0):this.txt=e.substring(0,this.txt.length+1),this.el.innerHTML='<span class="wrap">'+this.txt+"</span>";var a=this,o=50-Math.random();this.isDeleting&&(o/=2),this.isDeleting||this.txt!==e?this.isDeleting&&""===this.txt&&(this.isDeleting=!1,this.loopNum++,o=500):(o=this.period,this.isDeleting=!0),setTimeout((function(){a.tick()}),o)},window.onload=function(){for(var t=document.getElementsByClassName("txt-rotate"),e=0;e<t.length;e++){var a=t[e].getAttribute("data-rotate"),o=t[e].getAttribute("data-period");a&&new i(t[e],JSON.parse(a),o)}var n=document.createElement("style");n.innerHTML=".txt-rotate > .wrap { border-right: 0.08em solid #666}",document.body.appendChild(n)}},c=function(){};const d=[{image:"2018_02_stand-up",url:"2018/02/stand-up",hed:"The Structure of Stand-Up Comedy"},{image:"2018_04_birthday-paradox",url:"2018/04/birthday-paradox",hed:"The Birthday Paradox Experiment"},{image:"2018_11_boy-bands",url:"2018/11/boy-bands",hed:"Internet Boy Band Database"},{image:"2018_08_pockets",url:"2018/08/pockets",hed:"Women’s Pockets are Inferior"}];let u=null;function p(t){return`\n\t<a class='footer-recirc__article' href='https://pudding.cool/${t.url}' target='_blank' rel='noopener'>\n\t\t<img class='article__img' src='https://pudding.cool/common/assets/thumbnails/640/${t.image}.jpg' alt='${t.hed}'>\n\t\t<p class='article__headline'>${t.hed}</p>\n\t</a>\n\t`}var m=function(){!function(t){const e=new XMLHttpRequest,a=`https://pudding.cool/assets/data/stories.json?v=${Date.now()}`;e.open("GET",a,!0),e.onload=()=>{if(e.status>=200&&e.status<400){const a=JSON.parse(e.responseText);t(a)}else t(d)},e.onerror=()=>t(d),e.send()}((t=>{u=t,function(){const t=window.location.href,e=u.find((e=>t.includes(e.url))),a=e?e.topic:"culture",o=u.filter((e=>!t.includes(e.url))),n=o.filter((t=>t.topic!==a)),i=o.filter((t=>t.topic===a)),r=[];r.push(...n.slice(0,2)),r.push(i[0]),r.push(i[Math.ceil(Math.random()*(i.length-1))]);const s=r.map(p).join("");d3.select(".pudding-footer .footer-recirc__articles").html(s)}()}))};const y=d3.select("body");let f=0;(function(t,e=document){return[...e.querySelectorAll(t)]})("[target='_blank']").forEach((t=>t.setAttribute("rel","noopener"))),y.classed("is-mobile",n.any()),window.addEventListener("resize",e()((function(){const t=y.node().offsetWidth;f!==t&&(f=t,c())}),150)),function(){const t=y.select("header");if(t.classed("is-sticky")){const e=y.select("#slide__menu"),a=y.select(".header__toggle");!function(t,e,a,o,n,r){const l=a.selectAll("a, button, .logo").nodes(),c=l[0],d=l[l.length-1];t.on("click",(()=>s(o,t,r))),e.on("click",(()=>s(o,e,r))),a.on("keydown",(e=>{const a=e.code,n=o.classed("is-visible");"Escape"===a&&!0===n&&(t.attr("aria-expanded",!1),t.node().focus(),o.classed("is-active",!1),o.classed("is-visible",!1),t.html((()=>i)))})),d3.select(c).on("keydown",(t=>{if(o.classed("is-visible")){const e=t.code,a=t.shiftKey;"Tab"===e&&!0===a&&(t.preventDefault(),d.focus())}})),d3.select(d).on("keydown",(t=>{if(o.classed("is-visible")){const e=t.code,a=t.shiftKey;"Tab"===e&&!1===a&&(t.preventDefault(),c.focus())}}))}(a,a,t,e,0,!0)}}(),l(),m()}()}();